<!DOCTYPE html>
<html>
<head>
<title>SKK Manual</title>
<!-- 2017-07-02 日 05:46 -->
<meta  charset="utf-8">
<meta  name="generator" content="Org-mode">
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="skk.css" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">SKK Manual</h1>
<div id="table-of-contents">
<h2>&#30446;&#27425;</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. Copying</a></li>
<li><a href="#sec-2">2. はじめに</a>
<ul>
<li><a href="#sec-2-1">2.1. このバージョンの SKK について</a></li>
<li><a href="#sec-2-2">2.2. SKK とはなにか</a></li>
</ul>
</li>
<li><a href="#sec-3">3. インストール</a>
<ul>
<li><a href="#sec-3-1">3.1. APEL のインストール</a></li>
<li><a href="#sec-3-2">3.2. DDSKK のインストール</a></li>
<li><a href="#sec-3-3">3.3. 辞書について</a></li>
<li><a href="#sec-3-4">3.4. 辞書の入手</a></li>
<li><a href="#sec-3-5">3.5. 辞書を DDSKK と同時にインストールする</a></li>
<li><a href="#sec-3-6">3.6. 辞書サーバの入手</a></li>
</ul>
</li>
<li><a href="#sec-4">4. はじめの設定</a>
<ul>
<li><a href="#sec-4-1">4.1. 最も基本的な設定</a></li>
<li><a href="#sec-4-2">4.2. インクリメント検索の設定</a></li>
<li><a href="#sec-4-3">4.3. 辞書サーバを使いたいときの設定</a></li>
<li><a href="#sec-4-4">4.4. DDSKK を Emacs の Input Method とする</a></li>
</ul>
</li>
<li><a href="#sec-5">5. 基本的な使い方</a>
<ul>
<li><a href="#sec-5-1">5.1. 起動と終了</a></li>
<li><a href="#sec-5-2">5.2. 入力モード</a></li>
<li><a href="#sec-5-3">5.3. 変換モード</a></li>
<li><a href="#sec-5-4">5.4. インクリメンタル・サーチ</a></li>
<li><a href="#sec-5-5">5.5. チュートリアル</a></li>
</ul>
</li>
<li><a href="#sec-6">6. 便利な応用機能</a>
<ul>
<li><a href="#sec-6-1">6.1. ファイル構成</a></li>
<li><a href="#sec-6-2">6.2. ユーザオプションの設定方法</a></li>
<li><a href="#sec-6-3">6.3. カタカナ、英字入力の便法</a></li>
<li><a href="#sec-6-4">6.4. 補完</a></li>
<li><a href="#sec-6-5">6.5. 便利な変換、その他の変換</a></li>
<li><a href="#sec-6-6">6.6. キー設定</a></li>
<li><a href="#sec-6-7">6.7. 変換、確定の前後</a></li>
<li><a href="#sec-6-8">6.8. 送り仮名関連</a></li>
<li><a href="#sec-6-9">6.9. 候補の順序</a></li>
<li><a href="#sec-6-10">6.10. 辞書関連</a></li>
<li><a href="#sec-6-11">6.11. 注釈（アノテーション）</a></li>
<li><a href="#sec-6-12">6.12. 文字コード関連</a></li>
<li><a href="#sec-6-13">6.13. DDSKK 以外のツールを用いた辞書変換</a></li>
<li><a href="#sec-6-14">6.14. 飾りつけ</a></li>
<li><a href="#sec-6-15">6.15. ユーザガイダンス関連</a></li>
<li><a href="#sec-6-16">6.16. I-search 関連</a></li>
<li><a href="#sec-6-17">6.17. VIP/VIPERとの併用</a></li>
<li><a href="#sec-6-18">6.18. picture-modeとの併用</a></li>
</ul>
</li>
<li><a href="#sec-7">7. ローマ字入力以外の入力方式</a>
<ul>
<li><a href="#sec-7-1">7.1. AZIK</a></li>
<li><a href="#sec-7-2">7.2. ACT</a></li>
<li><a href="#sec-7-3">7.3. TUT-code</a></li>
<li><a href="#sec-7-4">7.4. かな入力と親指シフト</a></li>
</ul>
</li>
<li><a href="#sec-8">8. そのほかの拡張機能</a>
<ul>
<li><a href="#sec-8-1">8.1. 交ぜ書き変換</a></li>
</ul>
</li>
<li><a href="#sec-9">9. SKK に関する情報</a>
<ul>
<li><a href="#sec-9-1">9.1. 最新情報</a></li>
<li><a href="#sec-9-2">9.2. SKKメーリングリスト</a></li>
<li><a href="#sec-9-3">9.3. SKK 関連ソフトウェア</a></li>
<li><a href="#sec-9-4">9.4. SKK 辞書について</a></li>
<li><a href="#sec-9-5">9.5. 辞書ツール</a></li>
<li><a href="#sec-9-6">9.6. SKK の作者</a></li>
<li><a href="#sec-9-7">9.7. SKKの歴史</a></li>
<li><a href="#sec-9-8">9.8. このマニュアルについて</a></li>
<li><a href="#sec-9-9">9.9. 謝辞</a></li>
</ul>
</li>
<li><a href="#sec-10">10. よくある質問とその回答 (FAQ)</a>
<ul>
<li><a href="#sec-10-1">10.1. Introduction</a></li>
<li><a href="#sec-10-2">10.2. Installation</a></li>
<li><a href="#sec-10-3">10.3. Customization</a></li>
<li><a href="#sec-10-4">10.4. Dictionaries</a></li>
<li><a href="#sec-10-5">10.5. Miscellaneous</a></li>
</ul>
</li>
<li><a href="#sec-11">11. 事項索引</a></li>
<li><a href="#sec-12">12. 変数索引</a></li>
<li><a href="#sec-13">13. 関数索引</a></li>
<li><a href="#sec-14">14. キー索引</a></li>
</ul>
</div>
</div>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Copying</h2>
<div class="outline-text-2" id="text-1">

<div class="export">
<p>

</p>

</div>

<p>
Copyright  1991-2007 Masahiko Sato（佐藤雅彦）,
Yukiyoshi Kameyama（亀山幸義）, NAKAJIMA Mikio（中島幹夫）,
IRIE Tetsuya（入江）, Kitamoto Tsuyoshi（北本剛）,
Teika Kazura（定家）, Tsukamoto Tetsuo（塚本徹雄）
and Tsuyoshi AKIHO（秋保強）.
Revised by Kiyotaka Sakai（酒井清隆） and Satoshi Harauchi（原内聡）.
</p>

<blockquote>
<p>
Permission is granted to make and distribute verbatim copies of
this manual provided the copyright notice and this permission notice
are preserved on all copies.
</p>

<p>
Permission is granted to copy and distribute modified versions of this
manual under the conditions for verbatim copying, provided that the
entire resulting derived work is distributed under the terms of a
permission notice identical to this one.
</p>

<p>
Permission is granted to copy and distribute translations of this manual
into another language, under the above conditions for modified versions,
except that this permission notice may be stated in a translation
approved by the author.
</p>
</blockquote>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> はじめに</h2>
<div class="outline-text-2" id="text-2">
</div><div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1"><span class="section-number-3">2.1</span> このバージョンの SKK について</h3>
<div class="outline-text-3" id="text-2-1">
<p>
Daredevil SKK （以下、このマニュアルにおいて DDSKK と呼びます。）は、動作
が早くて効率的な日本語入力環境を提供するソフトウェアです。
</p>

<p>
GNU General Public License に基づいて配布されているフリー・ソフトウェアで
す。DDSKK 16.2.50 が動作すると思われる Emacsen のバージョンは、次の
とおりです。
</p>

<ul class="org-ul">
<li>GNU Emacs 23.1 以降
</li>
<li>GNU Emacs 24.1 以降
</li>
<li>GNU Emacs 25.1 以降
</li>
<li>Mule 機能付きでコンパイルされた XEmacs 21.4 の最新版
</li>
<li>Mule 機能付きでコンパイルされた XEmacs 21.5 の最新版
</li>
</ul>

<p>
XEmacs に関しては、XEmacs 本体とは別に配布されているパッケージ群は最新版
が要求されます。少なくとも <code>xemacs-base</code> パッケージが最新であることに加え
て <code>fsf-compat</code> パッケージが必須です。
</p>

<p>
総論として、現在は XEmacs よりも GNU Emacs での動作がよくテストされており、
最近では XEmacs でのテストは充分行われていません。GNU Emacs 23 以上での利
用が最も推奨されます。
</p>

<p>
現時点で Emacs のバージョンごとに少なくとも以下の制限があります。
</p>

<ul class="org-ul">
<li>GNU Emacs 20.x

<p>
DDSKK 14.2 以降は GNU Emacs 20 はサポート対象外です。GNU Emacs 20 のユ
ーザは DDSKK 14.1 をお使いください。
</p>
</li>

<li>GNU Emacs 21.4

<p>
DDSKK 15.1 以降は GNU Emacs 21 はサポート対象外です。GNU Emacs 21 のユ
ーザは DDSKK 14.4 をお使いください。
</p>
</li>

<li>GNU Emacs 22.3

<p>
DDSKK 16.2 以降は GNU Emacs 22 はサポート対象外です。GNU Emacs 22 のユ
ーザは DDSKK 16.1 をお使いください。
</p>
</li>

<li>GNU Emacs 23.3

<ul class="org-ul">
<li>X Window System 上でのメニューバーの日本語表示は GTK 対応版のみです。
</li>
<li>MELPA を利用してインストールするには、先に <code>package.el</code> をインスト
ールする必要があります。
</li>
</ul>
</li>

<li>GNU Emacs 24.3

<p>
GNU Emacs 24.3 と DDSKK 14 の組み合わせで isearch 使用時の不具合が発見
されています。GNU Emacs 24.3 のユーザは DDSKK 15 以降をお使いください。
</p>
<ul class="org-ul">
<li><a href="http://mail.ring.gr.jp/skk/201211/msg00000.html">http://mail.ring.gr.jp/skk/201211/msg00000.html</a>
</li>
<li><a href="http://mail.ring.gr.jp/skk/201212/msg00000.html">http://mail.ring.gr.jp/skk/201212/msg00000.html</a>
</li>
</ul>
</li>

<li>GNU Emacs 24.4

<ul class="org-ul">
<li>coding tag を明示していないファイルは utf-8 と取り扱われます <sup><a id="fnr.1" name="fnr.1" class="footref" href="#fn.1">1</a></sup> 。
DDSKK 15.2 で対策済みです。
</li>
<li>NTEmacs は 24.3 と比べてディレクトリ構成 が異なります <sup><a id="fnr.2" name="fnr.2" class="footref" href="#fn.2">2</a></sup> 。
DDSKK 15.2 で対策済みです。
</li>
</ul>
</li>

<li>GNU Emacs 25.1

<p>
DDSKK 15.2 以降をお使いください（DDSKK 16 を推奨します）。
</p>
</li>

<li>XEmacs 21.4

<ul class="org-ul">
<li><code>skk-kcode.el</code> の機能を含む JIS X 0213 対応が機能しません。
</li>
<li>インライン候補表示は機能しません。
</li>
<li>動的補完における複数候補表示は機能しません。
</li>
<li>ツールティップ表示が機能しません。
</li>
<li>日本語メニュー表示は X リソースによる方法のみテストされています。
</li>
<li>GNU Emacs 標準添付辞書 ja-dic は利用できません。
</li>
</ul>
</li>

<li>XEmacs 21.5 (beta)

<ul class="org-ul">
<li><code>skk-kcode.el</code> の機能を含む JIS X 0213 対応が機能しません。
</li>
<li>インライン候補表示は機能しません。
</li>
<li>動的補完における複数候補表示は機能しません。
</li>
<li>日本語メニュー表示は X リソースによる方法のみテストされています。
</li>
<li>GNU Emacs 標準添付辞書 ja-dic は利用できません。
</li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-2-2" class="outline-3">
<h3 id="sec-2-2"><span class="section-number-3">2.2</span> SKK とはなにか</h3>
<div class="outline-text-3" id="text-2-2">
<p>
SKK は、かな漢字変換プログラムです。
Simple Kana to Kanji conversion program にちなんで名付けられ、その名
は Combinatory Logic での有名な等式 SKK = I に
も由来 <sup><a id="fnr.3" name="fnr.3" class="footref" href="#fn.3">3</a></sup> しています。
</p>

<p>
Daredevil SKK は、SKK の更なる拡張版です <sup><a id="fnr.4" name="fnr.4" class="footref" href="#fn.4">4</a></sup> 。
</p>

<p>
ただし、SKK モード、SKK 辞書、SKK サーバ といった歴史的な用語は引き続き使
用しており、DDSKK と呼ばない場合もあります。また、SKK 方式の入力方法を採
用したプログラムなど、広く SKK family を意味する場合も同様です。
</p>

<p>
DDSKK の主な特徴は、次のとおりです。
</p>

<ul class="org-ul">
<li>多彩な入力方式をサポート。ローマ／かな 両対応のかな入力のほか、AZIK、ACT、
TUT-code の各方式による入力も可能。
</li>
<li>文法的知識を用いない高速な「かな→漢字」変換。
</li>
<li>シームレスかつ再帰的な単語登録モード。
</li>
<li>確定語を個人辞書へ自動登録することによって、変換候補を効率的に表示する。
</li>
<li>マイナーモードとして実装されているので、メジャーモードにほとんど影響を
与えない。つまり、Emacs との親和性が高い。
</li>
<li>DDSKK 本体 (Emacs Lisp) と辞書ファイルのみで動作可能。つまり、辞書サー
バは必須ではなく、辞書サーバがダウンしていても使用できる。
</li>
<li>辞書サーバを使うことで、使用メモリの削減が可能。
</li>
<li>ディスク容量に応じて選べる辞書ファイル。
</li>
<li>辞書ファイルの一括ダウンロード機能。
</li>
<li>Emacs のオリジナル操作と同様に行える日本語インクリメンタル・サーチ。
</li>
<li>Emacs Lisp で書かれたプログラムが返す値を変換候補に挙げることができる。
</li>
<li>入力モードの自動切り替え <code>context-skk.el</code>
</li>
<li>多彩なアノテーション表示
<ul class="org-ul">
<li>ユーザ・アノテーション
</li>
<li>EPWING 辞書
</li>
<li>Apple macOS 辞書
</li>
<li>Wikipedia/Wiktionary
</li>
</ul>
</li>
<li>「見出し語」の動的補完
</li>
<li>総画数変換、部首変換、文字コード入力
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> インストール</h2>
<div class="outline-text-2" id="text-3">
</div><div id="outline-container-sec-3-1" class="outline-3">
<h3 id="sec-3-1"><span class="section-number-3">3.1</span> APEL のインストール</h3>
<div class="outline-text-3" id="text-3-1">
<p>
DDSKK 14.2 からは、GNU Emacs 22 以上を利用する場合においては APEL を別途
インストールする必要がなくなりました。APEL に依存している他の elisp プロ
グラムを使用していなければ、インストール済の APEL は削除することが可能で
す。
</p>

<p>
XEmacs をお使いの場合は、 DDSKK をインストールする前に APEL （APEL 10.8 以
上を推奨）をインストールして下さい。APEL は次のサイトから入手できます。
</p>

<ul class="org-ul">
<li><a href="http://git.chise.org/elisp/apel/">APEL</a>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-3-2" class="outline-3">
<h3 id="sec-3-2"><span class="section-number-3">3.2</span> DDSKK のインストール</h3>
<div class="outline-text-3" id="text-3-2">
<p>
ここでは、UNIX 上で <code>make</code> コマンドが利用できる環境を想定します <sup><a id="fnr.5" name="fnr.5" class="footref" href="#fn.5">5</a></sup> 。
</p>

<p>
まず、DDSKK のアーカイブ <code>ddskk-VERSION.tar.gz</code> を <code>tar</code> コマンドと <code>gzip</code> コ
マンドを使用して展開します。
</p>

<div class="org-src-container">

<pre class="src src-shell-script">% gzip -cd ddskk-VERSION.tar.gz | tar xvf -
</pre>
</div>

<p>
次に、DDSKK のトップディレクトリ <sup><a id="fnr.6" name="fnr.6" class="footref" href="#fn.6">6</a></sup> をカレントディレクトリにしま
す。
</p>

<div class="org-src-container">

<pre class="src src-shell-script">% cd ddskk-VERSION
</pre>
</div>
</div>

<div id="outline-container-sec-3-2-1" class="outline-4">
<h4 id="sec-3-2-1"><span class="section-number-4">3.2.1</span> GNU Emacs へのインストール</h4>
<div class="outline-text-4" id="text-3-2-1">
<p>
まずは、DDSKK がどのディレクトリにインストールされるのか確認するため
に <code>what-where</code> を引数に <code>make</code> コマンドを実行しましょう。
</p>

<pre class="example">
% make what-where
-| emacs -batch -q -no-site-file -l SKK-MK -f SKK-MK-what-where
-| Loading /home/USER/temp/ddskk-VERSION/SKK-CFG...

-| Running in:
-|   GNU Emacs 26.0.50 (build1, x86_64-pc-linux-gnu, GTK+ Version 3.22.15) ...

-| SKK modules:
-|   skk-cursor, skk-viper, ...
-|   -&gt; /path/to/emacs/site-lisp/skk

-| SKK infos:
-|   skk.info
-|   -&gt; /path/to/share/info

-| SKK tutorials:
-|   SKK.tut, SKK.tut.E, NICOLA-SKK.tut, skk.xpm
-|   -&gt; /path/to/share/skk
</pre>

<p>
emacs の実体ファイルを特定することもできます。
</p>

<div class="org-src-container">

<pre class="src src-shell-script">$ make what-where <span style="font-weight: bold; font-style: italic;">EMACS</span>=/Applications/Emacs.app/Contents/MacOS/Emacs
</pre>
</div>

<p>
また、DDSKK のインストール先ディレクトリを変更したい場合は <code>SKK-CFG</code> ファ
イルを編集してください。編集後は必ず <code>make what-where</code> を実行して表示内容
を確認してください。
</p>

<p>
次にスーパーユーザになって、
</p>

<div class="org-src-container">

<pre class="src src-shell-script">$ su
% make install
</pre>
</div>

<p>
と実行すると、実際に DDSKK がインストールされます。
</p>

<p>
あるいは、一般ユーザが自分の home directory を root directory として DDSKK を
インストールするには、
</p>

<div class="org-src-container">

<pre class="src src-shell-script">% make install <span style="font-weight: bold; font-style: italic;">PREFIX</span>=~/
</pre>
</div>

<p>
と、 <code>PREFIX</code> を指定して <code>make</code> を実行します。
</p>

<p>
特定の Emacs を指定する場合は、
</p>

<div class="org-src-container">

<pre class="src src-shell-script">% make install <span style="font-weight: bold; font-style: italic;">EMACS</span>=mule
</pre>
</div>

<p>
と指定します。
</p>
</div>
</div>

<div id="outline-container-sec-3-2-2" class="outline-4">
<h4 id="sec-3-2-2"><span class="section-number-4">3.2.2</span> XEmacs へのインストール</h4>
<div class="outline-text-4" id="text-3-2-2">
<p>
XEmacs でパッケージとしてインストールする場合は、まず <code>what-where-package</code> を
引数に <code>make</code> コマンドを実行してパッケージのインストール先を確認しましょう。
</p>

<pre class="example">
$ make what-where-package XEMACS=/usr/bin/xemacs
-| /usr/bin/xemacs -batch -q -no-site-file -l SKK-MK -f SKK-MK-what-where-package
-|   Loading /home/user/temp/ddskk-SKK-VERSION/SKK-CFG...

-| Running in:
-|   XEmacs 21.5  (beta34) "kale" [Lucid] (x86_64-redhat-linux, Mule) of ...

-| SKK modules:
-|   skk-cursor, skk-viper, ...
-|   -&gt; /usr/share/xemacs/site-packages/lisp/skk

-| SKK infos:
-|   skk.info
-|   -&gt; /usr/share/xemacs/site-packages/info

-| SKK tutorials:
-|   SKK.tut, SKK.tut.E, NICOLA-SKK.tut, skk.xpm
-|   -&gt; /usr/share/xemacs/site-packages/etc/skk
</pre>

<p>
次に、スーパーユーザになって <code>install-package</code> を引数に <code>make</code> を実行す
ると、実際にインストールされます。
</p>

<pre class="example">
$ su
% make install-package XEMACS=/usr/bin/xemacs
-| xemacs -batch -q -no-site-file -l SKK-MK -f SKK-MK-install-package
-|   Loading /home/user/temp/ddskk-VERSION/SKK-CFG ...
</pre>
</div>
</div>

<div id="outline-container-sec-3-2-3" class="outline-4">
<h4 id="sec-3-2-3"><span class="section-number-4">3.2.3</span> 対話的なインストール</h4>
<div class="outline-text-4" id="text-3-2-3">
<p>
DDSKK 14.3 では「対話的インストーラ」が追加されました。
</p>

<p>
まず <code>M-x dired</code> とキー入力して <code>dired</code> を起動してください。このとき、デ
ィレクトリを問われますので、先に述べた「DDSKK のアーカイブを展開したディ
レクトリ」を指定してください。
</p>

<pre class="example">
------ Minibuffer -------
Dired (directory): ~/temp/ddskk-VERSION <SPAN CLASS="KEY">RET</SPAN>
------ Minibuffer -------
</pre>

<p>
次に、表示されたディレクトリ一覧の <code>SKK-MK</code> にカーソルをあわせて <code>L</code> （ア
ルファベットのエルの大文字）を打鍵してください。
</p>

<pre class="example">
------ Dired -------
-rw-r--r-- 1 user user  99999 2011-00-00 00:00 SKK-CFG
-rw-r--r-- 1 user user  99999 2011-00-00 00:00*SKK-MK    "L"
drwxr-xr-x 1 user user  99999 2011-00-00 00:00 bayesian
------ Dired -------
</pre>

<p>
プロンプト <code>Load SKK-MK?</code> には <code>y</code> を打鍵してください。
</p>

<p>
以降、インストーラが表示する質問に答えながら DDSKK のインストールを進めて
ください。なお、パーミッションは一切考慮していませんので、インストール先
は書き込み権限を有するディレクトリを指定してください。
</p>
</div>
</div>

<div id="outline-container-sec-3-2-4" class="outline-4">
<h4 id="sec-3-2-4"><span class="section-number-4">3.2.4</span> MELPA によるインストール</h4>
<div class="outline-text-4" id="text-3-2-4">
<p>
2014年12月、MELPA <sup><a id="fnr.7" name="fnr.7" class="footref" href="#fn.7">7</a></sup> に DDSKK が登録されたことにより、 GNU Emacs で
も <code>package.el</code> <sup><a id="fnr.8" name="fnr.8" class="footref" href="#fn.8">8</a></sup> によるインストールが可能となりました。
</p>

<p>
詳細については、次のドキュメントを参照してください。
</p>

<p>
<a href="https://github.com/skk-dev/ddskk/blob/master/READMEs/INSTALL.MELPA.md">https://github.com/skk-dev/ddskk/blob/master/READMEs/INSTALL.MELPA.md</a>
</p>
</div>
</div>
</div>

<div id="outline-container-sec-3-3" class="outline-3">
<h3 id="sec-3-3"><span class="section-number-3">3.3</span> 辞書について</h3>
<div class="outline-text-3" id="text-3-3">
<p>
DDSKK を使用するには、いわゆる辞書（主にかなと漢字の対応を記述したデータ）
が必要です。
</p>

<p>
DDSKK 14.2 からは、 GNU Emacs 同梱の辞書データ <code>ja-dic</code> を利用したかな漢
字変換に対応しましたので、SKK 辞書ファイルを別途インストールしなくても最
低限の使用ができます（XEmacs では <code>ja-dic</code> は利用できませんので、後述す
る SKK 辞書をインストールする必要があります）。
</p>

<p>
しかし、 <code>ja-dic</code> は、 GNU Emacs の入力メソッド <code>LEIM</code> のために <code>SKK-JISYO.L</code> か
ら変換して生成されたものであり、英数変換や数値変換などのエントリ、および
「大丈夫」など複合語とみなし得る語が大幅に削除されています。
そのため、 <code>SKK-JISYO.L</code> を利用したかな漢字変換と同等の結果は得られません。
</p>

<p>
有志の知恵を結集して作られている各種 SKK 辞書は便利ですから、是非入手して
インストールしましょう。
</p>
</div>
</div>

<div id="outline-container-sec-3-4" class="outline-3">
<h3 id="sec-3-4"><span class="section-number-3">3.4</span> 辞書の入手</h3>
<div class="outline-text-3" id="text-3-4">
<p>
次のサイトには、様々な辞書が用意されています。
</p>

<p>
<a href="http://openlab.jp/skk/wiki/wiki.cgi?page=SKK%C2%BC%C2%AD%C2%BD%C3%B1">SKK 各辞書の解説とダウンロード</a>
</p>

<p>
以下は、その一例です。
</p>

<ul class="org-ul">
<li><code>SKK-JISYO.S</code>

<p>
S 辞書（主に単漢字が登録。最小限必要な語を収録）
</p>
</li>

<li><code>SKK-JISYO.M</code>

<p>
M 辞書（普通に使う分には足りる程度）
</p>
</li>

<li><code>SKK-JISYO.ML</code>

<p>
M 辞書と L 辞書の中間のサイズの辞書。L 辞書収録語の内、EPWING 辞書やオ
ンライン辞書で正しいと判別された語をベースにして加除。
</p>
</li>

<li><code>SKK-JISYO.L</code>

<p>
L 辞書（あらゆる単語を収録）
</p>
</li>

<li><code>zipcode</code>

<p>
郵便番号辞書
</p>
</li>

<li><code>SKK-JISYO.JIS2</code>

<p>
JIS X 0208 で定められている第２水準の文字を、部首の読みを見出し語として
単漢字を収録した辞書
</p>
</li>

<li><code>SKK-JISYO.JIS3_4</code>

<p>
JIS 第３水準、第４水準の文字に代表される、JIS X 0208 には含まれないが
JIS X 0213 には含まれる文字及びそれらを含む語録を収録した辞書
</p>
</li>

<li><code>SKK-JISYO.public+</code>

<p>
public+ 辞書
</p>
</li>

<li><code>SKK-JISYO.edict</code>

<p>
edict 辞書（英和辞書）
</p>
</li>

<li><code>SKK-JISYO.lisp</code>

<p>
候補に Emacs Lisp 関数を含むエントリーを集めた辞書。見出し語を変換する
過程で Emacs Lisp 関数を評価し、その値を候補として表示します。
</p>

<p>
<a href="#sec-6-5-7">プログラム実行変換</a>.
</p>
</li>

<li><code>SKK-JISYO.wrong</code>

<p>
S, M, L 辞書に既に登録されていたが、間違いであったことが判明したため削
除された単語を収録
</p>
</li>
</ul>

<p>
一部の辞書は、著作権が GNU GPL v2 ではありませんのでご注意下さい。詳細は、
次の資料を参照して下さい。
</p>

<p>
<a href="http://openlab.jp/skk/skk/dic/READMEs/committers.txt">http://openlab.jp/skk/skk/dic/READMEs/committers.txt</a>
</p>

<ul class="org-ul">
<li>Key: <code class="symbol">M-x skk-get</code> (skk-get)

<p>
Emacs の使用中に <code>M-x skk-get</code> と実行すると、辞書ファイルを一括ダウンロ
ードすることができます。
</p>
</li>

<li>Function: <code class="symbol">skk-get &amp;optional DIRECTORY</code>

<p>
skk-get を関数として使用することで、ユーザプログラムの中からでも辞書フ
ァイルを一括ダウンロードすることができます。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(skk-get <span style="font-style: italic;">"~/jisyofiles"</span>)
</pre>
</div>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-3-5" class="outline-3">
<h3 id="sec-3-5"><span class="section-number-3">3.5</span> 辞書を DDSKK と同時にインストールする</h3>
<div class="outline-text-3" id="text-3-5">
<p>
DDSKK のソースを展開すると、中に <code>dic</code> というディレクトリが存在します。
<code>SKK-JISYO.L</code> などをこのディレクトリにコピーしてから <code>make install</code> を
実行すると、辞書ファイルがチュートリアル (<code>SKK.tut</code>) と同じディレクト
リ (<code>/usr/share/skk</code> や <code>c:/emacs-24.5/etc/skk</code> など) にインストールされ
ます。具体的なインストール先は <code>make what-where</code> を実行すると表示されます。
</p>

<pre class="example">
-| SKK dictionaries:
-|   SKK-JISYO.lisp, SKK-JISYO.zipcode, SKK-JISYO.office.zipcode, ...
-|   -&gt; c:/emacs-24.5/share/emacs/24.5/etc/skk
</pre>

<p>
<code>dic</code> ディレクトリに辞書ファイルを置くためには <code>make get</code> と実行するのが
簡単です <sup><a id="fnr.9" name="fnr.9" class="footref" href="#fn.9">9</a></sup> 。
</p>
</div>
</div>

<div id="outline-container-sec-3-6" class="outline-3">
<h3 id="sec-3-6"><span class="section-number-3">3.6</span> 辞書サーバの入手</h3>
<div class="outline-text-3" id="text-3-6">
<p>
辞書サーバはオプションです。辞書サーバが無くても DDSKK は動作しますが、特
に辞書のサイズが大きい場合は辞書サーバを利用することで省メモリ効果を得ら
れます。また、辞書サーバによっては複数辞書の検索、EPWING 辞書の検索ができ
たりするものもあります。
</p>

<p>
DDSKK は特定の辞書サーバの実装に依存していませんので、下記の辞書サーバの
いずれでも動作可能です。ソースやバイナリの入手、インストールについてはそ
れぞれのウェブサイトをご参照下さい。
</p>

<ul class="org-ul">
<li><a href="http://openlab.jp/skk/skkserv-ja.html">辞書サーバの説明とリンク</a>
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> はじめの設定</h2>
<div class="outline-text-2" id="text-4">
<p>
標準的にインストールした場合は、特段の設定なしに Emacs を起動するだけ
で DDSKK が使える状態になります。自動的に <code>skk-setup.el</code> というファイルが
読み込まれ、設定されます <sup><a id="fnr.10" name="fnr.10" class="footref" href="#fn.10">10</a></sup> 。この自動設定によらずに手動で設
定したい場合は、以下の説明を参照してください。
</p>
</div>

<div id="outline-container-sec-4-1" class="outline-3">
<h3 id="sec-4-1"><span class="section-number-3">4.1</span> 最も基本的な設定</h3>
<div class="outline-text-3" id="text-4-1">
<p>
自動設定によらず手動で設定する場合は、次の内容を <code>~/.emacs.d/init.el</code> に書きま
す <sup><a id="fnr.11" name="fnr.11" class="footref" href="#fn.11">11</a></sup>。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">skk-autoloads</span>) <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">XEmacs &#12391;&#12497;&#12483;&#12465;&#12540;&#12472;&#12392;&#12375;&#12390;&#12452;&#12531;&#12473;&#12488;&#12540;&#12523;&#12375;&#12383;&#22580;&#21512;&#12399;&#19981;&#35201;</span>
(global-set-key <span style="font-style: italic;">"\C-x\C-j"</span> 'skk-mode)
(global-set-key <span style="font-style: italic;">"\C-xj"</span> 'skk-auto-fill-mode)
(global-set-key <span style="font-style: italic;">"\C-xt"</span> 'skk-tutorial)
</pre>
</div>

<p>
辞書サーバを使わない場合は、辞書ファイルを指定する必要があります。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-large-jisyo <span style="font-style: italic;">"/your/path/to/SKK-JISYO.L"</span>)
</pre>
</div>

<p>
辞書サーバを使わない場合は Emacs のバッファに <code>skk-large-jisyo</code> が指すフ
ァイルを取り込んで使用するためメモリ使用量が増加します。これが支障となる
場合は、上記の <code>SKK-JISYO.L</code> を <code>SKK-JISYO.M</code> 、 <code>SKK-JISYO.ML</code> 又
は <code>SKK-JISYO.S</code> に変更してください。
</p>

<p>
DDSKK 14.1 以降は辞書サーバを経由せずとも CDB 形式 <sup><a id="fnr.12" name="fnr.12" class="footref" href="#fn.12">12</a></sup> の辞書ファイ
ルを直接利用できるようになりました。CDB 形式辞書ファイル <sup><a id="fnr.13" name="fnr.13" class="footref" href="#fn.13">13</a></sup> を利
用する場合は、以下のように指定してください。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-cdb-large-jisyo <span style="font-style: italic;">"/your/path/to/SKK-JISYO.L.cdb"</span>)
</pre>
</div>

<p>
変数 <code>skk-large-jisyo</code> と 変数 <code>skk-cdb-large-jisyo</code> を同時に指定した場合
は、標準では CDB 形式辞書ファイルの方が先に検索 <sup><a id="fnr.14" name="fnr.14" class="footref" href="#fn.14">14</a></sup> されます。
</p>
</div>
</div>

<div id="outline-container-sec-4-2" class="outline-3">
<h3 id="sec-4-2"><span class="section-number-3">4.2</span> インクリメント検索の設定</h3>
<div class="outline-text-3" id="text-4-2">
<p>
基本的な設定は <code>skk-setup.el</code> が読み込まれた時点で完了しています <sup><a id="fnr.15" name="fnr.15" class="footref" href="#fn.15">15</a></sup>。
</p>

<ul class="org-ul">
<li>User Option: <code class="symbol">skk-isearch-mode-enable</code>

<p>
この変数は <code>~/.emacs.d/init.el</code> か <code>M-x customize-variable</code> で設定して
ください。 <code>Non-nil</code> であれば、SKK が ON になっているバッファで skk-isearch を
有効にします。標準設定は <code>t</code> です。 <code>nil</code> に設定すると skk-isearch を
無効にすることができます。シンボル <code>always</code> に設定すると、SKK が ON に
なっていないバッファでも skk-isearch を有効にします。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-4-3" class="outline-3">
<h3 id="sec-4-3"><span class="section-number-3">4.3</span> 辞書サーバを使いたいときの設定</h3>
<div class="outline-text-3" id="text-4-3">
<p>
辞書サーバを使いたいときは、 <code>~/.skk</code> で以下のように設定します。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-server-host <span style="font-style: italic;">"example.org"</span>)
(<span style="font-weight: bold;">setq</span> skk-server-portnum 1178)
</pre>
</div>

<ul class="org-ul">
<li>Variable: <code class="symbol">skk-server-host</code>

<p>
辞書サーバが起動しているホスト名又は IP アドレス。
</p>
</li>

<li>Variable: <code class="symbol">skk-server-portnum</code>

<p>
辞書サーバが使うポート番号。 <code>/etc/services</code> に <code>skkserv</code> のエントリが
記述されていれば、この変数を指定する必要は無い。
</p>
</li>

<li>User Option: <code class="symbol">skk-server-inhibit-startup-server</code>

<p>
この変数が <code>nil</code> であれば、辞書サーバが起動していなかったときに Emacs か
ら <code>skkserv</code> プロセスを起動することができます。
</p>

<p>
Emacs から立ち上げて利用する事ができる辞書サーバは、
</p>

<pre class="example">
skkserv [-p port] [jisyo]
</pre>

<p>
のようなオプションを受け付け、 <code>inetd</code> などを経由せず直接起動するものに
限られます。辞書サーバプログラムと辞書ファイルは、次のように設定します。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-server-prog <span style="font-style: italic;">"/your/path/to/skkserv"</span>)
(<span style="font-weight: bold;">setq</span> skk-server-jisyo <span style="font-style: italic;">"/your/path/to/SKK-JISYO.L"</span>)
</pre>
</div>
</li>

<li>Variable: <code class="symbol">skk-server-prog</code>

<p>
辞書サーバプログラムをフルパスで指定する。
</p>
</li>

<li>Variable: <code class="symbol">skk-server-jisyo</code>

<p>
辞書サーバに渡す辞書をフルパスで指定する。辞書サーバによっては独自の方
法で辞書ファイルを指定して emacs からの指定を無視するものもあります。
詳しくは各辞書サーバの説明書を読んで下さい。
</p>
</li>
</ul>

<p>
これらの設定は、環境変数を利用して下記のようにすることもできます。
</p>

<ul class="org-ul">
<li>B シェルの場合（sh, bash, ksh, zsh など）

<div class="org-src-container">

<pre class="src src-shell-script"><span style="font-weight: bold;">export</span> <span style="font-weight: bold; font-style: italic;">SKKSERVER</span>=example.org
<span style="font-weight: bold;">export</span> <span style="font-weight: bold; font-style: italic;">SKKSERV</span>=/your/path/to/skkserv
<span style="font-weight: bold;">export</span> <span style="font-weight: bold; font-style: italic;">SKK_JISYO</span>=/your/path/to/SKK-JISYO.L
</pre>
</div>
</li>

<li>C シェルの場合（csh, tcsh など）

<div class="org-src-container">

<pre class="src src-shell-script">setenv SKKSERVER example.org
setenv SKKSERV /your/path/to/skkserv
setenv SKK_JISYO /your/path/to/SKK-JISYO.L
</pre>
</div>
</li>
</ul>

<p>
関連項目:
</p>

<ul class="org-ul">
<li><a href="#sec-3-6">辞書サーバの入手</a>.
</li>

<li><a href="#sec-6-10-5">サーバ関連</a>.
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-4-4" class="outline-3">
<h3 id="sec-4-4"><span class="section-number-3">4.4</span> DDSKK を Emacs の Input Method とする</h3>
<div class="outline-text-3" id="text-4-4">
<p>
Emacs の標準キーバインドでは <code>C-\</code> を打鍵すると、関数 <code>toggle-input-method</code> を
実行します。この関数は、変数 <code>default-input-method</code> が指す input method を
トグル切り替えします。
</p>

<p>
変数 <code>default-input-method</code> の値はおそらく "<code>Japanese</code>" であり、結果として <code>C-\</code> の
打鍵で LEIM (Library of Emacs Input Method) を on / off します。
</p>

<p>
使用可能な input method は <code>M-x list-input-methods</code> で確認することができ、
コマンド <code>M-x set-input-method</code> 又は <code>C-x <SPAN CLASS="KEY">RET</SPAN> C-\</code> を実行することで input method を
切り替えることができます。
</p>

<p>
ファイル <code>skk-leim.el</code> から生成されるファイル <code>skk-autoloads.el</code> で input method を
ふたつ追加しています。
</p>

<ol class="org-ol">
<li>"<code>japanese-skk</code>" &#x2026; 内容は <code>(skk-mode 1)</code> です。
</li>
<li>"<code>japanese-skk-auto-fill</code>" &#x2026; 内容は <code>(skk-auto-fill-mode 1)</code> です。
</li>
</ol>

<ul class="org-ul">
<li>User Option: <code class="symbol">default-input-method</code>

<p>
Emacs 起動時の input method を DDSKK とするには、 <code>~/.emacs.d/init.el</code> に
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> default-input-method <span style="font-style: italic;">"japanese-skk"</span>)
</pre>
</div>

<p>
と記述してください。
</p>
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5"><span class="section-number-2">5</span> 基本的な使い方</h2>
<div class="outline-text-2" id="text-5">
<p>
本章では、DDSKK の基本的な使用方法を説明します。これを読めば、とりあえず
DDSKK を使ってみるには充分です。
</p>

<p>
DDSKK を使った入力方法に慣れるには、付属のチュートリアル <sup><a id="fnr.16" name="fnr.16" class="footref" href="#fn.16">16</a></sup> が
最適なので、お試しください。
</p>

<p>
なお、次章の「便利な応用機能」 <sup><a id="fnr.17" name="fnr.17" class="footref" href="#fn.17">17</a></sup> は、興味のある個所のみをピックア
ップしてお読みになるのがいいでしょう。
</p>
</div>

<div id="outline-container-sec-5-1" class="outline-3">
<h3 id="sec-5-1"><span class="section-number-3">5.1</span> 起動と終了</h3>
<div class="outline-text-3" id="text-5-1">
<p>
SKK モードに入るには <code>C-x C-j</code> もしくは <code>C-x j</code> とキー入力します。モード
ラインの左端には、下記のように "<code>--かな:</code>" が追加されます <sup><a id="fnr.18" name="fnr.18" class="footref" href="#fn.18">18</a></sup> 。
また、カーソルの色が変化 <sup><a id="fnr.19" name="fnr.19" class="footref" href="#fn.19">19</a></sup> します。
</p>

<pre class="example">
--かな:MULE/7bit----- Buffer-name (Major-mode)---
</pre>

<p>
再び <code>C-x C-j</code> もしくは <code>C-x j</code> をキー入力することで、SKK モードに入る前
のモードに戻り <sup><a id="fnr.20" name="fnr.20" class="footref" href="#fn.20">20</a></sup> 、カーソル色も元に戻ります。
</p>

<ul class="org-ul">
<li>User Option: <code class="symbol">skk-status-indicator</code>

<p>
標準設定はシンボル <code>left</code> です。この変数をシンボル <code>minor-mode</code> と設
定すれば、インジケータはモードラインのマイナーモードの位置に表示されま
す。
</p>
</li>

<li>User Option: <code class="symbol">skk-preload</code>

<p>
<code>~/.emacs.d/init.el</code> にて変数 <code>skk-preload</code> を <code>non-nil</code> と設定すること
により、DDSKK の初回起動を速くすることができます。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-preload t)
</pre>
</div>

<p>
これは、SKK 本体プログラムの読み込みと、変数 <code>skk-search-prog-list</code> に
指定された辞書の読み込みを Emacs の起動時に済ませてしまうことにより実現
しています。そのため、Emacs の起動そのものは遅くなりますが、DDSKK を使
い始めるときのレスポンスが軽快になります。
</p>
</li>

<li>Key: <code class="symbol">M-x skk-restart</code> (skk-restart)

<p>
<code>M-x skk-restart</code> と実行すると SKK を再起動します。 <code>~/.skk</code> は再ロード
しますが、 <code>~/.emacs.d/init.el</code> は再ロードしません。
</p>
</li>

<li>Key: <code class="symbol">M-x skk-version</code> (skk-version)

<p>
<code>M-x skk-version</code> と実行するとエコーエリアに SKK のバージョンを表示 <sup><a id="fnr.21" name="fnr.21" class="footref" href="#fn.21">21</a></sup> しま
す。
</p>

<pre class="example">
-------------------- Echo Area --------------------
Daredevil SKK/16.2.50 (CODENAME)
-------------------- Echo Area --------------------
</pre>
</li>
</ul>
</div>

<div id="outline-container-sec-5-1-1" class="outline-4">
<h4 id="sec-5-1-1"><span class="section-number-4">5.1.1</span> SKK オートフィルモード</h4>
<div class="outline-text-4" id="text-5-1-1">
<p>
<code>C-x j</code> とキー入力すれば、SKK モードに入ると同時にオートフィルモード <sup><a id="fnr.22" name="fnr.22" class="footref" href="#fn.22">22</a></sup> を
オンにします。
</p>

<p>
既にオートフィルモードがオンになっているバッファで <code>C-x j</code> をキー入力する
と、オートフィルモードは逆にオフになるので注意してください。
</p>

<p>
バッファの状態にかかわらず強制的にオートフィルモード付で SKK モードに入り
たい場合は <code>M-1 C-x j</code> や <code>C-u C-x j</code> などとキー入力し、このコマンドに正
の引数 <sup><a id="fnr.23" name="fnr.23" class="footref" href="#fn.23">23</a></sup> を渡します。
</p>

<p>
オートフィルモードをオフにし、かつ SKK モードも終了したい場合には
<code>M-- C-x j</code> や <code>C-u -1 C-x j</code> などとキー入力し、このコマンドに負の引数を
渡します。
</p>
</div>
</div>

<div id="outline-container-sec-5-1-2" class="outline-4">
<h4 id="sec-5-1-2"><span class="section-number-4">5.1.2</span> 辞書の保存</h4>
<div class="outline-text-4" id="text-5-1-2">
<p>
Emacs を終了するときは、保存前の個人辞書を <code>~/.skk-jisyo.BAK</code> に退避して
から、個人辞書 <sup><a id="fnr.24" name="fnr.24" class="footref" href="#fn.24">24</a></sup> の内容を <code>~/.skk-jisyo</code> に保存 <sup><a id="fnr.25" name="fnr.25" class="footref" href="#fn.25">25</a></sup> し
ます。
</p>

<p>
<code>~/.skk-jisyo</code> や <code>~/.skk-jisyo.BAK</code> のファイル名を変更したければ、それぞ
れ <code>skk-jisyo</code> や <code>skk-backup-jisyo</code> の値を変更して下さい。
</p>

<ul class="org-ul">
<li>Key: <code class="symbol">M-x skk-kill-emacs-without-saving-jisyo</code> (skk-kill-emacs-without-saving-jisyo)

<p>
個人辞書を保存せずに Emacs を終了させたい場合には、このコマンドをキー入
力します。
</p>
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-5-2" class="outline-3">
<h3 id="sec-5-2"><span class="section-number-3">5.2</span> 入力モード</h3>
<div class="outline-text-3" id="text-5-2">
<p>
SKK モードは、文字種類による４種類の <b>入力モード</b> <sup><a id="fnr.26" name="fnr.26" class="footref" href="#fn.26">26</a></sup> と、辞書を
用いた変換の状態により３つの <b>変換モード</b> を持ちます。
</p>
</div>

<div id="outline-container-sec-5-2-1" class="outline-4">
<h4 id="sec-5-2-1"><span class="section-number-4">5.2.1</span> 入力モードの説明</h4>
<div class="outline-text-4" id="text-5-2-1">
<ul class="org-ul">
<li>かなモード

<ul class="org-ul">
<li>アスキー小文字をひらがなに変換するモード。
</li>

<li>マイナーモードの表示: <b>かな</b>
</li>

<li>カーソル色: 赤系
</li>
</ul>
</li>

<li>カナモード

<ul class="org-ul">
<li>アスキー小文字をカタカナに変換するモード
</li>

<li>マイナーモードの表示: <b>カナ</b>
</li>

<li>カーソル色: 緑系
</li>
</ul>
</li>

<li>全英モード

<ul class="org-ul">
<li>アスキー小文字／大文字を全角アルファベット <sup><a id="fnr.27" name="fnr.27" class="footref" href="#fn.27">27</a></sup> に変換する
モード。
</li>

<li>マイナーモードの表示: <b>全英</b>
</li>

<li>カーソル色: 黄系
</li>
</ul>
</li>

<li>アスキーモード

<ul class="org-ul">
<li>文字を変換しないモード。入力されたキーは <code>C-j</code> を除いて通常の Emacs の
コマンドとして解釈される。
</li>

<li>マイナーモードの表示: <b>SKK</b>
</li>

<li>カーソル色: 背景によりアイボリーかグレイ。
</li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-5-2-2" class="outline-4">
<h4 id="sec-5-2-2"><span class="section-number-4">5.2.2</span> 入力モードを切り替えるキー</h4>
<div class="outline-text-4" id="text-5-2-2">
<ul class="org-ul">
<li>Key: <code class="symbol">q</code> (skk-toggle-kana)

<p>
「かなモード」、「カナモード」間をトグルする。
</p>
</li>

<li>Key: <code class="symbol">l</code> (skk-latin-mode)

<p>
「かなモード」又は「カナモード」から「アスキーモード」へ。
</p>
</li>

<li>Key: <code class="symbol">L</code> (skk-jisx0208-latin-mode)

<p>
「かなモード」又は「カナモード」から「全英モード」へ。
</p>
</li>

<li>Key: <code class="symbol">C-j</code> (skk-kakutei)

<p>
「アスキーモード」又は「全英モード」から「かなモード」へ。
</p>
</li>
</ul>

<p>
実際にはカナモードや全英モードで長時間入力を続けることはほとんどないの
で、かなモードのままでカナ文字や全英文字を入力する便法が用意されています。
</p>

<ul class="org-ul">
<li><a href="#sec-6-3-1">かなモードからカタカナを入力</a>.
</li>

<li><a href="#sec-6-3-2">全英文字の入力</a>.
</li>

<li>User Option: <code class="symbol">skk-show-mode-show</code>

<p>
現在の入力モードは、モードラインに表示されています。この変数を <code>Non-nil</code> と
すると、入力モードを切り替えたときにカーソル付近にも一瞬表示するように
なります。
</p>
</li>

<li>Key: <code class="symbol">M-x skk-show-mode</code> (skk-show-mode)

<p>
<code>skk-show-mode-show</code> の値をトグル切り替えします。  
</p>
</li>

<li>User Option: <code class="symbol">skk-show-mode-style</code>

<p>
標準設定は、シンボル <code>inline</code> です。シンボル <code>tooltip</code> を指定すること
も可能です。
</p>
</li>

<li>User Option: <code class="symbol">skk-show-mode-inline-face</code>

<p>
<code>inline</code> 利用時の face
</p>
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-5-3" class="outline-3">
<h3 id="sec-5-3"><span class="section-number-3">5.3</span> 変換モード</h3>
<div class="outline-text-3" id="text-5-3">
<p>
変換モードは、次の３種類のいずれかです。
</p>

<ul class="org-ul">
<li>■モード（確定入力モード）

<p>
あるキー入力に対応する文字列を、辞書を用いた文字変換を行わずに直接バッ
ファへ入力するモード。入力モードに応じてローマ字からひらがなへ、ローマ
字からカタカナへ、あるいはアスキー文字から全角アルファベットへ文字を変
換する。
</p>
</li>

<li>▽モード

<p>
辞書変換の対象となる文字列 <b>見出し語</b> を入力するモード。
</p>
</li>

<li>▼モード

<p>
見出し語について、辞書変換を行うモード。
</p>
</li>
</ul>

<p>
また、▽モードの変種として <b>SKK abbrev モード</b> があり、▼モードのサブモード
として <b>辞書登録モード</b> があります。
</p>
</div>

<div id="outline-container-sec-5-3-1" class="outline-4">
<h4 id="sec-5-3-1"><span class="section-number-4">5.3.1</span> ■モード</h4>
<div class="outline-text-4" id="text-5-3-1">
<p>
確定入力モードを <b>■モード</b> と呼びます。■モードでは、あるキー入力に対応
した特定の文字列への変換を行うだけで、辞書変換は行いません。アスキー文字
列から、入力モードに応じて、ひらがな、カタカナ、あるいは全角アルファベッ
トへ文字を変換します。カレントバッファにこのモード特有のマークは表示され
ません。
</p>

<p>
かなモード、カナモードで、かつ ■モードである場合、標準設定の入力方法は
いわゆるローマ字入力です。訓令式、ヘボン式のどちらによっても入力すること
ができます。主な注意点は以下のとおりです。
</p>

<ul class="org-ul">
<li>「ん」 は <code>n n</code> 又は <code>n '</code> で入力する。直後に <code>n</code> 及び <code>y</code> 以外の子音が
続くときは <code>n</code> だけで入力できる。
</li>

<li>促音は <code>c h o t t o</code> ⇒ 「ちょっと」 や <code>m o p p a r a</code> ⇒ 「もっぱら」
のように次の子音を重ねて入力する。
</li>

<li>促音や拗音（ひらがなの小文字）を単独で入力するときは <code>x a</code> ⇒ 「ぁ」
や <code>x y a</code> ⇒ 「ゃ」 などのように <code>x</code> を用いる。
</li>

<li>長音（ー）は <code>-</code> で入力する。
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-5-3-2" class="outline-4">
<h4 id="sec-5-3-2"><span class="section-number-4">5.3.2</span> ▽モード</h4>
<div class="outline-text-4" id="text-5-3-2">
<p>
<b>▽モード</b> では、辞書変換の対象となる文字列を入力します。かなモードもしく
はカナモードで <sup><a id="fnr.28" name="fnr.28" class="footref" href="#fn.28">28</a></sup> 、かつ■モードであるときに、キー入力を <b>大文字で開始</b> する
ことで▽モードに入ります。
</p>

<pre class="example">
K a n j i

  ------ Buffer: foo ------
  ▽かんじ*
  ------ Buffer: foo ------
</pre>

<p>
<code>K a n j i</code> のように打鍵することで▽モードに入り、続けて辞書変換の対象と
なる文字列「見出し語」を入力します。▽マークは「▽モードである」という表
示ですが、見出し語の開始点を示す表示でもあります。
</p>
</div>

<div id="outline-container-sec-5-3-2-1" class="outline-5">
<h5 id="sec-5-3-2-1"><span class="section-number-5">5.3.2.1</span> 後から▽モードに入る方法</h5>
<div class="outline-text-5" id="text-5-3-2-1">

<p>
辞書変換の対象としたい文字列であったにも関わらず、先頭の文字を大文字で入
力し忘れた場合は、その位置までポイント <sup><a id="fnr.29" name="fnr.29" class="footref" href="#fn.29">29</a></sup> を戻してから <code>Q</code> を打鍵
することで、▽モードに入ることができます。
</p>

<pre class="example">
k a n j i

  ------ Buffer: foo ------
  かんじ*
  ------ Buffer: foo ------

C-u 3 C-b

  ------ Buffer: foo ------
  *かんじ
  ------ Buffer: foo ------

Q

  ------ Buffer: foo ------
  ▽*かんじ
  ------ Buffer: foo ------

C-e

  ------ Buffer: foo ------
  ▽かんじ*
  ------ Buffer: foo ------
</pre>

<p>
「7がつ24にち」のように大文字から始めることができない文字列を見出し語とし
たい場合は <code>Q</code> を打鍵して▽モードにしてから「7がつ24にち」の文字列を入力
します。
</p>

<p>
なお、▽モードでは、文字列の間に空白を含めることはできません。これは、辞
書エントリの見出し語に空白を含めることができない制限からきています。
</p>
</div>
</div>

<div id="outline-container-sec-5-3-2-2" class="outline-5">
<h5 id="sec-5-3-2-2"><span class="section-number-5">5.3.2.2</span> ▽モードを抜ける方法</h5>
<div class="outline-text-5" id="text-5-3-2-2">

<p>
誤って▽モードに入ってしまったときは <code>C-j</code> と打鍵して■モードに戻るか、
<code>C-g</code> と打鍵して見出し語を消去するか、どちらかの方法があります。
</p>

<pre class="example">
K a n j i

  ------ Buffer: foo ------
  ▽かんじ*
  ------ Buffer: foo ------

C-j

  ------ Buffer: foo ------
  かんじ*
  ------ Buffer: foo ------
</pre>

<p>
あるいは、
</p>

<pre class="example">
K a n j i

  ------ Buffer: foo ------
  ▽かんじ*
  ------ Buffer: foo ------

C-g

  ------ Buffer: foo ------
  *
  ------ Buffer: foo ------
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-5-3-3" class="outline-4">
<h4 id="sec-5-3-3"><span class="section-number-4">5.3.3</span> ▼モード</h4>
<div class="outline-text-4" id="text-5-3-3">
<p>
<b>▼モード</b> では、▽モードで入力した見出し語を、辞書に従って変換する作業を
行います。▽モードで見出し語を入力した後に <code class="key">SPC</code> を打鍵することで▼モード
に入ります。▽マークから <code class="key">SPC</code> を打鍵したときのポイントまでの文字列が見出
し語として確定され、 ▽マークは▼マークで置き換えられ、この見出し語が辞書
の中で検索されます。
</p>
</div>

<div id="outline-container-sec-5-3-3-1" class="outline-5">
<h5 id="sec-5-3-3-1"><span class="section-number-5">5.3.3.1</span> 送り仮名が無い場合</h5>
<div class="outline-text-5" id="text-5-3-3-1">

<p>
仮に、辞書に
</p>

<pre class="example">
かんじ /漢字/幹事/
</pre>

<p>
というエントリ <sup><a id="fnr.30" name="fnr.30" class="footref" href="#fn.30">30</a></sup> を含むとして、例を示します。
</p>

<pre class="example">
K a n j i

  ------ Buffer: foo ------
  ▽かんじ*
  ------ Buffer: foo ------

<SPAN CLASS="KEY">SPC</SPAN>

  ------ Buffer: foo ------
  ▼漢字*
  ------ Buffer: foo ------
</pre>

<p>
この例では、▽モードにおける▽マークからポイントまでの間の文字列「かんじ」
を辞書変換の対象文字列として確定し、それについて辞書内での検索を行ってい
ます。実際の変換動作では、候補部分がハイライト <sup><a id="fnr.31" name="fnr.31" class="footref" href="#fn.31">31</a></sup> 表示されま
す。
</p>

<p>
「漢字」が求める語であれば <code>C-j</code> を打鍵してこの変換を確定します。ハイライ
ト表示も▼マークも消えます。
</p>

<p>
また、 <code>C-j</code> を打鍵せずに新たな確定入力を続けるか又は新たな変換を開始する
と、直前の変換は自動的に確定されます。これを <b>暗黙の確定</b> <sup><a id="fnr.32" name="fnr.32" class="footref" href="#fn.32">32</a></sup> と呼んでいます。
打鍵することによる副作用として暗黙の確定を伴うキーは、印字可能な文字全て
と <code class="key">RET</code> です。
</p>
</div>
</div>

<div id="outline-container-sec-5-3-3-2" class="outline-5">
<h5 id="sec-5-3-3-2"><span class="section-number-5">5.3.3.2</span> 次候補・前候補</h5>
<div class="outline-text-5" id="text-5-3-3-2">

<p>
求める語がすぐに表示されなければ、更に続けて <code class="key">SPC</code> を打鍵することで次候補
を検索します。
</p>

<pre class="example">
  ------ Buffer: foo ------
  ▼漢字*
  ------ Buffer: foo ------

<SPAN CLASS="KEY">SPC</SPAN>

  ------ Buffer: foo ------
  ▼幹事*
  ------ Buffer: foo ------
</pre>

<p>
候補が５つ以上あるときは、５番目以降の候補は７つずつ <sup><a id="fnr.33" name="fnr.33" class="footref" href="#fn.33">33</a></sup> まとめて
エコーエリアに表示されます。
</p>

<p>
例えば、辞書が
</p>

<pre class="example">
きょ /距/巨/居/裾/嘘/拒/拠/虚/挙/許/渠/据/去/
</pre>

<p>
というエントリを含むときに <code>K y o</code> の後に <code class="key">SPC</code> を５回 <sup><a id="fnr.34" name="fnr.34" class="footref" href="#fn.34">34</a></sup> 続けて
打鍵すれば
</p>

<pre class="example">
-------------------- Echo Area --------------------
A:嘘  S:拒  D:拠  F:虚  J:挙  K:許  L:渠  [残り 2]
-------------------- Echo Area --------------------
</pre>

<p>
がエコーエリア <sup><a id="fnr.35" name="fnr.35" class="footref" href="#fn.35">35</a></sup> に表示されます。ここで仮に「許」を選択したけ
れば <code>k</code> を打鍵します。
</p>

<p>
<code>A</code> , <code>S</code> , <code>D</code> , <code>F</code> , <code>J</code> , <code>K</code> , <code>L</code> の各文字は、押し易さを考慮してキ
ーボードのホームポジションから横方向に一直線に配置されているキーが選ばれ
ています。また、候補の選択のために押すキー <sup><a id="fnr.36" name="fnr.36" class="footref" href="#fn.36">36</a></sup> は、大文字、小文字
のいずれでも構いません。
</p>

<p>
<code class="key">SPC</code> を連打してしまって求める候補を誤って通過してしまったときは <code>x</code> を打
鍵 <sup><a id="fnr.37" name="fnr.37" class="footref" href="#fn.37">37</a></sup> すれば前候補／前候補群に戻ることができます。
</p>

<p>
次々と候補を探しても求める語がなければ、自動的に辞書登録モード <sup><a id="fnr.38" name="fnr.38" class="footref" href="#fn.38">38</a></sup> に
なります（辞書登録モードは▼モードのサブモードです）。
</p>

<ul class="org-ul">
<li>Variable: <code class="symbol">skk-previous-candidate-keys</code>

<p>
前候補／前候補群に戻る関数 <code>skk-previous-candidate</code> を割り当てるオブジ
ェクトのリストを指定する。オブジェクトにはキーを表す文字列または
event vector が指定できます。
</p>

<p>
標準設定は <code>(list "x" "\C-p")</code> です。
</p>
</li>

<li>Variable: <code class="symbol">skk-search-excluding-word-pattern-function</code>

<p>
詳しくは docstring を参照のこと。
</p>
</li>

<li>Variable: <code class="symbol">skk-show-candidates-nth-henkan-char</code>

<p>
候補一覧を表示する関数 <code>skk-henkan-show-candidates</code> を呼び出すまで
の <code>skk-start-henkan-char</code> を打鍵する回数。２以上の整数である必要。
</p>
</li>

<li>Variable: <code class="symbol">skk-henkan-number-to-display-candidates</code>

<p>
いちどに表示する候補の数。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-5-3-3-3" class="outline-5">
<h5 id="sec-5-3-3-3"><span class="section-number-5">5.3.3.3</span> 送り仮名が有る場合</h5>
<div class="outline-text-5" id="text-5-3-3-3">

<p>
次に送り仮名のある単語について説明します。
</p>

<p>
「動く」を変換により求めたいときは <code>U g o K u</code> のように、まず、▽モードに
入るために <code>U</code> を大文字で入力し、次に、送り仮名の開始を DDSKK に教えるた
めに <code>K</code> を大文字で入力します。送り仮名の <code>K</code> を打鍵した時点で▼モードに
入り辞書変換が行われます（ <code class="key">SPC</code> 打鍵は不要）。
</p>

<p>
送り仮名の入力時（ローマ字プレフィックスが挿入された瞬間）にプレフィック
スの直前に一瞬だけ <code>*</code> が表示されることで送り仮名の開始時点を明示します。
プレフィックスに続くキー入力で、かな文字が完成した時点で <code>*</code> は消えます。
</p>

<p>
キー入力を分解して追いながらもう少し詳しく説明します。
</p>

<pre class="example">
U g o

  ------ Buffer: foo ------
  ▽うご*
  ------ Buffer: foo ------

K

  ------ Buffer: foo ------
  ▽うご*k
  ------ Buffer: foo ------

u

  ------ Buffer: foo ------
  ▼動く*
  ------ Buffer: foo ------
</pre>

<p>
このように、DDSKK では送り仮名の開始地点をユーザが明示的に入力 <sup><a id="fnr.39" name="fnr.39" class="footref" href="#fn.39">39</a></sup> す
るので、システム側で送り仮名を分解する必要がありません。これにより、高速
でヒット効率が高い変換が可能になります。
</p>

<p>
ただし、サ変動詞の変換 <sup><a id="fnr.40" name="fnr.40" class="footref" href="#fn.40">40</a></sup> では、サ変動詞の語幹となる名詞
を <b>送りなし変換</b> <sup><a id="fnr.41" name="fnr.41" class="footref" href="#fn.41">41</a></sup> として変換し、その後「する」を■モードで
入力した方が効率が良くなります。
</p>
</div>
</div>
</div>

<div id="outline-container-sec-5-3-4" class="outline-4">
<h4 id="sec-5-3-4"><span class="section-number-4">5.3.4</span> 辞書登録モード</h4>
<div class="outline-text-4" id="text-5-3-4">
<p>
DDSKK には独立した辞書登録モードはありません。その代わり、辞書にない単語
に関して変換を行った場合に、自動的に <b>辞書登録モード</b> に入ります。例えば
辞書に
</p>

<pre class="example">
へんかんちゅう /変換中/
</pre>

<p>
のエントリがない場合に「変換中」を入力しようとして <code>H e n k a n t y u u <SPAN CLASS="KEY">SPC</SPAN></code> と
キー入力すると、下記のように、カレントバッファは▼モードのまま「へんかん
ちゅう」に対して変換ができない状態で休止し、同時にミニバッファに「へんか
んちゅう」というプロンプトが表示されます。
</p>

<pre class="example">
------ Buffer: foo ------
▼へんかんちゅう
------ Buffer: foo ------
</pre>

<pre class="example">
------ Minibuffer -------
[辞書登録] へんかんちゅう: *
------ Minibuffer -------
</pre>

<p>
もちろん、誤って登録した単語は削除できます。
</p>

<ul class="org-ul">
<li><a href="#sec-6-10-9">誤った登録の削除</a>.
</li>

<li><a href="#sec-6-10-10">個人辞書ファイルの編集</a>.
</li>

<li>Variable: <code class="symbol">skk-read-from-minibuffer-function</code>

<p>
この変数に「文字列を返す関数」を収めると、その文字列を辞書登録モードに
入ったときのプロンプトに初期表示します。関数 <code>read-from-minibuffer</code> の
引数 <code>INITIAL-CONTENTS</code> に相当します。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-read-from-minibuffer-function
      (<span style="font-weight: bold;">lambda</span> () skk-henkan-key))
</pre>
</div>
</li>

<li>Variable: <code class="symbol">skk-jisyo-registration-badge-face</code>

<p>
変数 <code>skk-show-inline</code> が <code>non-nil</code> であれば、辞書登録モードに移ったこ
とを明示するためにカレントバッファに「↓辞書登録中↓」とインライン表示
します。この「↓辞書登録中↓」に適用するフェイスです。
</p>
</li>
</ul>
</div>

<div id="outline-container-sec-5-3-4-1" class="outline-5">
<h5 id="sec-5-3-4-1"><span class="section-number-5">5.3.4.1</span> 送り仮名が無い場合の辞書登録</h5>
<div class="outline-text-5" id="text-5-3-4-1">

<p>
辞書登録モードでは、キー入力はミニバッファに対して行われます。仮に辞書に
</p>

<pre class="example">
へんかん /変換/
ちゅう /中/
</pre>

<p>
のようなエントリがあるとして、ミニバッファで「変換中」の文字列を「変換」
と「中」とに分けて作ります。
</p>

<pre class="example">
H e n k a n <SPAN CLASS="KEY">SPC</SPAN> T y u u <SPAN CLASS="KEY">SPC</SPAN>

  ----------- Minibuffer ------------
  [辞書登録] へんかんちゅう: 変換▼中*
  ----------- Minibuffer ------------
</pre>

<p>
ここで <code class="key">RET</code> を打鍵すれば「変換中」が個人辞書に登録され <sup><a id="fnr.42" name="fnr.42" class="footref" href="#fn.42">42</a></sup> 、
辞書登録モードは終了します <sup><a id="fnr.43" name="fnr.43" class="footref" href="#fn.43">43</a></sup> 。同時に、変換を行っているカレン
トバッファには「変換中」が挿入され確定されます。
</p>

<p>
辞書登録モードを抜けたいときは <code>C-g</code> を打鍵するか、または何も登録せず <code class="key">RET</code> を
打鍵すると▽モードに戻ります。
</p>
</div>
</div>

<div id="outline-container-sec-5-3-4-2" class="outline-5">
<h5 id="sec-5-3-4-2"><span class="section-number-5">5.3.4.2</span> 送り仮名が有る場合の辞書登録</h5>
<div class="outline-text-5" id="text-5-3-4-2">

<p>
送り仮名のある単語の登録では、ミニバッファで作る候補に送り仮名そのものを
登録しないように注意しなければいけません。仮に辞書に
</p>

<pre class="example">
うごk /動/
</pre>

<p>
というエントリが無いとして、例を挙げて説明します。
</p>

<pre class="example">
U g o K u

  ------ Buffer: foo ------
  ▼うごく
  ------ Buffer: foo ------

  ------ Minibuffer -------
  [辞書登録] うご*く: *
  ------ Minibuffer -------
</pre>

<p>
ミニバッファで辞書登録すべき文字列は「動」だけであり、送り仮名の「く」は
含めてはいけません。「動く」と登録してしまうと、次に <code>U g o K u</code> とキー入
力したときに出力される候補が「動くく」になってしまいます。
</p>

<pre class="example">
D o u <SPAN CLASS="KEY">SPC</SPAN>

  ------ Minibuffer -------
  [辞書登録] うご*く: 動*
  ------ Minibuffer -------

<SPAN CLASS="KEY">RET</SPAN>

  ------ Buffer: foo ------
  動く*
  ------ Buffer: foo ------
</pre>

<ul class="org-ul">
<li>Variable: <code class="symbol">skk-check-okurigana-on-touroku</code>

<p>
標準設定は <code>nil</code> です。 <code>non-nil</code> であれば、辞書登録時に送り仮名のチ
ェックを行います。
</p>

<p>
シンボル <code>ask</code> を設定すれば、ユーザに確認を求め、送り仮名と認められれば
送り仮名を取り除いてから登録します。
</p>

<p>
シンボル <code>auto</code> を設定すれば、ユーザに確認を求めず、勝手に送り仮名を判
断して削除してから登録します。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-5-3-4-3" class="outline-5">
<h5 id="sec-5-3-4-3"><span class="section-number-5">5.3.4.3</span> サ変動詞の辞書登録に関する注意</h5>
<div class="outline-text-5" id="text-5-3-4-3">

<p>
サ変動詞（名詞の後に「する」を付けた形で構成される動詞）については「する」
を送り仮名とした送りあり変換 <sup><a id="fnr.44" name="fnr.44" class="footref" href="#fn.44">44</a></sup> をしないで、
「運動」と「する」とに分けて入力することを前提としています <sup><a id="fnr.45" name="fnr.45" class="footref" href="#fn.45">45</a></sup> 。
</p>

<p>
例えば「運動する」は <code>U n d o u <SPAN CLASS="KEY">SPC</SPAN> s u r u</code> とキー入力することにより入力
できます。名詞から作られる形容詞等も同様です。
</p>
</div>
</div>

<div id="outline-container-sec-5-3-4-4" class="outline-5">
<h5 id="sec-5-3-4-4"><span class="section-number-5">5.3.4.4</span> 再帰的辞書登録</h5>
<div class="outline-text-5" id="text-5-3-4-4">

<p>
ミニバッファを再帰的に使って辞書登録を再帰的に行うことができます。
</p>

<p>
仮に辞書に
</p>

<pre class="example">
さいきてき /再帰的/
さいき /再帰/
</pre>

<p>
のようなエントリがなく、かつ
</p>

<pre class="example">
さい /再/
き /帰/
てき /的/
</pre>

<p>
のようなエントリがあるとします。
</p>

<p>
ここで <code>S a i k i t e k i <SPAN CLASS="KEY">SPC</SPAN></code> とキー入力すると、見出し語「さいきてき」に
対する候補を見つけられないので、ミニバッファに「さいきてき」というプロン
プトを表示して辞書登録モードに入ります。
</p>

<p>
「さいきてき」に対する辞書エントリを作るため <code>S a i k i <SPAN CLASS="KEY">SPC</SPAN></code> とキー入力す
ると、更にこの候補も見つけられないので、ミニバッファに「さいき」というプ
ロンプトを表示して、再帰的に「さいき」の辞書登録モードに入ります。
</p>

<p>
<code>S a i <SPAN CLASS="KEY">SPC</SPAN> K i <SPAN CLASS="KEY">SPC</SPAN></code> とキー入力すると、ミニバッファは、
</p>

<pre class="example">
------ Minibuffer -------
[[辞書登録]] さいき: 再▼帰*
------ Minibuffer -------
</pre>

<p>
となります。プロンプトが <code>[ [</code> 辞書登録 <code>] ]</code> となり <code>[ ]</code> がひとつ増えて
いますが、この <code>[ ]</code> の数が再帰的な辞書登録モードの深さを表わしています。
ここで <code class="key">RET</code> を打鍵すると、個人辞書には
</p>

<pre class="example">
さいき /再帰/
</pre>

<p>
というエントリが登録され、ミニバッファは「さいきてき」の辞書登録モードに
戻り、プロンプトは「さいきてき」となります。
</p>

<p>
今度は「再帰」が変換可能なので <code>S a i k i <SPAN CLASS="KEY">SPC</SPAN> T e k i <SPAN CLASS="KEY">SPC</SPAN></code> とキー入力する
と、
</p>

<pre class="example">
------ Minibuffer -------
[辞書登録] さいきてき: 再帰▼的*
------ Minibuffer -------
</pre>

<p>
となります。ここで <code class="key">RET</code> を打鍵することで「さいきてき」の辞書登録モードか
ら抜け、個人辞書に
</p>

<pre class="example">
さいきてき /再帰的/
</pre>

<p>
というエントリが登録されます。カレントバッファのポイントには「再帰的」が
挿入されます。
</p>
</div>
</div>

<div id="outline-container-sec-5-3-4-5" class="outline-5">
<h5 id="sec-5-3-4-5"><span class="section-number-5">5.3.4.5</span> 改行文字を含む辞書登録</h5>
<div class="outline-text-5" id="text-5-3-4-5">

<p>
改行文字を含む文字列を辞書に登録するには、辞書登録モードで改行文字を <code>C-q C-j</code> に
より入力します。例えば、
</p>

<pre class="example">
〒980
仙台市青葉区片平2-1-1
東北大学電気通信研究所
</pre>

<p>
を辞書に登録するには、辞書登録モードで、
</p>

<pre class="example">
  〒980
C-q C-j
  仙台市青葉区片平2-1-1
C-q C-j
  東北大学電気通信研究所
</pre>

<p>
と入力します。
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-5-4" class="outline-3">
<h3 id="sec-5-4"><span class="section-number-3">5.4</span> インクリメンタル・サーチ</h3>
<div class="outline-text-3" id="text-5-4">
<p>
DDSKK では、専用のインクリメンタル・サーチプログラムを Emacs 添付の
<code>isearch.el</code> のラッパーとして実装しているため、日本語文字列のインクリメン
タル・サーチをアスキー文字と同様の操作で行うことができます。
</p>
</div>

<div id="outline-container-sec-5-4-1" class="outline-4">
<h4 id="sec-5-4-1"><span class="section-number-4">5.4.1</span> skk-isearchの操作性</h4>
<div class="outline-text-4" id="text-5-4-1">
<p>
大部分の動作は、Emacs オリジナルのインクリメンタル・サーチのままですから、
Emacs オリジナルのインクリメンタル・サーチのコマンド <sup><a id="fnr.46" name="fnr.46" class="footref" href="#fn.46">46</a></sup> やユーザ変
数でのカスタマイズ <sup><a id="fnr.47" name="fnr.47" class="footref" href="#fn.47">47</a></sup> もそのまま利用できます。
</p>

<p>
インクリメンタル・サーチ中の入力方法は、通常のバッファにおける各入力モー
ド、変換モードでの入力方法と同一です。
</p>

<p>
<code>C-s</code> や <code>C-r</code> あるいは <code>M-C-s</code> や <code>M-C-r</code> でインクリメンタル・サーチを起
動すると、インクリメンタル・サーチを起動したバッファの入力モードと同一の
入力モードで、キーとなる文字の入力が可能となります。
</p>
</div>
</div>

<div id="outline-container-sec-5-4-2" class="outline-4">
<h4 id="sec-5-4-2"><span class="section-number-4">5.4.2</span> skk-isearch と入力モード</h4>
<div class="outline-text-4" id="text-5-4-2">
<p>
入力モードに合わせて、インクリメンタル・サーチのプロンプトが表示されます。
プロンプトの種類は、以下の６つです。
</p>

<ul class="org-ul">
<li><code>I-search: [か]</code> &#x2026; かなモード
</li>

<li><code>I-search: [カ]</code> &#x2026; カナモード
</li>

<li><code>I-search: [英]</code> &#x2026; 全英モード
</li>

<li><code>I-search: [aa]</code> &#x2026; アスキーモード
</li>

<li><code>I-search: [aあ]</code> &#x2026; Abbrev モード
</li>

<li><code>I-search: [--]</code> &#x2026; インクリメンタル・サーチモードで <code>C-x C-j</code> など
を打鍵して DDSKK を終了した場合は、このプロンプ
トが表示されます。
</li>

<li>Variable: <code class="symbol">skk-isearch-mode-string-alist</code>

<p>
プロンプトとして表示される文字列
</p>
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-5-5" class="outline-3">
<h3 id="sec-5-5"><span class="section-number-3">5.5</span> チュートリアル</h3>
<div class="outline-text-3" id="text-5-5">
<p>
DDSKK には、基本的な操作方法を学習できるチュートリアルが附属しています。
日本語版チュートリアルは <code>M-x skk-tutorial</code> で、英語版チュートリアルは
<code>C-u M-x skk-tutorial <SPAN CLASS="KEY">RET</SPAN> English <SPAN CLASS="KEY">RET</SPAN></code> で実行します。
</p>

<ul class="org-ul">
<li>Variable: <code class="symbol">skk-tut-file</code>

<p>
チュートリアルファイルが標準の場所に置かれていない場合は、 <code>~/.emacs.d/init.el</code> で
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-tut-file <span style="font-style: italic;">"/usr/local/share/skk/SKK.tut"</span>)
</pre>
</div>

<p>
と書くことにより、指定したチュートリアルファイルを使用させることができ
ます。英語版のチュートリアルファイルは、 <code>skk-tut-file</code> に <code>.E</code> が付い
たファイル名です。この場合であれば、 <code>/usr/local/share/skk/SKK.tut.E</code> に
なります。
</p>
</li>

<li>Variable: <code class="symbol">skk-tut-lang</code>

<p>
チュートリアルで用いる言語を文字列 "<code>Japanese</code>" 又は "<code>English</code>" で指定
します。この変数よりも <code>C-u M-x skk-tutorial</code> による言語指定が優先され
ます。
</p>
</li>

<li>Variable: <code class="symbol">skk-tut-use-face</code>

<p>
<code>Non-nil</code> であれば、チュートリアルで face を利用して表示します。
</p>
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6"><span class="section-number-2">6</span> 便利な応用機能</h2>
<div class="outline-text-2" id="text-6">
</div><div id="outline-container-sec-6-1" class="outline-3">
<h3 id="sec-6-1"><span class="section-number-3">6.1</span> ファイル構成</h3>
<div class="outline-text-3" id="text-6-1">
<p>
SKK の基本的な機能は <code>skk.el</code> に収められています。一方、DDSKK で応用機能
を提供するプログラムのほとんどは <code>skk.el</code> とは別のファイルに収めています。
これらは、必要に応じてオートロードするように設計されています。各応用機能
の概略と該当のファイル名について説明します。
</p>

<p>
また、DDSKK の変数は <code>skk-vars.el</code> に集約されていますので、カスタマイズし
たい場合などには、このファイルを見ると参考になるかもしれません。
</p>

<ul class="org-ul">
<li><code>ccc.el</code>

<p>
buffer local cursor color control library
</p>
</li>

<li><code>cdb.el</code>

<p>
constant database (cdb) reader for Emacs Lisp
</p>
</li>

<li><code>context-skk.el</code>

<p>
編集の文脈に応じて自動的に skk のモードを切り替えたり、SKK の各種設定を
変更する機能を提供します。
</p>

<p>
<a href="#sec-6-3-5">文脈に応じた自動モード切り替え</a>.
</p>
</li>

<li><code>ddskk-pkg.el</code>

<p>
<a href="elisp#Multi-file Packages">Multi-file Packages in GNU Emacs Lisp Reference Manual</a>.
</p>
</li>

<li><code>skk-abbrev.el</code>

<p>
SKK abbrev モードの機能を提供するプログラムを集めたファイル。
</p>

<p>
<a href="#sec-6-5-5">アスキー文字を見出し語とした変換</a>.
</p>
</li>

<li><code>skk-act.el</code>

<p>
dvorak 配列での拡張ローマ字入力 ACT を SKK で使うための設定を提供しま
す。
</p>

<p>
<a href="#sec-7-2">ACT</a>.
</p>
</li>

<li><code>skk-annotation.el</code>

<p>
個人辞書に付けたアノテーション（注釈）を活用するプログラムを集めたファ
イル。
</p>

<p>
<a href="#sec-6-11">注釈（アノテーション）</a>.
</p>
</li>

<li><code>skk-auto.el</code>

<p>
送り仮名の自動処理を行うプログラムを集めたファイル。
</p>

<p>
<a href="#sec-6-8-3">送り仮名の自動処理</a>.
</p>
</li>

<li><code>skk-autoloads.el</code>

<p>
<code>make</code> 時に自動生成されるファイル。オートロードの設定のほか <code>register-input-method</code> も
行う。 XEmacs で DDSKK をパッケージとしてインストールした場合は <code>auto-autoloads.el</code> と
いうファイルがこれに相当します。
</p>
</li>

<li><code>skk-azik.el</code>

<p>
拡張ローマ字入力 AZIK の設定を提供します。
</p>

<p>
<a href="#sec-7-1">AZIK</a>.
</p>
</li>

<li><code>skk-bayesian.el</code>

<p>
SKK の学習機能のひとつで、ユーザの過去の入力から変換候補を予測します。
</p>

<p>
<a href="#sec-6-9-3">ベイズ統計を用いた学習</a>.
</p>
</li>

<li><code>skk-cdb.el</code>

<p>
CDB 形式辞書ファイルを辞書サーバなしに直接利用できるプログラム。
</p>
</li>

<li><code>skk-comp.el</code>

<p>
見出し語の補完を行うプログラムを集めたファイル。
</p>

<p>
<a href="#sec-6-4">補完</a>.
</p>
</li>

<li><code>skk-cursor.el</code>

<p>
カーソルの色を制御するプログラムを集めたファイル。
</p>

<p>
<a href="#sec-6-14-3">入力モードを示すカーソル色に関する設定</a>.
</p>
</li>

<li><code>skk-cus.el</code>

<p>
<code>M-x customize-group</code> による対話的な設定変更機能の簡易版を提供します。
</p>

<p>
<a href="#sec-6-2-3">Customize による設定変更</a>.
</p>
</li>

<li><code>skk-dcomp.el</code>

<p>
skk-comp による補完を自動的に実行して見出し語入力を支援します。
</p>

<p>
<a href="#sec-6-4-3">動的補完</a>.
</p>
</li>

<li><code>skk-develop.el</code>

<p>
font-lock 関係のほか、おもに開発者向けのプログラムを集めたファイル。
</p>

<ul class="org-ul">
<li>Key: <code class="symbol">M-x skk-submit-bug-report</code> (skk-submit-bug-report)

<p>
バグレポートのメールバッファを用意する
</p>
</li>

<li>Key: <code class="symbol">M-x skk-get</code> (skk-get)

<p>
辞書ファイルを一括ダウンロードする
</p>
</li>
</ul>
</li>

<li><code>skk-emacs.el</code>

<p>
GNU Emacs の拡張機能を利用するプログラムを集めたファイル。インジケータ
のカラー化や画像表示、ツールティップ利用など。
</p>
</li>

<li><code>skk-gadget.el</code>

<p>
プログラム実行変換を行うプログラムを集めたファイル。
</p>

<p>
<a href="#sec-6-5-7">プログラム実行変換</a>.
</p>
</li>

<li><code>skk-hint.el</code>

<p>
SKK の変換候補が多いときにヒントを与えて絞りこむ機能を提供します。
</p>

<p>
<a href="#sec-6-5-2">候補の絞り込み</a>.
</p>
</li>

<li><code>skk-inline.el</code>

<p>
変換候補のインライン表示機能を集めたファイル。
</p>

<p>
<a href="#sec-6-14-4">変換候補一覧の表示方法</a>.
</p>
</li>

<li><code>skk-isearch.el</code>

<p>
DDSKK を併用したインクリメンタル・サーチ機能を提供します。
</p>

<p>
<a href="#sec-6-16">I-search 関連</a>.
</p>
</li>

<li><code>skk-jisx0201.el</code>

<p>
JIS X 0201 カナ <sup><a id="fnr.48" name="fnr.48" class="footref" href="#fn.48">48</a></sup> を利用する機能を提供します。
</p>
</li>

<li><code>skk-jisx0213.el</code>

<p>
JIS X 0213 文字集合を扱うプログラムです。
</p>
</li>

<li><code>skk-jisyo-edit-mode.el</code>

<p>
SKK 辞書を編集するためのメジャーモードを提供します。
</p>
</li>

<li><code>skk-kakasi.el</code>

<p>
KAKASI インターフェイスプログラムを集めたファイル。
</p>

<p>
<a href="#sec-6-3-3">領域の操作</a>.
</p>
</li>

<li><code>skk-kanagaki.el</code>

<p>
キーボードのかな配列などに対応する枠組みを提供します。現段階では旧 JIS 配
列のかなキーボード及び NICOLA 規格の親指シフト配列に対応しています。
</p>

<p>
<a href="#sec-7-4">かな入力と親指シフト</a>.
</p>
</li>

<li><code>skk-kcode.el</code>

<p>
文字コードまたはメニューによる文字入力を行うプログラムを集めたファイル。
</p>

<p>
<a href="#sec-6-12-1">文字コードまたはメニューによる文字入力</a>.
</p>
</li>

<li><code>skk-leim.el</code>

<p>
LEIM 関連プログラムファイル。DDSKK を Emacs の input method として利用
できるようにします。
</p>

<p>
<a href="#sec-4-4">DDSKK を Emacs の Input Method とする</a>.
</p>
</li>

<li><code>skk-look.el</code>

<p>
<code>look</code> コマンドとのインターフェイスプログラムを集めたファイル。
</p>

<p>
<a href="#sec-6-13-2">skk-look</a>.
</p>
</li>

<li><code>skk-lookup.el</code>

<p>
Lookup で検索できる辞書を使って単語の候補を出力するプログラム。
</p>

<p>
<a href="#sec-6-13-1">skk-lookup</a>.
</p>
</li>

<li><code>skk-macs.el</code>

<p>
他のファイルで共通して使用するマクロなどを中心にまとめたファイル。
</p>
</li>

<li><code>skk-num.el</code>

<p>
数値変換を行うプログラムを集めたファイル。
</p>

<p>
<a href="#sec-6-5-4">数値変換</a>.
</p>
</li>

<li><code>skk-search-web.el</code>

<p>
Google CGI API for Japanese Input を利用したかな漢字変換。辞書登録モー
ドに Google サジェストを初期表示する。
</p>

<p>
<a href="#sec-6-13-4">Google CGI API for Japanese Input を利用したかな漢字変換</a>.
</p>
</li>

<li><code>skk-server-completion.el</code>

<p>
拡張された辞書サーバによる見出し語補完機能を利用できます。
</p>

<p>
<a href="#sec-6-10-6">サーバコンプリージョン</a>.
</p>
</li>

<li><code>skk-server.el</code>

<p>
辞書サーバと通信して変換する機能を提供します。
</p>

<p>
<a href="#sec-6-10-5">サーバ関連</a>.
</p>
</li>

<li><code>skk-setup.el</code>

<p>
自動的に個人設定を行うためのファイル。
</p>
</li>

<li><code>skk-show-mode.el</code>

<p>
カーソル付近に入力モードを表示する機能を提供します。
</p>
</li>

<li><code>skk-sticky.el</code>

<p>
変換開始位置及び送り開始位置の指定方法を変更可能にする。
</p>

<p>
<a href="#sec-6-6-10">変換位置の指定方法</a>.
</p>
</li>

<li><code>skk-study.el</code>

<p>
直前に確定したいくつかの語との関連性を確認し、候補順を操作する学習効果
を提供するプログラム。
</p>

<p>
<a href="#sec-6-9-1">変換の学習</a>.
</p>
</li>

<li><code>skk-tankan.el</code>

<p>
SKK を使って単漢字変換を行うプログラムです。
</p>

<p>
<a href="#sec-6-5-1">単漢字変換</a>.
</p>
</li>

<li><code>skk-tut.el</code>

<p>
SKK チュートリアルプログラム。
</p>

<p>
<a href="#sec-5-5">チュートリアル</a>.
</p>
</li>

<li><code>skk-tutcode.el</code>

<p>
SKK で TUT-code 入力を実現します。
</p>

<p>
<a href="#sec-7-3">TUT-code</a>.
</p>
</li>

<li><code>skk-vars.el</code>

<p>
DDSKK で使われる変数を集約したファイル。
</p>
</li>

<li><code>skk-version.el</code>

<p>
DDSKK のバージョン情報を提供するプログラムファイル。
</p>
</li>

<li><code>skk-viper.el</code>

<p>
VIPER インターフェイスプログラムを集めたファイル。
</p>

<p>
<a href="#sec-6-17">VIP/VIPERとの併用</a>.
</p>
</li>

<li><code>skk-xemacs.el</code>

<p>
XEmacs の拡張機能を利用するプログラムを集めたファイル。インジケータのカ
ラー化や画像表示、ツールティップ利用など。
</p>
</li>

<li><code>tar-util.el</code>

<p>
utility for tar archive
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-2" class="outline-3">
<h3 id="sec-6-2"><span class="section-number-3">6.2</span> ユーザオプションの設定方法</h3>
<div class="outline-text-3" id="text-6-2">
<p>
DDSKK のカスタマイズは、 <code>~/.emacs.d/init.el</code> あるいは <code>~/.skk</code> に記述し
ます。また、各ファイルの提供するフックも利用します。上記のファイルやフッ
クを利用した設定がいつ有効になるのか、という点についてここで説明します。
</p>
</div>

<div id="outline-container-sec-6-2-1" class="outline-4">
<h4 id="sec-6-2-1"><span class="section-number-4">6.2.1</span> 設定ファイル</h4>
<div class="outline-text-4" id="text-6-2-1">
<ul class="org-ul">
<li><code>~/.emacs.d/init.el</code> , <code>~/.xemacs/init.el</code>

<p>
Emacs を起動したときに一度だけ読み込まれます。
</p>

<p>
<a href="emacs#Init File">The Emacs Initialization File in GNU Emacs Manual</a>.
</p>

<p>
このマニュアルは <code>~/.emacs.d/init.el</code> という記述で統一しています。
</p>
</li>
</ul>

<ul class="org-ul">
<li><code>~/.skk</code>

<p>
DDSKK を起動した最初の一度だけ読み込まれます。ファイル名の標準設定
は OS の種類により異なりますが、実際は Emacs の関数 <code>convert-standard-filename</code> に
より加工されます。
</p>

<p>
<code>~/.skk</code> のファイル名は変数 <code>skk-init-file</code> で変更することができます。
また、DDSKK にはこのファイルを自動的にバイトコンパイルする機能 <sup><a id="fnr.49" name="fnr.49" class="footref" href="#fn.49">49</a></sup> が
あります。
</p>
</li>

<li>Variable: <code class="symbol">skk-user-directory</code>

<p>
DDSKK は <code>~/.skk</code> や <code>~/.skk-jisyo</code> といった複数のファイルを使用します。
これらのファイルをひとつのディレクトリにまとめて置きたい場合は、変数 <code>skk-user-directory</code> に
そのディレクトリ名を設定します。標準設定は <code>nil</code> です。
</p>

<p>
この変数は <code>~/.emacs.d/init.el</code> で設定してください。DDSKK 起動時に <code>skk-user-directory</code> が
指すディレクトリが存在しない場合は、自動的に作られます。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-user-directory <span style="font-style: italic;">"~/.ddskk"</span>)
</pre>
</div>

<p>
この変数を設定した場合（例えば上記 <code>~/.ddskk</code> ）、以下に挙げる各変数の
標準設定値が変更されます。
</p>

<pre class="example">
影響を受ける変数           標準設定値      変更後の標準設定値  
skk-init-file              ~/.skk            ~/.ddskk/init
skk-jisyo                  ~/.skk-jisyo      ~/.ddskk/jisyo
skk-backup-jisyo           ~/.skk-jisyo.BAK  ~/.ddskk/jisyo.bak
skk-emacs-id-file          ~/.skk-emacs-id   ~/.ddskk/emacs-id
skk-record-file            ~/.skk-record     ~/.ddskk/record
skk-study-file             ~/.skk-study      ~/.ddskk/study
skk-study-backup-file      ~/.skk-study.BAK  ~/.ddskk/study.bak
skk-bayesian-history-file  ~/.skk-bayesian   ~/.ddskk/bayesian
skk-bayesian-corpus-file   ~/.skk-corpus     ~/.ddskk/corpus
</pre>

<p>
なお、 <code>skk-user-directory</code> を設定した場合でも、各変数を個別に設定してい
る場合はその個別の設定が優先されます。
</p>
</li>
</ul>
</div>

<div id="outline-container-sec-6-2-1-1" class="outline-5">
<h5 id="sec-6-2-1-1"><span class="section-number-5">6.2.1.1</span> skk-init-file の自動コンパイル</h5>
<div class="outline-text-5" id="text-6-2-1-1">

<ul class="org-ul">
<li>Variable: <code class="symbol">skk-byte-compile-init-file</code>

<p>
ここでは、「DDSKK の設定ファイル」を <code>el</code> と、「DDSKK の設定ファイルを
バイトコンパイルしたファイル」を <code>elc</code> とそれぞれ呼ぶこととします。
</p>

<ol class="org-ol">
<li>DDSKK の起動時に、この変数の値が <code>non-nil</code> であれば、

<p>
「 <code>elc</code> が存在しない」又は「 <code>elc</code> よりも <code>el</code> が新しい」とき
は、 <code>el</code> をバイトコンパイルした <code>elc</code> を生成します。
</p>
</li>

<li>DDSKK の起動時に、この変数の値が <code>nil</code> であれば、

<p>
<code>elc</code> よりも <code>el</code> が新しいときは、 <code>elc</code> を消去します。
</p>
</li>
</ol>
<p>
以上の機能を有効にしたい場合は <code>~/.emacs.d/init.el</code> に
</p>

<pre class="example">
(setq skk-byte-compile-init-file t)
</pre>

<p>
と記述します。この変数は <code>~/.skk</code> が読み込まれる前に調べられるた
め、 <code>~/.skk</code> に上記の設定を記述しても無効です。
</p>
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-6-2-2" class="outline-4">
<h4 id="sec-6-2-2"><span class="section-number-4">6.2.2</span> フック</h4>
<div class="outline-text-4" id="text-6-2-2">
<ul class="org-ul">
<li>Variable: <code class="symbol">skk-mode-hook</code>

<p>
<code>C-x C-j</code> と入力して SKK モードに入る度に呼ばれます。主にバッファローカ
ルの設定などを行います。
</p>
</li>

<li>Variable: <code class="symbol">skk-auto-fill-mode-hook</code>

<p>
<code>C-x j</code> と入力してオートフィルモード付きで SKK モードに入る度に呼ばれま
す。主にバッファローカルの設定などを行います。
</p>
</li>

<li>Variable: <code class="symbol">skk-load-hook</code>

<p>
<code>skk.el</code> の読み込みを完了した時点で呼ばれます。 <code>~/.skk</code> は SKK モード
を起動しなければ読み込まれないのに対し、このフックは <code>skk.el</code> を読み込
んだら SKK モードを起動しなくとも呼ばれます。
</p>
</li>
</ul>

<p>
各ファイルの読み込みが完了した直後に呼ばれるフックは以下のとおり。
</p>

<ul class="org-ul">
<li>Variable: <code class="symbol">skk-act-load-hook</code>

<p>
<code>skk-act.el</code>
</p>
</li>

<li>Variable: <code class="symbol">skk-auto-load-hook</code>

<p>
<code>skk-auto.el</code>
</p>
</li>

<li>Variable: <code class="symbol">skk-azik-load-hook</code>

<p>
<code>skk-azik.el</code>
</p>
</li>

<li>Variable: <code class="symbol">skk-comp-load-hook</code>

<p>
<code>skk-comp.el</code>
</p>
</li>

<li>Variable: <code class="symbol">skk-gadget-load-hook</code>

<p>
<code>skk-gadget.el</code>
</p>
</li>

<li>Variable: <code class="symbol">skk-kakasi-load-hook</code>

<p>
<code>skk-kakasi.el</code>
</p>
</li>

<li>Variable: <code class="symbol">skk-kcode-load-hook</code>

<p>
<code>skk-kcode.el</code>
</p>
</li>

<li>Variable: <code class="symbol">skk-num-load-hook</code>

<p>
<code>skk-num.el</code>
</p>
</li>

<li>Variable: <code class="symbol">skk-server-load-hook</code>

<p>
<code>skk-server.el</code>
</p>
</li>
</ul>

<p>
<code>load-hook</code> が提供されていないプログラムであっても、ロード完了後に何らか
の設定を行いたい場合は、関数 <code>eval-after-load</code> を使用します。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-load <span style="font-style: italic;">"skk-look"</span>
  '(
    ...
    ))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-6-2-3" class="outline-4">
<h4 id="sec-6-2-3"><span class="section-number-4">6.2.3</span> Customize による設定変更</h4>
<div class="outline-text-4" id="text-6-2-3">
<p>
Emacs 標準の Customize 機能を使って SKK を設定することもできます。ただし、
Customize での設定は <code>~/.emacs.d/init.el</code> での設定と同様に、 <code>/.skk</code> によ
る設定で上書きされてしまいますので注意してください。
</p>

<p>
<code>M-x customize-group</code> を実行すると skk の設定を対話的に変更することができ
ます。ミニバッファに <code>Customize group:</code> とプロンプトが表示されます。
</p>

<pre class="example">
------ Minibuffer -------
Customize group: (default emacs) *
------ Minibuffer -------
</pre>

<p>
ここで <code>skk</code> と答えると、SKK グループの画面へ展開します。 <code>M-x skk-emacs-customize</code> と
実行するのも同様です。
</p>

<p>
あるいは、モードラインの SKK インジケータをマウスの右ボタン（第３ボタン）
でクリックすると表示されるメニューから「SKK をカスタマイズ」を選んでも同
じ画面となります。
</p>

<p>
カスタマイズの使い方は Info (<a href="emacs#Easy Customization">Easy Customization in GNU Emacs Manual</a>.) を参照してください。
</p>

<p>
skk で設定できる変数の中には、まだこのマニュアルで解説されていないものも
あります。 Customize を使うと、それらについても知ることができます。
</p>
</div>
</div>

<div id="outline-container-sec-6-2-4" class="outline-4">
<h4 id="sec-6-2-4"><span class="section-number-4">6.2.4</span> skk-customize による設定変更</h4>
<div class="outline-text-4" id="text-6-2-4">
<ul class="org-ul">
<li>Key: <code class="symbol">M-x skk-customize</code> (skk-customize)

<p>
前述の「Emacs 標準の Customize 機能 <code>M-x customize-group</code> 」による設定
が複雑すぎると感じるユーザのために、簡易版として <code>M-x skk-customize</code> を
用意しています。これは SKK グループのユーザオプションのうち、よく使うも
のだけ抜粋して設定できるようにしたものです。
</p>

<p>
これは、モードラインの SKK インジケータをマウスの右ボタン（第３ボタン）
でクリックして表示されるメニューから「SKK をカスタマイズ（簡易版）」を選
んで呼び出すこともできます。
</p>
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-6-3" class="outline-3">
<h3 id="sec-6-3"><span class="section-number-3">6.3</span> カタカナ、英字入力の便法</h3>
<div class="outline-text-3" id="text-6-3">
<p>
この節では、カタカナや全英文字を入力するための、便利な方法を説明します。
単純に各モードを用いる方法については前述 (<a href="#sec-5-2">入力モード</a>.) しました。
</p>
</div>

<div id="outline-container-sec-6-3-1" class="outline-4">
<h4 id="sec-6-3-1"><span class="section-number-4">6.3.1</span> かなモードからカタカナを入力</h4>
<div class="outline-text-4" id="text-6-3-1">
<p>
まず、かなモードに入ります。 <code>Q</code> キーでいったん▽モードにして何かひらがな
を入力し、最後に <code>q</code> を打鍵すると、カタカナに変換され確定されます。
</p>

<p>
実際には、ひらがな以外からも変換できます。以下のようになります。
</p>

<ul class="org-ul">
<li>カタカナ は ひらがな へ
</li>
<li>ひらがな は カタカナ へ
</li>
<li>全英文字 は アスキー文字 へ
</li>
<li>アスキー文字 は 全英文字 へ
</li>
</ul>

<p>
細かく言えば、▽マークとポイント間の文字列の種類 <sup><a id="fnr.50" name="fnr.50" class="footref" href="#fn.50">50</a></sup> をキーとし
て変換が行われます。かなモード、カナモード、どちらでも同じです。
</p>

<p>
このような変換を <b>トグル変換</b> と呼びます。以下はトグル変換の例です。
</p>

<pre class="example">
K a t a k a n a

  ------ Buffer: foo ------
  ▽かたかな*
  ------ Buffer: foo ------

q

  ------ Buffer: foo ------
  カタカナ*
  ------ Buffer: foo ------
</pre>

<p>
このトグル変換を上手く利用することにより、かなモードのまま一時的にカタカ
ナを入力したり、またその逆を行うことができます。こうすると、例えばひらが
な／カタカナが混在した文章を書くときに、その都度 <code>q</code> キーを押して入力モー
ドを切り換える必要がありません <sup><a id="fnr.51" name="fnr.51" class="footref" href="#fn.51">51</a></sup> 。
</p>

<p>
領域を対象としたコマンド (<a href="#sec-6-3-3">領域の操作</a>.) でも「かな←→カナ」のトグル
変換を行うことができます。
</p>
</div>
</div>

<div id="outline-container-sec-6-3-2" class="outline-4">
<h4 id="sec-6-3-2"><span class="section-number-4">6.3.2</span> 全英文字の入力</h4>
<div class="outline-text-4" id="text-6-3-2">
<p>
まず、かなモードに入ります。次に <code>/</code> を打鍵すると SKK abbrev モード <sup><a id="fnr.52" name="fnr.52" class="footref" href="#fn.52">52</a></sup> に
入りますのでアルファベット（アスキー文字）を入力します。アルファベットの
入力後に <code>C-q</code> を打鍵する <sup><a id="fnr.53" name="fnr.53" class="footref" href="#fn.53">53</a></sup> ことで▽マークから <code>C-q</code> を打鍵した位
置までの間にあるアルファベットが全角アルファベットに変換されて確定されま
す。
</p>

<pre class="example">
/ f i l e

  ------ Buffer: foo ------
  ▽file*
  ------ Buffer: foo ------

C-q

  ------ Buffer: foo ------
  ｆｉｌｅ*
  ------ Buffer: foo ------
</pre>

<p>
なお、この変換を行うために、
</p>

<pre class="example">
file /ｆｉｌｅ/
</pre>

<p>
のような辞書エントリを持つ必要はありません。なぜなら、辞書を参照せずにア
スキー文字を１文字ずつ全英文字に変換しているからです。
</p>
</div>
</div>

<div id="outline-container-sec-6-3-3" class="outline-4">
<h4 id="sec-6-3-3"><span class="section-number-4">6.3.3</span> 領域の操作</h4>
<div class="outline-text-4" id="text-6-3-3">
<p>
以下のコマンドを <code>M-x</code> により呼ぶことで <sup><a id="fnr.54" name="fnr.54" class="footref" href="#fn.54">54</a></sup> 、領域内の文字列を一
括変換することができます。
</p>

<ul class="org-ul">
<li>Key: <code class="symbol">M-x skk-hiragana-region</code> (skk-hiragana-region)

<p>
カタカナ を ひらがな へ変換。
</p>
</li>

<li>Key: <code class="symbol">M-x skk-katakana-region</code> (skk-katakana-region)

<p>
ひらがな を カタカナ へ変換。
</p>
</li>

<li>Key: <code class="symbol">M-x skk-latin-region</code> (skk-latin-region)

<p>
全英文字 を アスキー文字 へ変換。
</p>
</li>

<li>Key: <code class="symbol">M-x skk-jisx0208-latin-region</code> (skk-jisx0208-latin-region)

<p>
アスキー文字 を 全英文字 へ変換。
</p>
</li>
</ul>

<p>
以下に紹介する「漢字から読みを求めるコマンド」は、外部プログラム <code>KAKASI</code> <sup><a id="fnr.55" name="fnr.55" class="footref" href="#fn.55">55</a></sup>が
必要です。 <code>KAKASI</code> がインストールされていなければ使用することができません。
</p>


<ul class="org-ul">
<li>Key: <code class="symbol">M-x skk-gyakubiki-region</code> (skk-gyakubiki-region)

<p>
漢字をひらがなへ変換。具体的な変換例をあげると、
</p>

<pre class="example">
  漢字をひらがなへ変換。 → かんじをひらがなへへんかん。
</pre>

<p>
のようになります。引数を渡して <code>C-u M-x skk-gyakubiki-region</code> のように
すると、複数の候補がある場合に <code>{ }</code> で囲って表示します。例えば
</p>

<blockquote>
<p>
<code>中島 → {なかしま|なかじま}</code>
</p>
</blockquote>

<p>
のようになります。
</p>

<p>
送り仮名がある語は、送り仮名まで含めて領域に指定します（さもないと誤変
換の原因となります）。 例えば「五月蝿い」について、送り仮名「い」を含め
ずにこのコマンドを実行すると「ごがつはえ」に変換されてしまいます。
</p>
</li>

<li>Key: <code class="symbol">M-x skk-gyakubiki-and-henkan</code> (skk-gyakubiki-and-henkan)

<p>
領域の漢字をひらがなへ変換し、これで得たひらがなを見出し語として漢字変
換を実行します。
</p>
</li>

<li>Key: <code class="symbol">M-x skk-gyakubiki-katakana-region</code> (skk-gyakubiki-katakana-region)

<p>
漢字をカタカナへ変換。
</p>

<p>
引数を渡して <code>C-u M-x skk-gyakubiki-katakana-region</code> のようにすると、
複数の候補がある場合に <code>{ }</code> で囲って表示します。
</p>
</li>

<li>Key: <code class="symbol">M-x skk-hurigana-region</code> (skk-hurigana-region)

<p>
漢字にふりがなを付ける。例えば、
</p>

<pre class="example">
  漢字の脇に → 漢字[かんじ]の脇[わき]に
</pre>

<p>
のようになります。引数を渡して <code>C-u M-x skk-hurigana-region</code> のようにす
ると、複数の候補がある場合に <code>{ }</code> で囲って表示します。
</p>
</li>

<li>Key: <code class="symbol">M-x skk-hurigana-katakana-region</code> (skk-hurigana-katakana-region)

<p>
漢字にカタカナのふりがなを付ける。
</p>

<p>
引数を渡して <code>C-u M-x skk-hurigana-katakana-region</code> のようにすると、複
数の候補がある場合に <code>{ }</code> で囲って表示します。
</p>
</li>

<li>Key: <code class="symbol">M-x skk-romaji-region</code> (skk-romaji-region)

<p>
漢字、ひらがな、カタカナをローマ字へ、全英文字をアスキー文字へ変換。標
準では、ローマ字への変換様式はヘボン式です。例えば、
</p>

<pre class="example">
  し → shi
</pre>

<p>
となります。
</p>
</li>
</ul>

<p>
以下のコマンドは、領域内の文字列を置き換える代わりに、変換結果をエコーエ
リアに表示します。
</p>

<ul class="org-ul">
<li>Key: <code class="symbol">M-x skk-gyakubiki-message</code> (skk-gyakubiki-message)
</li>
<li>Key: <code class="symbol">M-x skk-gyakubiki-katakana-message</code> (skk-gyakubiki-katakana-message)
</li>
<li>Key: <code class="symbol">M-x skk-hurigana-message</code> (skk-hurigana-message)
</li>
<li>Key: <code class="symbol">M-x skk-hurigana-katakana-message</code> (skk-hurigana-katakana-message)
</li>
<li>Key: <code class="symbol">M-x skk-romaji-message</code> (skk-romaji-message)
</li>
</ul>

<ul class="org-ul">
<li>Variable: <code class="symbol">skk-gyakubiki-jisyo-list</code>

<p>
関数 <code>skk-gyakubiki-region</code> はコマンド <code>kakasi</code> を呼び出しています。
<code>kakasi</code> には漢字をひらがなへ変換する機能があり、この変換には環境変
数 <code>KANWADICTPATH</code> で指定されている辞書を利用しています。
</p>

<p>
変数 <code>skk-gyakubiki-jisyo-list</code> を設定することによって <code>kakasi</code> へ与え
る辞書を任意に追加することができます。
以下のように設定して <code>kakasi</code> へ個人辞書 <code>skk-jisyo</code> を与えることによっ
て辞書登録モードで登録したばかりの単語も <code>kakasi</code> による逆引き変換の対
象とすることができます。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-gyakubiki-jisyo-list (list skk-jisyo))
</pre>
</div>
</li>

<li>Variable: <code class="symbol">skk-romaji-*-by-hepburn</code>

<p>
この変数の値を <code>nil</code> に設定すると、コマンド <code>skk-romaji-{region|message}</code> に
よるローマ字への変換様式に訓令式 <sup><a id="fnr.56" name="fnr.56" class="footref" href="#fn.56">56</a></sup> を用います。標準設定は <code>t</code> です。
</p>

<pre class="example">
  し → si
</pre>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-3-4" class="outline-4">
<h4 id="sec-6-3-4"><span class="section-number-4">6.3.4</span> カタカナの見出し語</h4>
<div class="outline-text-4" id="text-6-3-4">
<p>
<code>q</code> の打鍵でかなモード、カナモードを度々切り替えて入力を続けていると、カ
ナモードで誤って▼モードに入ってしまうことがあります。そのため、カナモー
ドで▼モードに入った場合は、まず見出し語をひらがなに変換してから辞書の検
索に入るよう設計されています。なお、この場合の送りあり変換での送り仮名は、
カタカナになります。
</p>
</div>
</div>

<div id="outline-container-sec-6-3-5" class="outline-4">
<h4 id="sec-6-3-5"><span class="section-number-4">6.3.5</span> 文脈に応じた自動モード切り替え</h4>
<div class="outline-text-4" id="text-6-3-5">
<p>
<code>context-skk.el</code> は、編集中の文脈に応じて SKK の入力モードを自動的にアス
キーモードに切り替える等の機能を提供します。
</p>

<p>
<code>context-skk.el</code> をロードするには <code>~/.emacs.d/init.el</code> に
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'skk-load-hook
          (<span style="font-weight: bold;">lambda</span> ()
            (<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">context-skk</span>)))
</pre>
</div>

<p>
と書いてください。
</p>

<p>
あるプログラミング言語のプログラムを書いているとき、日本語入力の必要があ
るのは一般に、そのプログラミング言語の文字列中かコメント中に限られます。
たとえば Emacs Lisp で日本語入力の必要があるのは
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="font-style: italic;">"&#25991;&#23383;&#21015;"</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#12467;&#12513;&#12531;&#12488;</span>
</pre>
</div>

<p>
といった個所だけでしょう。文字列・コメントの <b>外</b> を編集するときは、多く
の場合は日本語入力は必要ありません。
</p>

<p>
現在の文字列・コメントの <b>外</b> で編集開始と同時に（skk がオンであれば）
skk の入力モードをアスキーモードに切り替えます。
エコーエリアに
</p>

<pre class="example">
-------------------- Echo Area --------------------
[context-skk] 日本語入力 off
-------------------- Echo Area --------------------
</pre>

<p>
と表示され、アスキーモードに切り替わったことが分かります。これにより、文
字列・コメントの <b>外</b> での編集を開始するにあたって、日本語入力が on にな
っていたために発生する入力誤りとその修正操作を回避することができます。
</p>

<p>
上記の機能は context-skk-mode というマイナーモードとして実装されており
<code>M-x context-skk-mode</code> でオン／オフを制御できます。オンの場合、モードライ
ンのメジャーモード名の隣に「;▽」と表示されます。
</p>

<ul class="org-ul">
<li>Variable: <code class="symbol">context-skk-programming-mode</code>

<p>
context-skk が「プログラミングモード」と見做すメジャーモード。
</p>
</li>

<li>Variable: <code class="symbol">context-skk-mode-off-message</code>

<p>
アスキーモードに切り替わった瞬間にエコーエリアに表示するメッセージ。
</p>
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-6-4" class="outline-3">
<h3 id="sec-6-4"><span class="section-number-3">6.4</span> 補完</h3>
<div class="outline-text-3" id="text-6-4">
<p>
読みの前半だけを入力して <code class="key">TAB</code> を押せば残りを自動的に補ってくれる、これが
補完です。 Emacs ユーザにはおなじみの機能が DDSKK でも使えます。
</p>

<p>
よく使う長い語を効率良く入力するには、アルファベットの略語を登録する方法
もあります。
</p>

<p>
<a href="#sec-6-5-5">アスキー文字を見出し語とした変換</a>.
</p>
</div>

<div id="outline-container-sec-6-4-1" class="outline-4">
<h4 id="sec-6-4-1"><span class="section-number-4">6.4.1</span> 読みの補完</h4>
<div class="outline-text-4" id="text-6-4-1">
<p>
▽モードで <code class="key">TAB</code> を押すと、見出し語（▽マークからポイントまでの文字列）に
対する補完 <sup><a id="fnr.57" name="fnr.57" class="footref" href="#fn.57">57</a></sup> が行われます。見出し語補完は、個人辞書のうち送りなし
エントリに対して行われます。個人辞書に限っているのは、共有辞書では先頭の
文字を共通にする見出し語が多すぎて、望みの補完が行える確率が低いためです。
</p>

<p>
次の読みの候補を表示するには <code>.</code> （ピリオド）を、戻る時には <code>,</code> （コンマ）
を押します。その読みで別の語を出すには、いつものように <code class="key">SPC</code> を押します。
</p>

<p>
例を見てみましょう。実際の動作は、個人辞書の内容によって異なります。
</p>
<pre class="example">
S a

  ------ Buffer: foo ------
  ▽さ*
  ------ Buffer: foo ------

<SPAN CLASS="KEY">TAB</SPAN>

  ------ Buffer: foo ------
  ▽さとう*
  ------ Buffer: foo ------

.

  ------ Buffer: foo ------
  ▽さいとう*
  ------ Buffer: foo ------

,

  ------ Buffer: foo ------
  ▽さとう*
  ------ Buffer: foo ------

<SPAN CLASS="KEY">SPC</SPAN>

  ------ Buffer: foo ------
  ▼佐藤*
  ------ Buffer: foo ------

C-j

  ------ Buffer: foo ------
  佐藤*
  ------ Buffer: foo ------
</pre>

<p>
補完される見出し語がどのような順で表示されるかと言うと「最近使われた語か
ら」となります。例えば「斉藤」、「佐藤」の順で変換した後、「さ」をキーに
して見出し語の補完を行うと、最初に「さとう」が、その次に「さいとう」が補
完されます。これは、個人辞書では、最近使われたエントリほど上位に来るよう
になっている (<a href="#sec-6-10-7">辞書の書式</a>.) ためです。
</p>

<p>
いったん <code class="key">SPC</code> を入力して▼モードに入ると、以後は見出し語補完は行われませ
ん。
</p>

<p>
また、 <code>.</code> の代わりに <code>C-u <span class="key">TAB</span></code> を入力すると、現在の候補に対して補完をし
ます。上の例では「さ」に対し「さとう」が補完された時に <code>C-u <span class="key">TAB</span></code> を押すと、
以後の補完は「さとう」を含む語（例えば「さとうせんせい」など）について行
われます。
</p>

<ul class="org-ul">
<li>Variable: <code class="symbol">skk-completion-prog-list</code>

<p>
補完関数、補完対象の辞書を決定するためのリスト。標準設定は以下のとお
り。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">'((skk-comp-by-history)
  (skk-comp-from-jisyo skk-jisyo)
  (skk-look-completion))
</pre>
</div>
</li>

<li>Variable: <code class="symbol">skk-comp-circulate</code>

<p>
<code>.</code> （ピリオド）で次の見出し語候補を、 <code>,</code> （コンマ）で前の見出し語候補
を表示するところ、候補が尽きていれば標準設定 <code>nil</code> では「○○で補完す
べき見出し語は他にありません」とエコーエリアに表示して動作が止まります。
この変数が <code>non-nil</code> であれば当初の見出し語を再び表示して見出し語補完を
再開します。
</p>
</li>

<li>Variable: <code class="symbol">skk-try-completion-char</code>

<p>
見出し語補完を開始するキーキャラクタです。標準設定は <code class="key">TAB</code> です。
</p>
</li>

<li>Variable: <code class="symbol">skk-next-completion-char</code>

<p>
次の見出し語候補へ移るキーキャラクタです。標準設定はピリオド <code>.</code> です。
</p>
</li>

<li>Variable: <code class="symbol">skk-previous-completion-char</code>

<p>
前の見出し語候補へ戻るキーキャラクタです。標準設定はコンマ <code>,</code> です。
</p>
</li>
</ul>

<ul class="org-ul">
<li>User Option: <code class="symbol">skk-previous-completion-use-backtab</code>

<p>
<code>Non-nil</code> であれば、前の見出し語候補へ戻る動作を <code>SHIFT + <span class="key">TAB</span></code> でも可能
とします。標準設定は <code>t</code> です。この機能の有効化／無効化の切り替えは、
ファイル <code>~/.skk</code> を書き換えて Emacs を再起動してください。
</p>
</li>

<li>Variable: <code class="symbol">skk-previous-completion-backtab-key</code>

<p>
<code>SHIFT + <span class="key">TAB</span></code> が発行する key event です。Emacs の種類／実行環境によって
異なります。
</p>
</li>

<li>Function: <code class="symbol">skk-comp-lisp-symbol &amp;optional PREDICATE</code>

<p>
この関数をリスト <code>skk-completion-prog-list</code> へ追加すると、Lisp symbol 名
の補完を行います。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-to-list 'skk-completion-prog-list
             '(skk-comp-lisp-symbol) t)
</pre>
</div>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-4-2" class="outline-4">
<h4 id="sec-6-4-2"><span class="section-number-4">6.4.2</span> 補完しながら変換</h4>
<div class="outline-text-4" id="text-6-4-2">
<p>
前節で見出し語の補完について述べました。本節では、見出し語の補完動作を行
った後、 <code class="key">SPC</code> を打鍵し、▼モードに入るまでの動作を一回の操作で行う方法に
ついて説明します。
</p>

<p>
やり方は簡単。 <code class="key">TAB</code> ・ <code class="key">SPC</code> と打鍵していたところを <code>M-SPC</code> に換えると、
見出し語を補完した上で変換を開始します。
</p>

<p>
この方法によると、補完される見出し語があらかじめ分かっている状況では、キー
入力を一回分省略できるので、読みが長い見出し語の単語を連続して入力する場
合などに威力を発揮します。
</p>

<pre class="example">
K a s i t a n n p o s e k i n i n n

  ------ Buffer: foo ------
  ▽かしたんぽせきにん*
  ------ Buffer: foo ------

<SPAN CLASS="KEY">SPC</SPAN> <SPAN CLASS="KEY">RET</SPAN>

  ------ Buffer: foo ------
  瑕疵担保責任*
  ------ Buffer: foo ------

K a

  ------ Buffer: foo ------
  ▽か*
  ------ Buffer: foo ------

M-SPC

  ------ Buffer: foo ------
  ▼瑕疵担保責任*
  ------ Buffer: foo ------
</pre>

<ul class="org-ul">
<li>Variable: <code class="symbol">skk-start-henkan-with-completion-char</code>

<p>
標準設定は <code>M-SPC</code> です。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-4-3" class="outline-4">
<h4 id="sec-6-4-3"><span class="section-number-4">6.4.3</span> 動的補完</h4>
<div class="outline-text-4" id="text-6-4-3">
<p>
▽モードでは <code class="key">TAB</code> を押さなくとも、文字を入力する都度、自動的に見出し語補
完の読みを表示させる事ができます。この機能を以下「動的補完」と呼びます。
類似の機能としては、ウェブブラウザの URL の入力や、Microsoft Excel のセル
入力の自動補完 <sup><a id="fnr.58" name="fnr.58" class="footref" href="#fn.58">58</a></sup> をイメージすると分かりやすいかも知れません。動
的補完も、個人辞書の送りなしエントリに対してのみ行なわれます。
</p>

<p>
動的補完を利用するには <code>~/.skk</code> に次の式を書きましょう。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-dcomp-activate t)
</pre>
</div>

<p>
例を見てみましょう。実際の動作は、個人辞書の内容によって左右されます。
<code>*</code> はポイント位置を表します。
</p>

<pre class="example">
H o

  ---------------- Buffer: foo ------------------
  ▽ほ*んとう
  ---------------- Buffer: foo ------------------
</pre>

<p>
face が使える環境では「んとう」の部分が異なる face で表示され、動的補完機
能によって補完された部分であることを示します。
</p>

<p>
自動的に補完された見出し語が自分の意図したものであれば <code class="key">TAB</code> を押すことで
ポイント位置を動かし、補完された見出し語を選択することができます。
</p>

<pre class="example">
<SPAN CLASS="KEY">TAB</SPAN>

  ---------------- Buffer: foo ------------------
  ▽ほんとう*
  ---------------- Buffer: foo ------------------
</pre>

<p>
この状態から <code class="key">SPC</code> を押して変換するなり、 <code>q</code> を押してカタカナにするなり、
DDSKK 本来の動作を何でも行うことができます。
</p>

<p>
補完された見出し語が自分の意図したものでない場合は、かまわず次の入力を続
けて下さい。補完された部分を無視したかのように動作します。
</p>

<pre class="example">
H o

  ---------------- Buffer: foo ------------------
  ▽ほ*んとう
  ---------------- Buffer: foo ------------------

k a

  ---------------- Buffer: foo ------------------
  ▽ほか*ん
  ---------------- Buffer: foo ------------------
</pre>

<p>
補完されない状態が自分の意図したものである場合も、補完された部分を単に無
視するだけで OK です。下記の例では「ほ」を見出し語とした変換を行っていま
す。
</p>

<pre class="example">
H o

  ---------------- Buffer: foo ------------------
  ▽ほ*んとう
  ---------------- Buffer: foo ------------------

<SPAN CLASS="KEY">SPC</SPAN>

  ---------------- Buffer: foo ------------------
  ▼保
  ---------------- Buffer: foo ------------------
</pre>

<p>
補完された状態から <code>BS</code> を押すと、消された補完前の見出し語から再度補完動
作を行います。
</p>

<pre class="example">
H o

  ---------------- Buffer: foo ------------------
  ▽ほ*んとう
  ---------------- Buffer: foo ------------------

k a

  ---------------- Buffer: foo ------------------
  ▽ほか*ん
  ---------------- Buffer: foo ------------------

<SPAN CLASS="KEY">BS</SPAN>

  ---------------- Buffer: foo ------------------
  ▽ほ*んとう
  ---------------- Buffer: foo ------------------
</pre>

<ul class="org-ul">
<li>Variable: <code class="symbol">skk-dcomp-activate</code>

<p>
この変数の値が <code>Non-nil</code> であれば、カーソル位置に関わらず常に動的補完が
有効となります。値がシンボル <code>eolp</code> であれば、カーソルが行末にあるとき
に限って動的補完が有効となります。値が <code>nil</code> であれば、動的補完機能は無
効となります。
</p>
</li>

<li>Variable: <code class="symbol">skk-dcomp-face</code>

<p>
この変数の値はフェイスであり、このフェイスによって動的に補完された部分が
装飾されます。標準は DarkKhaki です。
</p>
</li>

<li>User Option: <code class="symbol">skk-dcomp-multiple-activate</code>

<p>
<b>XEmacs では動作しません。</b>
</p>

<p>
<code>Non-nil</code> であれば、動的補完の候補をインラインに複数表示 <sup><a id="fnr.59" name="fnr.59" class="footref" href="#fn.59">59</a></sup> します。
</p>

<pre class="example">
---------------- Buffer: foo ------------------
▽ほ*んとう
　ほんとう
　ほかん
　ほっかいどう
　ほうほう
　:
---------------- Buffer: foo ------------------
</pre>

<p>
候補の選択には <code class="key">TAB</code> 又は <code>SHIFT + <span class="key">TAB</span></code> を押します。
また、普通の補完 (<a href="#sec-6-4-1">読みの補完</a>.) と同様に <code>.</code> （ピリオド）と <code>,</code> （コンマ）も
利用できます。
</p>
</li>

<li>Variable: <code class="symbol">skk-dcomp-multiple-rows</code>

<p>
動的補完の候補を複数表示する場合の表示行数。標準は 7。
</p>
</li>

<li>Variable: <code class="symbol">skk-dcomp-multiple-face</code>

<p>
動的補完の複数表示群のフェイス。上記例では「ほ」のフェイス。
</p>
</li>

<li>Variable: <code class="symbol">skk-dcomp-multiple-trailing-face</code>

<p>
動的補完の複数表示郡の補完部分のフェイス。上記例では「んとう」、「かん」
「っかいどう」、「うほう」のフェイス。
</p>
</li>

<li>Variable: <code class="symbol">skk-dcomp-multiple-selected-face</code>

<p>
動的補完の複数表示郡の選択対象のフェイス。上記例では <code class="key">TAB</code> を押すたびに
「ほんとう」、「ほかん」、「ほっかいどう」と選択位置が移ります。その現
在選択位置に適用するフェイスです。
</p>
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-6-5" class="outline-3">
<h3 id="sec-6-5"><span class="section-number-3">6.5</span> 便利な変換、その他の変換</h3>
<div class="outline-text-3" id="text-6-5">
</div><div id="outline-container-sec-6-5-1" class="outline-4">
<h4 id="sec-6-5-1"><span class="section-number-4">6.5.1</span> 単漢字変換</h4>
<div class="outline-text-4" id="text-6-5-1">
<p>
ファイル <code>skk-tankan.el</code> を読み込むことによって単漢字変換が可能となります。
候補は総画数の昇順でソートして表示します。
</p>

<p>
単漢字変換を使うには設定が必要ですが、先に例を見てみましょう。▽モードの
最後の文字に <code>@</code> を付して変換を開始してください。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">T a n @

  ----- Buffer: foo -----
  &#9661;&#12383;&#12435;@*
  ----- Buffer: foo -----

<SPAN CLASS="KEY">SPC</SPAN>

  ----- Buffer: foo -----
  &#9660;&#20025;*
  ----- Buffer: foo -----

  ----- Echo Area -----
  4&#30011;(&#20022;&#37096;3&#30011;)
  ----- Echo Area -----

<SPAN CLASS="KEY">SPC</SPAN>

  ----- Buffer: foo -----
  &#9660;&#21453;*
  ----- Buffer: foo -----

  ----- Echo Area -----
  4&#30011;(&#21448;&#37096;2&#30011;)
  ----- Echo Area -----

<SPAN CLASS="KEY">SPC</SPAN>

  ----- Buffer: foo -----
  &#9660;&#26086;*
  ----- Buffer: foo -----

  ----- Echo Area -----
  5&#30011;(&#26085;&#37096;1&#30011;)
  ----- Echo Area -----

<SPAN CLASS="KEY">SPC</SPAN>

  ----- Buffer: foo -----
  &#9660;&#20294;*
  ----- Buffer: foo -----

  ----- Echo Area -----
  7&#30011;(&#20154;&#37096;5&#30011;)
  ----- Echo Area -----

<SPAN CLASS="KEY">SPC</SPAN>

  ----- Buffer: foo -----
  &#9660;*
  ----- Buffer: foo -----

  ----- Buffer: *&#20505;&#35036;* -----
  A:&#22374;<span style="font-weight: bold; font-style: italic;">;</span><span style="font-weight: bold; font-style: italic;">8&#30011;(&#22303;&#37096;5&#30011;)</span>
  S:&#25285;<span style="font-weight: bold; font-style: italic;">;</span><span style="font-weight: bold; font-style: italic;">8&#30011;(&#25163;&#37096;5&#30011;)</span>
  D:&#21336;<span style="font-weight: bold; font-style: italic;">;</span><span style="font-weight: bold; font-style: italic;">9&#30011;(&#21313;&#37096;7&#30011;)</span>
  F:&#24406;<span style="font-weight: bold; font-style: italic;">;</span><span style="font-weight: bold; font-style: italic;">9&#30011;(&#24401;&#37096;6&#30011;)</span>
  J:&#28845;<span style="font-weight: bold; font-style: italic;">;</span><span style="font-weight: bold; font-style: italic;">9&#30011;(&#28779;&#37096;5&#30011;)</span>
  K:&#30472;<span style="font-weight: bold; font-style: italic;">;</span><span style="font-weight: bold; font-style: italic;">9&#30011;(&#30446;&#37096;4&#30011;)</span>
  L:&#32966;<span style="font-weight: bold; font-style: italic;">;</span><span style="font-weight: bold; font-style: italic;">9&#30011;(&#32905;&#37096;5&#30011;)</span>
  [&#27531;&#12426; 50+++++]
----- Buffer: *&#20505;&#35036;* -----
</pre>
</div>

<p>
以上のとおり、総画数の昇順でソートされた候補が次々に表示されます。
</p>
</div>

<div id="outline-container-sec-6-5-1-1" class="outline-5">
<h5 id="sec-6-5-1-1"><span class="section-number-5">6.5.1.1</span> 検索キーの設定</h5>
<div class="outline-text-5" id="text-6-5-1-1">

<p>
標準設定の検索キーは <code>@</code> です。DDSKK の標準設定ではキー <code>@</code> は
関数 <code>skk-today</code> の実行に割り当てられていますが、DDSKK 14.2 からは特段の
設定なしに▽モードで <code>@</code> の打鍵が可能となりました。
</p>

<ul class="org-ul">
<li>User Option: <code class="symbol">skk-tankan-search-key</code>

<p>
単漢字変換の検索キー。以下は、検索キーを <code>!</code> へと変更する例です。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-tankan-search-key ?!)
</pre>
</div>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-5-1-2" class="outline-5">
<h5 id="sec-6-5-1-2"><span class="section-number-5">6.5.1.2</span> 辞書の設定</h5>
<div class="outline-text-5" id="text-6-5-1-2">

<p>
DDSKK 14.2 からは標準で変数 <code>skk-search-prog-list</code> に <code>skk-tankan-search</code> が
含まれています。DDSKK 14.1 を利用の方、ご自身で <code>skk-search-prog-list</code> を
設定する方は以下の解説を参考にしてください。
</p>

<p>
<code>skk-tankan.el</code> には、漢字の部首とその中での画数のデータのみが入っていま
す。読みのデータは、普通の辞書ファイルを使います。
</p>

<p>
単漢字変換の辞書の設定は、変数 <code>skk-search-prog-list</code> に以下の形式で要素
を追加します。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(skk-tankan-search 'function . args)
</pre>
</div>

<p>
<b>確定変換</b> を併用する場合は、 <code>skk-search-prog-list</code> の先頭の要素は
 <code>skk-search-kakutei-jisyo-file</code> でなければいけませんので、
<code>skk-search-prog-list</code> の２番目の要素に <code>skk-tankan-search</code> を追加します。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">skk-search-prog-list &#12398;&#65298;&#30058;&#30446;&#12398;&#35201;&#32032;&#12395; skk-tankan-search &#12434;&#36861;&#21152;&#12377;&#12427;</span>
(<span style="font-weight: bold;">setq</span> skk-search-prog-list
      (cons (car skk-search-prog-list)
            (cons '(skk-tankan-search 'skk-search-jisyo-file
                                      skk-large-jisyo 10000)
                  (cdr skk-search-prog-list))))
</pre>
</div>

<p>
なお、確定変換を使用しない場合は、 <code>skk-search-prog-list</code> の要素の先頭
が <code>skk-tankan-search</code> でも大丈夫です。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-to-list 'skk-search-prog-list
             '(skk-tankan-search 'skk-search-jisyo-file
                                 skk-large-jisyo 10000))
</pre>
</div>

<p>
<a href="#sec-6-10-3">辞書の検索方法の設定</a>.
</p>
</div>
</div>

<div id="outline-container-sec-6-5-1-3" class="outline-5">
<h5 id="sec-6-5-1-3"><span class="section-number-5">6.5.1.3</span> 総画数による単漢字変換</h5>
<div class="outline-text-5" id="text-6-5-1-3">

<p>
▽モードで総画数を入力して最後に <code>@</code> を付してから変換を開始します。
<code>C-u 総画数 M-x skk-tankan</code> でも可能です。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">Q 1 0 @

  ----- Buffer: foo -----
  &#9661;10@*
  ----- Buffer: foo -----

<SPAN CLASS="KEY">SPC</SPAN>

  ----- Buffer: *&#20505;&#35036;* -----
  A:&#20537;<span style="font-weight: bold; font-style: italic;">;</span><span style="font-weight: bold; font-style: italic;">10&#30011;(&#20154;&#37096;8&#30011;)</span>
  S:&#20518;<span style="font-weight: bold; font-style: italic;">;</span><span style="font-weight: bold; font-style: italic;">10&#30011;(&#20154;&#37096;8&#30011;)</span>
  D:&#20491;<span style="font-weight: bold; font-style: italic;">;</span><span style="font-weight: bold; font-style: italic;">10&#30011;(&#20154;&#37096;8&#30011;)</span>
  F:&#20505;<span style="font-weight: bold; font-style: italic;">;</span><span style="font-weight: bold; font-style: italic;">10&#30011;(&#20154;&#37096;8&#30011;)</span>
  J:&#20502;<span style="font-weight: bold; font-style: italic;">;</span><span style="font-weight: bold; font-style: italic;">10&#30011;(&#20154;&#37096;8&#30011;)</span>
  K:&#20511;<span style="font-weight: bold; font-style: italic;">;</span><span style="font-weight: bold; font-style: italic;">10&#30011;(&#20154;&#37096;8&#30011;)</span>
  L:&#20462;<span style="font-weight: bold; font-style: italic;">;</span><span style="font-weight: bold; font-style: italic;">10&#30011;(&#20154;&#37096;8&#30011;)</span>
  [&#27531;&#12426; 532+++++++]
  ----- Buffer: *&#20505;&#35036;* -----
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-6-5-1-4" class="outline-5">
<h5 id="sec-6-5-1-4"><span class="section-number-5">6.5.1.4</span> 部首による単漢字変換</h5>
<div class="outline-text-5" id="text-6-5-1-4">

<p>
▽モードで <code>@</code> を２つ重ねて変換を開始すると、部首による単漢字変換が
できます。 <code>M-x skk-tankan</code> でも可能です。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">Q @ @

  ----- Buffer: foo -----
  &#9661;@@*
  ----- Buffer: foo -----

<SPAN CLASS="KEY">SPC</SPAN>

  ------ Minibuffer -------
  &#37096;&#39318;&#12434;&#30058;&#21495;&#12391;&#36984;&#25246;&#65288;TAB&#12391;&#19968;&#35239;&#34920;&#31034;&#65289;: *
  ------ Minibuffer -------

<SPAN CLASS="KEY">TAB</SPAN>

  ------ *Completions* -------
  Click &lt;mouse-2&gt; on a completion to select it.
  In this buffer, type <SPAN CLASS="KEY">RET</SPAN> to select the completion near point.

  Possible completions are:
  001 &#19968; (&#12356;&#12385;)                      002 &#65372; (&#12412;&#12358;&#12289;&#12383;&#12390;&#12412;&#12358;)
  003 &#20022; (&#12390;&#12435;)                      004 &#20031; (&#12398;)
  005 &#20057; (&#12362;&#12388;)                      006 &#20101; (&#12399;&#12397;&#12412;&#12358;)
   &#65306;                                 &#65306;
  ------ *Completions* -------

0 1 8 <SPAN CLASS="KEY">RET</SPAN>
&#27880;) <span style="font-weight: bold;">M-v &#12398;&#25171;&#37749;&#12391;&#12289;&#12459;&#12540;&#12477;&#12523;&#12434; *Completions* &#12496;&#12483;&#12501;&#12449;&#12408;&#31227;&#12377;&#12371;&#12392;&#12418;&#12391;&#12365;&#12414;&#12377;&#12290;</span>

  ----- Buffer: *&#20505;&#35036;* -----
  A:&#20999;<span style="font-weight: bold; font-style: italic;">;</span><span style="font-weight: bold; font-style: italic;">4&#30011;(&#20992;&#37096;2&#30011;)</span>
  S:&#21000;<span style="font-weight: bold; font-style: italic;">;</span><span style="font-weight: bold; font-style: italic;">4&#30011;(&#20992;&#37096;2&#30011;)</span>
  D:&#21002;<span style="font-weight: bold; font-style: italic;">;</span><span style="font-weight: bold; font-style: italic;">5&#30011;(&#20992;&#37096;3&#30011;)</span>
  F:&#21003;<span style="font-weight: bold; font-style: italic;">;</span><span style="font-weight: bold; font-style: italic;">5&#30011;(&#20992;&#37096;3&#30011;)</span>
  J:&#21006;<span style="font-weight: bold; font-style: italic;">;</span><span style="font-weight: bold; font-style: italic;">6&#30011;(&#20992;&#37096;4&#30011;)</span>
  K:&#21009;<span style="font-weight: bold; font-style: italic;">;</span><span style="font-weight: bold; font-style: italic;">6&#30011;(&#20992;&#37096;4&#30011;)</span>
  L:&#21012;<span style="font-weight: bold; font-style: italic;">;</span><span style="font-weight: bold; font-style: italic;">6&#30011;(&#20992;&#37096;4&#30011;)</span>
  [&#27531;&#12426; 51+++++++]
  ----- Buffer: *&#20505;&#35036;* -----
</pre>
</div>

<ul class="org-ul">
<li>Variable: <code class="symbol">skk-tankan-face</code>

<p>
<code>M-x skk-tankan</code> を実行したときに表示される <b>単漢字バッファ</b> で使用する
フェイスです。
</p>
</li>

<li>Variable: <code class="symbol">skk-tankan-radical-name-face</code>

<p>
部首の読みに適用するフェイスです。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-5-1-5" class="outline-5">
<h5 id="sec-6-5-1-5"><span class="section-number-5">6.5.1.5</span> 部首の読みによる単漢字変換</h5>
<div class="outline-text-5" id="text-6-5-1-5">

<p>
直前の小々節「部首による単漢字変換」にて、部首番号を入力するプロンプトで
単に <code class="key">RET</code> を打鍵すると、部首の読みを入力するプロンプトに替わります。
</p>

<pre class="example">
  ------ Minibuffer -------
  部首を読みで選択（TABで一覧表示）: *
  ------ Minibuffer -------

<SPAN CLASS="KEY">TAB</SPAN>

  ------ Completion List -------
  In this buffer, type <SPAN CLASS="KEY">RET</SPAN> to select the completion near point.

  Possible completions are:
  あいくち         (021) 匕          あお             (174) 青
  あか             (155) 赤          あくび           (076) 欠
  あさ             (200) 麻          あさかんむり     (200) 麻
   ：                                 ：
  ------ Completion List -------
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-6-5-2" class="outline-4">
<h4 id="sec-6-5-2"><span class="section-number-4">6.5.2</span> 候補の絞り込み</h4>
<div class="outline-text-4" id="text-6-5-2">
<p>
<code>skk-hint.el</code> は、２つの読みの積集合みたいなものを取ることによって候補の
絞り込みを行うプログラムです。インストールは <code>~/.skk</code> に以下を記入します。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">skk-hint</span>)
</pre>
</div>

<p>
例えば、読み「かんどう」に対する変換は L 辞書によると
</p>

<pre class="example">
感動、勘当、完動、間道、官道、貫道
</pre>

<p>
と複数の候補があります。一方、これに「あいだ」という「他の読み」（ヒント）
を与えると候補は「間道」に一意に決まります。
</p>

<p>
ヒントは <code>;</code> に続けて入力します。
</p>

<pre class="example">
K a n d o u ; a i d a   ※ ; 自体は表示されません。

  ----- Buffer: foo -----
  ▽かんどうあいだ
  ----- Buffer: foo -----

<SPAN CLASS="KEY">SPC</SPAN>

  ----- Buffer: foo -----
  ▼間道
  ----- Buffer: foo -----
</pre>

<p>
<code>skk-hint.el</code> は、２つの読みの厳密な積集合を取っているわけではなく、通常
の変換候補のなかでヒントとして与えられた読みを含んだ漢字を持つものに候補
を絞ります。この実例として「感動」と「感圧」を挙げます。
</p>

<pre class="example">
K a n d o u ; k a n n a t u

  ----- Buffer: foo -----
  ▽かんどうかんあつ
  ----- Buffer: foo -----

<SPAN CLASS="KEY">SPC</SPAN>

  ----- Buffer: foo -----
  ▼感動
  ----- Buffer: foo -----
</pre>

<p>
<code>skk-hint.el</code> は単漢字の候補がたくさんある場合に、そこから候補を絞りこむ
手段としても非常に有効です。例えば
</p>

<pre class="example">
▽わ*
</pre>

<p>
を変換すると、輪、環、話、和、羽、&#x2026; と大量に候補が出てきます。この中か
ら「和」を選びたいとします。普通に変換していてもそのうち「和」が表示され
ますが、これを <code>W a ; h e i w a</code> と入力し変換すると、「▼へいわ」の候補で
ある「平和」に含まれる
</p>

<pre class="example">
▼和*
</pre>

<p>
が唯一の候補となります。
</p>

<pre class="example">
W a ; h e i w a

  ----- Buffer: foo -----
  ▽わへいわ*
  ----- Buffer: foo -----

<SPAN CLASS="KEY">SPC</SPAN>

  ----- Buffer: foo -----
  ▼和*
  ----- Buffer: foo -----
</pre>

<ul class="org-ul">
<li>User Option: <code class="symbol">skk-hint-start-char</code>

<p>
ヒント変換を開始するキーを character で指定します。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-5-3" class="outline-4">
<h4 id="sec-6-5-3"><span class="section-number-4">6.5.3</span> 接頭辞・接尾辞</h4>
<div class="outline-text-4" id="text-6-5-3">
<p>
接頭辞 (prefix)、接尾辞 (suffix) の入力のために特別な方法が用意されていま
す。たとえば、「し」の候補は沢山あり、「し」から「氏」を変換するのは、そ
のままでは効率が悪いです。接尾辞の「し」ならば、「氏」や「市」が優先され
るでしょう。
</p>

<p>
接頭辞・接尾辞は、辞書の中では <code>&gt;</code> などで示されます。
</p>

<pre class="example">
&gt;し /氏/
</pre>

<p>
というエントリがあるとき、「小林氏」を接尾辞入力を用いて、以下のように入
力することができます。
</p>

<pre class="example">
K o b a y a s h i

  ------ Buffer: foo ------
  ▽こばやし*
  ------ Buffer: foo ------

<SPAN CLASS="KEY">SPC</SPAN>

  ------ Buffer: foo ------
  ▼小林*
  ------ Buffer: foo ------

&gt;

  ------ Buffer: foo ------
  小林▽&gt;*
  ------ Buffer: foo ------

s i

  ------ Buffer: foo ------
  小林▽&gt;し*
  ------ Buffer: foo ------

<SPAN CLASS="KEY">SPC</SPAN>

  ------ Buffer: foo ------
  小林▼氏*
  ------ Buffer: foo ------


C-j

  ------ Buffer: foo ------
  小林氏*
  ------ Buffer: foo ------
</pre>

<p>
接頭辞も同様です。辞書に
</p>

<pre class="example">
ちょう&gt; /超/
</pre>

<p>
というエントリがあるとき、「超大型」を接頭辞入力を用いて、以下のように入
力することができます。
</p>

<pre class="example">
T y o u

  ------ Buffer: foo ------
  ▽ちょう*
  ------ Buffer: foo ------

&gt;

  ------ Buffer: foo ------
  ▼超*
  ------ Buffer: foo ------

O o g a t a

  ------ Buffer: foo ------
  超▽おおがた*
  ------ Buffer: foo ------

<SPAN CLASS="KEY">SPC</SPAN>

  ------ Buffer: foo ------
  超▼大型*
  ------ Buffer: foo ------

C-j

  ------ Buffer: foo ------
  超大型*
  ------ Buffer: foo ------
</pre>

<p>
キー <code>&gt;</code> を押しただけで <code class="key">SPC</code> が押されたかのように変換されます。他の接頭
辞を選びたいときは <code class="key">SPC</code> を押して下さい。
</p>

<ul class="org-ul">
<li>Variable: <code class="symbol">skk-special-midashi-char-list</code>

<p>
▽モードまたは▼モードにおいて、この変数の値に含まれる文字の入力があっ
た場合、接頭辞・接尾辞の入力を開始します。この変数の標準設定は、
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(?&gt; ?&lt; ??)
</pre>
</div>

<p>
です。つまり、 <code>&gt;</code> と <code>&lt;</code> と <code>?</code> を入力した時に接頭辞・接尾辞入力を行い
ます。 <code>?</code> を入力したときに接頭辞・接尾辞入力を行わない場合は <code>?</code> を外
して
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-special-midashi-char-list '(?&gt; ?&lt;))
</pre>
</div>

<p>
とします。L 辞書の接頭・接尾辞は、昔は <code>&lt;</code> と <code>?</code> も使われていましたが、
現在は <code>&gt;</code> に統一されています。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-5-4" class="outline-4">
<h4 id="sec-6-5-4"><span class="section-number-4">6.5.4</span> 数値変換</h4>
<div class="outline-text-4" id="text-6-5-4">
<p>
DDSKK は <b>数字を含む見出し語</b> を様々な候補に変換することができます。例え
ば、見出し語「だい12かい」を変換すると「第１２回」、「第一二回」、「第十
二回」といった候補を挙げます。
</p>

<p>
この節では、このような候補を辞書に登録する方法を説明します。基本は、数字
の部分を <code>#</code> で置き替えることです。辞書 <code>SKK-JISYO.L</code> のエントリーから具
体例を見てみましょう。
</p>

<pre class="example">
だい#かい /第#1回/第#0回/第#2回/第#3回/第 #0 回/
</pre>

<p>
「だい12かい」のような <b>数字を含む見出し語</b> を変換した場合、見出し語の中
の数字の部分は自動的に <code>#</code> に置き換えられますので、辞書エントリーの左辺（
つまり見出し語）である "<code>だい#かい</code>" にマッチします。
</p>

<p>
辞書エントリーの右辺の <code>#1</code> 、 <code>#2</code> などは「どのように数字を加工するか」
のタイプを表します。以下、各タイプについて説明します。
</p>

<ul class="org-ul">
<li><code>#0</code>

<p>
無変換。入力されたアスキー文字をそのまま出力します。例えば、「第12回」
のような変換を得るために使います。
</p>
</li>

<li><code>#1</code>

<p>
全角文字の数字。 <code>12</code> を「１２」に変換します。
</p>
</li>

<li><code>#2</code>

<p>
漢数字で位取りあり。 <code>1024</code> を「一〇二四」に変換します。
</p>
</li>

<li><code>#3</code>

<p>
漢数字で位取りなし。 <code>1024</code> を「千二十四」に変換します。
</p>
</li>

<li><code>#4</code>

<p>
数値再変換。見出し語中の数字そのもの <sup><a id="fnr.60" name="fnr.60" class="footref" href="#fn.60">60</a></sup> をキーとして辞書を再検索し、 <code>#4</code> の
部分を再検索の結果の文字列で入れ替えます。これについては後で例を挙げて
説明します。
</p>
</li>

<li><code>#5</code>

<p>
小切手や手形の金額記入の際用いられる表記で変換します。例えば、 <code>1995</code> を
「壱阡九百九拾伍」に変換します。これを大字と言います。
</p>
</li>

<li><code>#8</code>

<p>
桁区切り。 <code>1234567</code> を <code>1,234,567</code> に変換します。
</p>
</li>

<li><code>#9</code>

<p>
将棋の棋譜の入力用。「全角数字＋漢数字」に変換します。これについては後
で例を挙げて説明します。
</p>
</li>
</ul>

<p>
以下にいくつか例を示します。辞書に
</p>

<pre class="example">
# /#3/
</pre>

<p>
というエントリがあるときに、
</p>

<pre class="example">
Q 1 0 0 2 0 0 3 0 0 4 0 0 5 0 0 <SPAN CLASS="KEY">SPC</SPAN>
  または
/ 1 0 0 2 0 0 3 0 0 4 0 0 5 0 0 <SPAN CLASS="KEY">SPC</SPAN>
</pre>

<p>
とキー入力 <sup><a id="fnr.61" name="fnr.61" class="footref" href="#fn.61">61</a></sup> すれば「百兆二千三億四十万五百」と変換されます。
</p>

<p>
辞書に
</p>

<pre class="example">
#m#d /#0月#0日/
</pre>

<p>
というエントリがあるときに <code>/ 2 m 2 5 d <SPAN CLASS="KEY">SPC</SPAN></code> と入力 <sup><a id="fnr.62" name="fnr.62" class="footref" href="#fn.62">62</a></sup> すれ
ば「2月25日」と変換されます。
</p>

<p>
辞書に
</p>

<pre class="example">
#kin /#9金/
</pre>

<p>
というエントリがあるときに <code>/ 3 4 k i n <SPAN CLASS="KEY">SPC</SPAN></code> と入力すれば「３四金」と変換
されます。
</p>

<p>
辞書に
</p>

<pre class="example">
p# /#4/
125 /東京都葛飾区/
</pre>

<p>
というエントリがあるときに <code>/ p 1 2 5 <SPAN CLASS="KEY">SPC</SPAN></code> と入力すれば、見出し語 <code>p125</code> の
候補が <code>#4</code> なので、見出し語の数字部分の <code>125</code> に対し辞書が再検索さ
れ「東京都葛飾区」と変換されます。
</p>

<p>
最後に、実際に登録する例をひとつ挙げます。「２月２５日」を得るために、
</p>

<pre class="example">
Q 2 g a t u 2 5 n i t i <SPAN CLASS="KEY">SPC</SPAN>
</pre>

<p>
とキー入力したときに、辞書に見出し語
</p>

<pre class="example">
#がつ#にち /#1月#1日/
</pre>

<p>
がないときは、辞書登録モードのプロンプトは <code>「#がつ#にち」</code> となります。
全角数字のタイプは <code>#1</code> なので <code>「#1月#1日」</code> をミニバッファで作り登録し
ます。
</p>

<p>
タイプを覚えている必要はありません。ちゃんと、ウィンドウが開かれて説明が
表示されます。
</p>

<ul class="org-ul">
<li>User Option: <code class="symbol">skk-num-convert-float</code>

<p>
この変数の値を <code>non-nil</code> に設定すると、浮動小数点数を使った見出し語に対
応して数値変換を行います。ただし、辞書において
</p>

<pre class="example">
#.# /#1．#1/#0月#0日/
</pre>

<p>
などの見出し語が使用できなくなります。
</p>
</li>

<li>User Option: <code class="symbol">skk-show-num-type-info</code>

<p>
<code>Non-nil</code> であれば、辞書登録モードに入るのと同時に変換タイプの案内を表
示します。標準設定は <code>t</code> です。
</p>
</li>

<li>Variable: <code class="symbol">skk-num-grouping-separator</code>

<p>
タイプ <code>#8</code> で使用する記号。標準設定は <code>,</code> 。
</p>
</li>

<li>Variable: <code class="symbol">skk-num-grouping-places</code>

<p>
タイプ <code>#8</code> について、何桁毎に区切るのかを数値で指定する。標準設定は 3。
</p>
</li>

<li>User Option: <code class="symbol">skk-use-numeric-conversion</code>

<p>
この変数を <code>nil</code> に設定すると、本節で説明した数値変換の機能を全て無効に
します。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-5-5" class="outline-4">
<h4 id="sec-6-5-5"><span class="section-number-4">6.5.5</span> アスキー文字を見出し語とした変換</h4>
<div class="outline-text-4" id="text-6-5-5">
<p>
かなモードで <code>/</code> を打鍵すると <b>SKK abbrev モード</b> に入り、以後の入力はアス
キー文字になります。普通に <code class="key">SPC</code> を押すと、その見出し語に係る変換が得られ
ます。
</p>

<p>
仮に、辞書に
</p>

<pre class="example">
is /インクリメンタル・サーチ/
</pre>

<p>
というエントリがあるとして、以下に例を示します。
</p>

<pre class="example">
/

  ------ Buffer: foo ------
  ▽*
  ------ Buffer: foo ------

i s

  ------ Buffer: foo ------
  ▽is*
  ------ Buffer: foo ------

<SPAN CLASS="KEY">SPC</SPAN>

  ------ Buffer: foo ------
  ▼インクリメンタル・サーチ*
  ------ Buffer: foo ------

C-j

  ------ Buffer: foo ------
  インクリメンタル・サーチ*
  ------ Buffer: foo ------
</pre>

<p>
候補を確定すると SKK abbrev モードを抜けて かなモード に戻ります。
</p>

<p>
SKK abbrve モードで使われる辞書は、普通のかな漢字変換と同じです。見出し語
がアスキー文字で書かれているだけで、特殊な点はありません。
</p>

<p>
上記の例において <code class="key">SPC</code> の代わりに <code>C-q</code> を打鍵することで、入力したアスキー
文字をそのまま全角アルファベットに変換することもできます。
</p>

<p>
<a href="#sec-6-3-2">全英文字の入力</a>.
</p>

<p>
なお、SKK abbrev モードにおいても <code class="key">TAB</code> による「見出し語の補完」 (<a href="#sec-6-4">補完</a>.) を
行うことができます。
</p>
</div>
</div>

<div id="outline-container-sec-6-5-6" class="outline-4">
<h4 id="sec-6-5-6"><span class="section-number-4">6.5.6</span> 今日の日付の入力</h4>
<div class="outline-text-4" id="text-6-5-6">
<p>
かなモード／カナモードで <code>@</code> を入力すれば、今日の日付が入力されます。
</p>

<p>
日付の形式は以下の変数により決定されます。
</p>

<ul class="org-ul">
<li>User Option: <code class="symbol">skk-date-ad</code>

<p>
この変数の値が <code>non-nil</code> であれば西暦で、 <code>nil</code> であれば元号で表示しま
す。標準設定は <code>nil</code> です。
</p>
</li>

<li>Variable: <code class="symbol">skk-number-style</code>

<p>
この変数の値は以下のように解釈されます。標準設定は <code>1</code> です。
</p>

<ul class="org-ul">
<li><code>0</code> or <code>nil</code>

<p>
ASCII 数字。「1996年7月21日(日)」のようになります。
</p>
</li>

<li><code>1</code> or <code>t</code>

<p>
全角数字。「１９９６年７月２１日(日)」のようになります。
</p>
</li>

<li><code>2</code>

<p>
漢数字(位取)。「一九九六年七月二一日(日)」のようになります。
</p>
</li>

<li><code>3</code>

<p>
漢数字。「千九百九十六年七月二十一日(日)」のようになります。
</p>
</li>
</ul>
</li>
</ul>

<p>
上記の「1996年」、「１９９６年」、「一九九六年」の部分は、変数 <code>skk-date-ad</code> の
値が <code>nil</code> であれば「平成8年」のように元号で表示されます。
</p>

<p>
辞書 <code>SKK-JISYO.lisp</code> には、見出し語 <code>today</code> の候補として <code>skk-date-ad</code> と <code>skk-number-style</code> の
全ての組み合わせがプログラム実行変換機能を用いて登録されています。従って、
<code>/ t o d a y <SPAN CLASS="KEY">SPC</SPAN></code> と入力すると、今日の日付が上記の形式で順次候補として表
示されます。
</p>

<p>
関数 <code>skk-relative-date</code> を利用すると、昨日、一昨日、明後日など任意の日付
を求めることができます。詳細は <code>skk-gadget.el</code> のコメントを参照してくださ
い。
</p>

<p>
なお、 <code>@</code> の打鍵で日付を挿入するのではなく、文字どおり <code>@</code> を挿入したい
場合は次のとおり。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-rom-kana-rule-list
      (append skk-rom-kana-rule-list
              '((<span style="font-style: italic;">"@"</span> nil <span style="font-style: italic;">"@"</span>))))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-6-5-7" class="outline-4">
<h4 id="sec-6-5-7"><span class="section-number-4">6.5.7</span> プログラム実行変換</h4>
<div class="outline-text-4" id="text-6-5-7">
<p>
辞書の候補に Emacs Lisp のプログラムが書いてあれば、そのプログラムを Emacs に
実行させ、返り値をカレントバッファに挿入します。これを <b>プログラム実行変換</b> と
呼んでいます。例えば、辞書に
</p>

<pre class="example">
now /(current-time-string)/
</pre>

<p>
というエントリがあるとします。このとき <code>/ n o w <SPAN CLASS="KEY">SPC</SPAN></code> とキー入力すれば、現
在のバッファに関数 <code>current-time-string</code> の返り値である
</p>

<pre class="example">
Sun Jul 21 06:40:34 1996
</pre>

<p>
のような文字列が挿入されます。
</p>

<p>
ここで、プログラムの返り値は文字列である必要があります。また、プログラム
実行変換の辞書登録は通常の単語と同様に行うことができますが、その中に改行
を含まないように書く必要 <sup><a id="fnr.63" name="fnr.63" class="footref" href="#fn.63">63</a></sup> があります。
</p>

<p>
今日の日付の入力 <sup><a id="fnr.64" name="fnr.64" class="footref" href="#fn.64">64</a></sup> で説明した <code>today</code> の辞書エントリは、実際は下
記のようなプログラムを候補にもっています。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">today /(<span style="font-weight: bold;">let</span> ((skk-date-ad) (skk-number-style t)) (skk-today))/.../
</pre>
</div>

<p>
<code>skk-gadget.el</code> には、西暦／元号変換や簡単な計算などプログラム実行変換用
の関数が集められています。
</p>

<ul class="org-ul">
<li>Function: <code class="symbol">skk-calc operator</code>

<p>
<code>skk-calc</code> は、引数をひとつ取り、見出し語の数字に対しその演算を行う簡単
な計算プログラムです。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">skk-calc</span> (operator)
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">2&#12388;&#12398;&#24341;&#25968;&#12434;&#21462;&#12387;&#12390; operator &#12398;&#35336;&#31639;&#12434;&#12377;&#12427;&#12290;</span>
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#27880;&#24847;: '/ &#12399;&#24341;&#25968;&#12392;&#12375;&#12390;&#28193;&#12379;&#12394;&#12356;&#12398;&#12391; (defalias 'div '/) &#12394;&#12393;&#12392;&#12375;&#12289;&#21029;&#12398;&#24418;&#12391;</span>
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">skk-calc &#12395;&#28193;&#12377;&#12290;</span>
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#36766;&#26360;&#12456;&#12531;&#12488;&#12522;&#12398;&#20363; -&gt; #*# /(skk-calc '*)/</span>
  (number-to-string (apply operator
                           (mapcar 'string-to-number
                                   skk-num-list))))
</pre>
</div>

<p>
この関数を実際にプログラム実行変換で利用するには、辞書に以下のようなエ
ントリを追加します <sup><a id="fnr.65" name="fnr.65" class="footref" href="#fn.65">65</a></sup> 。
</p>

<pre class="example">
#*# /(skk-calc '*)/
</pre>

<p>
<code>Q 1 1 1 * 4 5 <SPAN CLASS="KEY">SPC</SPAN></code> とキー入力します。ここで <code>111</code> と <code>45</code> の２つの数字
は、変換時に <code>("111" "45")</code> のような文字列のリストにまとめられ、
変数 <code>skk-num-list</code> の値として保存されます。次に関数 <code>skk-calc</code> が呼ば
れます。この中で <code>skk-num-list</code> の各要素に対し演算を行うため、各要素は
数に変換されます。その上で <code>skk-calc</code> に与えられた引数（この場合は <code>*</code> ）
を演算子として演算を行います。
</p>
</li>

<li>Function: <code class="symbol">skk-gadget-units-conversion 基準単位 数値 変換単位</code>

<p>
数値について、基準単位から変換単位への変換を行います。
</p>

<pre class="example">
/ 1 3 m i l e

  ------ Buffer: foo ------
  ▽13mile*
  ------ Buffer: foo ------

<SPAN CLASS="KEY">SPC</SPAN>

  ------ Buffer: foo ------
  ▼20.9209km*
  ------ Buffer: foo ------

<SPAN CLASS="KEY">RET</SPAN>

  ------ Buffer: foo ------
  20.9209km*
  ------ Buffer: foo ------
</pre>

<p>
単位変換の情報は、変数 <code>skk-units-alist</code> で定義されています。
</p>
</li>

<li>Variable: <code class="symbol">skk-units-alist</code>

<p>
この変数は以下の形式の連想リストです。
</p>

<pre class="example">
(基準となる単位 (変換する単位 . 変換時の倍率)
                (… . …))
</pre>

<p>
関数 <code>skk-gadget-units-conversion</code> で利用されています。標準設定では、
以下の単位変換の情報を定義しています。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-style: italic;">"mile"</span> (<span style="font-style: italic;">"km"</span> . 1.6093)
        (<span style="font-style: italic;">"yard"</span> . 1760))

(<span style="font-style: italic;">"yard"</span> (<span style="font-style: italic;">"feet"</span> . 3)
        (<span style="font-style: italic;">"cm"</span> . 91.44))

(<span style="font-style: italic;">"feet"</span> (<span style="font-style: italic;">"inch"</span> . 12)
        (<span style="font-style: italic;">"cm"</span> . 30.48))

(<span style="font-style: italic;">"inch"</span> (<span style="font-style: italic;">"feet"</span> . 0.5)
        (<span style="font-style: italic;">"cm"</span> . 2.54))
</pre>
</div>
</li>

<li>Function: <code class="symbol"> skk-relative-date pp-function format and-time &amp;key (yy 0) (mm 0) (dd 0)</code>

<p>
<code>skk-current-date</code> の拡張版。 <code>PP-FUNCTION</code> , <code>FORMAT</code> , <code>AND-TIME</code> の
意味は <code>skk-current-date</code> の docstring を参照のこと。
キーワード変数 <code>:yy</code> , <code>:mm</code> , <code>:dd</code> に正または負の数値を指定することで
明日、明後日、一昨日などの日付を求めることができる。詳細は <code>skk-gadget.el</code> の
コメントを参照のこと。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-5-8" class="outline-4">
<h4 id="sec-6-5-8"><span class="section-number-4">6.5.8</span> 空白・改行・タブを含んだ見出し語の変換</h4>
<div class="outline-text-4" id="text-6-5-8">
<p>
変換の際、見出し語の中の空白、改行、タブは無視されます。
</p>

<pre class="example">
  ---------------- Buffer: foo ------------------
  ▽じんじょうしょ
  うがっこう*
  ---------------- Buffer: foo ------------------

<SPAN CLASS="KEY">SPC</SPAN>

  ---------------- Buffer: foo ------------------
  ▼尋常小学校*
  ---------------- Buffer: foo ------------------
</pre>

<p>
オートフィルモードで折り返された文字列に対し、折り返された状
態のまま変換することもできます。
</p>

<pre class="example">
  ---------------- Buffer: foo ------------------
  仮名漢字変換プログラムをさ
  くせいしました。*
  ---------------- Buffer: foo ------------------

C-u 10 C-b Q

  ---------------- Buffer: foo ------------------
  仮名漢字変換プログラムを*さ
  くせいしました。
  ---------------- Buffer: foo ------------------

C-u 5 C-f

  ---------------- Buffer: foo ------------------
  仮名漢字変換プログラムを▽さ
  くせい*しました。
---------------- Buffer: foo ------------------

<SPAN CLASS="KEY">SPC</SPAN>

  ---------------- Buffer: foo ------------------
  仮名漢字変換プログラムを▼作成*しました。
  ---------------- Buffer: foo ------------------
</pre>

<p>
ここでは改行を越えて見出し語を探し、変換する例を示しました。同様に、空白、
タブ文字を中間に含む文字列に対しても変換を行うことができます。
</p>

<ul class="org-ul">
<li>User Option: <code class="symbol">skk-allow-spaces-newlines-and-tabs</code>

<p>
この変数を <code>nil</code> に設定すると、本節で説明したような２行以上にまたがる文
字列に対する変換を禁止します。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-5-9" class="outline-4">
<h4 id="sec-6-5-9"><span class="section-number-4">6.5.9</span> カタカナ変換</h4>
<div class="outline-text-4" id="text-6-5-9">
<ul class="org-ul">
<li>Variable: <code class="symbol">skk-search-katakana</code>

<p>
通常、SKK でカタカナ語を入力するには、
</p>

<ul class="org-ul">
<li><code>q</code> でカナモードに移ってからカタカナを入力する
</li>

<li>▽モードで <code>q</code> によりカタカナへ変換する <sup><a id="fnr.66" name="fnr.66" class="footref" href="#fn.66">66</a></sup>
</li>
</ul>
<p>
のどちらかです。これらの方法は手軽ですが、個人辞書に登録されないため見
出し語の補完候補にも現れず、何度でも入力しなければなりません。
</p>

<p>
そこで、ここに紹介する方法ではカタカナ語が普通の変換候補として現れ、個
人辞書にも登録されます。設定するには以下を <code>~/.skk</code> に記述します <sup><a id="fnr.67" name="fnr.67" class="footref" href="#fn.67">67</a></sup> 。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-search-katakana t)
</pre>
</div>

<p>
また、値をシンボル <code>jisx0201-kana</code> とすると、カタカナ候補に加え半角カタ
カナ候補も変換候補に現れます。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-search-katakana 'jisx0201-kana)
</pre>
</div>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-5-10" class="outline-4">
<h4 id="sec-6-5-10"><span class="section-number-4">6.5.10</span> サ変動詞変換</h4>
<div class="outline-text-4" id="text-6-5-10">
<ul class="org-ul">
<li>Variable: <code class="symbol">skk-search-sagyo-henkaku</code>

<p>
通常、SKK では諸般の事情によりサ行変格活用の動詞は送りなし変換をする前
提になっています。このことは共有辞書のメンテナンスにおける便宜上やむを
えないのですが、個人辞書が育たない（サ変動詞と名詞の区別ができない）と
いう弱点もあります。
</p>

<p>
<a href="#sec-5-3-4-3">サ変動詞の辞書登録に関する注意</a>.
</p>

<p>
しかし、ここに紹介する方法では任意の送りなし候補を利用してサ行の送りプ
レフィックスに限定して送りあり変換が可能になり、個人辞書を育てることが
可能になります。設定するには以下を <code>~/.skk</code> に記述します <sup><a id="fnr.68" name="fnr.68" class="footref" href="#fn.68">68</a></sup> 。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-search-sagyo-henkaku t)
</pre>
</div>

<p>
例えば「お茶する」の変換は以下のように変化します。
</p>

<ul class="org-ul">
<li>従来 … <code>O c h a <SPAN CLASS="KEY">SPC</SPAN> s u r u</code>
</li>

<li>サ変 … <code>O c h a S u r u</code>
</li>
</ul>
<p>
変数の値をシンボル <code>anything</code> に設定すると、サ行に限らず任意の送り仮名
を許可し、送りあり変換をします。これにより、送りあり変換の利用範囲を形
容詞・動詞の変換のみならず、あらゆるひらがな開始点の指定に拡張すること
ができます。
</p>

<p>
このサ変動詞送りあり変換機能は、カタカナ変換機能 (<a href="#sec-6-5-9">カタカナ変換</a>.) と
組み合わせるとさらに有効です。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-5-11" class="outline-4">
<h4 id="sec-6-5-11"><span class="section-number-4">6.5.11</span> 異体字へ変換する</h4>
<div class="outline-text-4" id="text-6-5-11">
<p>
「辺」（42区53点）の異体字である「邊」（78区20点）や「邉」（78区21点）を
入力したいときがあります <sup><a id="fnr.69" name="fnr.69" class="footref" href="#fn.69">69</a></sup> 。
</p>

<pre class="example">
  ---- Buffer: foo ----
  *辺
  ---- Buffer: foo ----

Q

  ---- Buffer: foo ----
  ▽*辺
  ---- Buffer: foo ----

C-f

  ---- Buffer: foo ----
  ▽辺*
  ---- Buffer: foo ----

<SPAN CLASS="KEY">SPC</SPAN>

  ---- Buffer: foo ----
  ▼邊*
  ---- Buffer: foo ----

<SPAN CLASS="KEY">SPC</SPAN>

  ---- Buffer: foo ----
  ▼邉*
  ---- Buffer: foo ----
</pre>

<ul class="org-ul">
<li>Variable: <code class="symbol">skk-itaiji-jisyo</code>

<p>
辞書ファイル <code>SKK-JISYO.itaiji</code> 又は <code>SKK-JISYO.itaiji.JIS3_4</code> へ
のパスを指定する。他の辞書ファイルと異なり、この２つの辞書ファイルは見
出し語が漢字です。
</p>
</li>
</ul>


<ul class="org-ul">
<li>Function: <code class="symbol">skk-search-itaiji</code>

<p>
not documented.
</p>

<p>
<a href="http://mail.ring.gr.jp/skk/200303/msg00071.html">http://mail.ring.gr.jp/skk/200303/msg00071.html</a>
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-5-12" class="outline-4">
<h4 id="sec-6-5-12"><span class="section-number-4">6.5.12</span> ファンクションキーの使い方</h4>
<div class="outline-text-4" id="text-6-5-12">
<ul class="org-ul">
<li>Variable: <code class="symbol">skk-j-mode-function-key-usage</code>

<p>
シンボル <code>conversion</code> ならば、 <code>skk-search-prog-list-1</code> 〜 <code>skk-search-prog-list-9</code> お
よび <code>skk-search-prog-list-0</code> を実行するよう自動設定します。これらのプ
ログラムは▽モード限定でファンクションキー ( <code>[F1]</code> 〜 <code>[F10]</code> ) に割り
当てられます。 <code>[F5]</code> 〜 <code>[F10]</code> については本オプションの設定により自動
的に割り当てられます。これらの割り当てはユーザオプション <code>skk-verbose</code> を
設定するとエコーエリアに表示されるようになります。
</p>

<p>
<a href="#sec-6-15-2">冗長な案内メッセージの表示</a>.
</p>

<ul class="org-ul">
<li><code>[F5]</code>  … 単漢字
</li>
<li><code>[F6]</code>  … 無変換
</li>
<li><code>[F7]</code>  … カタカナ
</li>
<li><code>[F8]</code>  … 半角カナ
</li>
<li><code>[F9]</code>  … 全角ローマ
</li>
<li><code>[F10]</code> … ローマ
</li>
</ul>
<p>
シンボル <code>kanagaki</code> ならば、かなキーボード入力用に自動設定します。
<code>nil</code> ならば、自動設定しません。
</p>
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-6-6" class="outline-3">
<h3 id="sec-6-6"><span class="section-number-3">6.6</span> キー設定</h3>
<div class="outline-text-3" id="text-6-6">
</div><div id="outline-container-sec-6-6-1" class="outline-4">
<h4 id="sec-6-6-1"><span class="section-number-4">6.6.1</span> かなモード／カナモードのキー設定</h4>
<div class="outline-text-4" id="text-6-6-1">
</div><div id="outline-container-sec-6-6-1-1" class="outline-5">
<h5 id="sec-6-6-1-1"><span class="section-number-5">6.6.1.1</span> ローマ字のルールの設定</h5>
<div class="outline-text-5" id="text-6-6-1-1">

<ul class="org-ul">
<li><code>skk-rom-kana-base-rule-list</code>
</li>
<li><code>skk-rom-kana-rule-list</code>
</li>
</ul>

<p>
DDSKK の■モードにおける文字変換は、これら２つの変数を用いて行われます。
<code>skk-rom-kana-base-rule-list</code> には基本的なローマ字かな変換のルールが定め
られています。一方 <code>skk-rom-kana-rule-list</code> はユーザが独自のルールを定め
るために用意されており、 <code>skk-rom-kana-base-rule-list</code> よりも優先されます。
</p>

<p>
これらは「入出力の状態がいかに移り変わるべきか」を決定します。その内容は、
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(&#20837;&#21147;&#12373;&#12428;&#12427;&#25991;&#23383;&#21015; &#20986;&#21147;&#24460;&#12395;&#33258;&#21205;&#30340;&#12395;&#20837;&#21147;&#12395;&#36861;&#21152;&#12373;&#12428;&#12427;&#25991;&#23383;&#21015; &#20986;&#21147;)
</pre>
</div>

<p>
という形のリストを列挙したものです。
</p>

<ul class="org-ul">
<li>入力される文字列…変換される前のアスキー文字の文字列をいいます。
</li>

<li>出力…次の入力状態に移るときにバッファに挿入される文字列の組み合わせ
であり、 <code>("ア" . "あ")</code> のようなコンスセルです。
</li>
</ul>

<p>
<code>skk-rom-kana-base-rule-list</code> の一部を見てみましょう。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-style: italic;">"a"</span>  nil (<span style="font-style: italic;">"&#12450;"</span> . <span style="font-style: italic;">"&#12354;"</span>))
(<span style="font-style: italic;">"ki"</span> nil (<span style="font-style: italic;">"&#12461;"</span> . <span style="font-style: italic;">"&#12365;"</span>))
(<span style="font-style: italic;">"tt"</span> <span style="font-style: italic;">"t"</span> (<span style="font-style: italic;">"&#12483;"</span> . <span style="font-style: italic;">"&#12387;"</span>))
(<span style="font-style: italic;">"nn"</span> nil (<span style="font-style: italic;">"&#12531;"</span> . <span style="font-style: italic;">"&#12435;"</span>))
(<span style="font-style: italic;">"n'"</span> nil (<span style="font-style: italic;">"&#12531;"</span> . <span style="font-style: italic;">"&#12435;"</span>))
</pre>
</div>

<p>
のような規則があります。これによると
</p>

<pre class="example">
a  → あ
ki → き
tt → っt
nn → ん
n' → ん
</pre>

<p>
のようになります。
</p>

<p>
<code>skk-rom-kana-base-rule-list</code> には、次のような便利な変換ルールも定められ
ています。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">z  &#8594; &#9633; &#65288; z <SPAN CLASS="KEY">SPC</SPAN> &#8594; &#20840;&#35282;&#12473;&#12506;&#12540;&#12473;&#65289;
z* &#8594; &#8251;
z, &#8594; &#8229;
z- &#8594; &#12316;
z. &#8594; &#8230;
z/ &#8594; &#12539;
z0 &#8594; &#9675;
z@ &#8594; &#9678;
z[ &#8594; &#12302;
z] <span style="font-weight: bold;">&#8594; &#12303;</span>
z{ &#8594; &#12304;
z} &#8594; &#12305;
z( &#8594; &#65288;
z) <span style="font-weight: bold;">&#8594; &#65289;</span>
zh &#8594; &#8592;
zj &#8594; &#8595;
zk &#8594; &#8593;
zl &#8594; &#8594;
zL &#8594; &#8658;
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-6-6-1-2" class="outline-5">
<h5 id="sec-6-6-1-2"><span class="section-number-5">6.6.1.2</span> ローマ字ルールの変更例</h5>
<div class="outline-text-5" id="text-6-6-1-2">

<p>
<code>skk-rom-kana-base-rule-list</code> の規則に従うと
</p>

<pre class="example">
hannou → はんおう
han'ou → はんおう
hannnou → はんのう
</pre>

<p>
のようになります。ここで
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-rom-kana-rule-list
      (append skk-rom-kana-rule-list
              '((<span style="font-style: italic;">"nn"</span> <span style="font-style: italic;">"n"</span> (<span style="font-style: italic;">"&#12531;"</span> . <span style="font-style: italic;">"&#12435;"</span>)))))
</pre>
</div>

<p>
のような設定にすることで
</p>

<pre class="example">
hannou → はんのう
</pre>

<p>
のようにローマ字かな変換が行われるようになります。
</p>

<p>
他の例として、略号を設定することもできます。
</p>

<pre class="example">
tp → 東北大学
skk → skk
skK → SKK
</pre>

<p>
といった変換は、
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-style: italic;">"tp"</span> nil (<span style="font-style: italic;">"&#26481;&#21271;&#22823;&#23398;"</span> . <span style="font-style: italic;">"&#26481;&#21271;&#22823;&#23398;"</span>))
(<span style="font-style: italic;">"sk"</span> nil (<span style="font-style: italic;">""</span> . <span style="font-style: italic;">""</span>))
(<span style="font-style: italic;">"skk"</span> nil (<span style="font-style: italic;">"skk"</span> . <span style="font-style: italic;">"skk"</span>))
(<span style="font-style: italic;">"skK"</span> nil (<span style="font-style: italic;">"SKK"</span> . <span style="font-style: italic;">"SKK"</span>))
</pre>
</div>

<p>
のような規則を追加することで実現されます。自分の名前を入力することはよく
あるので、適当な省略形を用いて、このリストに追加しておく、といった利用を
お勧めします。
</p>

<p>
更に <code>skk-rom-kana-rule-list</code> を用いれば TUT-code による日本語入力を実現
することもできます。TUT-code による入力についてはソースアーカイブの <code>tut-code</code> デ
ィレクトリに収録されている各ファイルを参照してください。
</p>

<p>
<a href="#sec-7">ローマ字入力以外の入力方式</a>.
</p>
</div>
</div>

<div id="outline-container-sec-6-6-1-3" class="outline-5">
<h5 id="sec-6-6-1-3"><span class="section-number-5">6.6.1.3</span> ■モードに関連するその他の変数</h5>
<div class="outline-text-5" id="text-6-6-1-3">

<ul class="org-ul">
<li>Variable: <code class="symbol">skk-kana-input-search-function</code>

<p>
ルールリストの中に記せない変換ルールを処理する関数。
これは <code>skk-rom-kana-base-rule-list</code> と <code>skk-rom-kana-rule-list</code> の
要素を全て検索した後にコールされます。引数はありません。バッファの文字
を、直接 <code>preceding-char</code> などで調べて下さい。
</p>

<p>
初期設定では <code>h</code> で、長音を表すために使われています。次の例を見て下さい。
</p>

<pre class="example">
ohsaka → おおさか
ohta → おおた
</pre>

<p>
一方で、 <code>hh</code> は「っ」になります。
</p>

<pre class="example">
ohhonn → おっほん
ohhira → おっひら
</pre>

<p>
これは <code>skk-rom-kana-rule-list</code> の標準設定に
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-style: italic;">"hh"</span> <span style="font-style: italic;">"h"</span> (<span style="font-style: italic;">"&#12483;"</span> . <span style="font-style: italic;">"&#12387;"</span>))
</pre>
</div>

<p>
が入っているためです。これを削除すれば
</p>

<pre class="example">
ohhonn → おおほん
ohhira → おおひら
</pre>

<p>
となります。
</p>
</li>
</ul>

<ul class="org-ul">
<li>Variable: <code class="symbol">skk-kutouten-type</code>

<p>
■モードの標準では、キーボードの <code>.</code> を打鍵すると「。」が、 <code>,</code> を打鍵
すると「、」がバッファに挿入されます。変数 <code>skk-kutouten-type</code> に適切な
シンボルを設定することにより、この組み合せを変更 <sup><a id="fnr.70" name="fnr.70" class="footref" href="#fn.70">70</a></sup> すること
ができます。そのシンボルとは、次の４つです。
</p>

<ul class="org-ul">
<li>シンボル <code>jp</code> → 「。」「、」 （標準設定）
</li>
<li>シンボル <code>en</code> → 「．」「，」
</li>
<li>シンボル <code>jp-en</code> → 「。」「，」
</li>
<li>シンボル <code>en-jp</code> → 「．」「、」
</li>
</ul>
<p>
または、変数 <code>skk-kutouten-type</code> にはコンスセルを指定することも可能です。
その場合は、
</p>

<pre class="example">
(句点を示す文字列 . 読点を示す文字列)
</pre>

<p>
のように指定します。例として、次のように設定するとキーボード
の <code>.</code> で <code>abc</code> が、 <code>,</code> で <code>def</code> がバッファに入力されます。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-kutouten-type '(<span style="font-style: italic;">"abc"</span> . <span style="font-style: italic;">"def"</span>))
</pre>
</div>

<p>
なお、変数 <code>skk-kutouten-type</code> はバッファローカル変数です。すべてのバッ
ファで統一した設定としたい場合は、
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq-default</span> skk-kutouten-type 'en)
</pre>
</div>

<p>
のように関数 <code>setq-default</code> を用いてください。
</p>
</li>

<li>Variable: <code class="symbol">skk-use-auto-kutouten</code>

<p>
標準設定は <code>nil</code> 。 <code>Non-nil</code> であれば、カーソル直前の文字種に応じて
句読点を動的に変更します。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-6-1-4" class="outline-5">
<h5 id="sec-6-6-1-4"><span class="section-number-5">6.6.1.4</span> 数字や記号文字の入力</h5>
<div class="outline-text-5" id="text-6-6-1-4">

<p>
かなモード／カナモードにおける次のキーは、関数 <code>skk-insert</code> にバインドされています。
</p>

<pre class="example">
!  #  %  &amp;  '  *  +

-  0  1  2  3  4  5

6  7  8  9  :  ;  &lt;

=  &gt;  ?  "  (  )  [

]  {  }  ^  _  `  |

~
</pre>

<p>
これらの数字や記号文字のキーに対応し挿入される文字をカスタマイズするため
には、変数 <code>skk-rom-kana-rule-list</code> を利用します。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-rom-kana-rule-list
      (append skk-rom-kana-rule-list
              '((<span style="font-style: italic;">"!"</span> nil <span style="font-style: italic;">"!"</span>)
                (<span style="font-style: italic;">","</span> nil <span style="font-style: italic;">","</span>)
                (<span style="font-style: italic;">"."</span> nil <span style="font-style: italic;">"."</span>)
                (<span style="font-style: italic;">":"</span> nil <span style="font-style: italic;">":"</span>)
                (<span style="font-style: italic;">";"</span> nil <span style="font-style: italic;">";"</span>)
                (<span style="font-style: italic;">"?"</span> nil <span style="font-style: italic;">"?"</span>))))
</pre>
</div>

<p>
関数 <code>skk-insert</code> は、Emacs のオリジナル関数 <code>self-insert-command</code> をエミ
ュレートしています。具体的には、引数を渡すことによって同じ文字を複数、一
度に挿入することが可能です。
</p>

<pre class="example">
C-u 2 !

  ------ Buffer: foo ------
  ！！
  ------ Buffer: foo ------
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-6-6-2" class="outline-4">
<h4 id="sec-6-6-2"><span class="section-number-4">6.6.2</span> 全英モードのキー設定</h4>
<div class="outline-text-4" id="text-6-6-2">
<p>
全英モードにおける印字可能な全てのキーはコマンド <code>skk-jisx0208-latin-insert</code> に
割り付けられています。また、変数 <code>skk-jisx0208-latin-vector</code> の値により挿
入される文字が決定され、その標準設定は以下のようになっています。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">[nil  nil  nil  nil  nil  nil  nil  nil
 nil  nil  nil  nil  nil  nil  nil  nil
 nil  nil  nil  nil  nil  nil  nil  nil
 nil  nil  nil  nil  nil  nil  nil  nil
 <span style="font-style: italic;">"&#12288;"</span> <span style="font-style: italic;">"&#65281;"</span> <span style="font-style: italic;">"&#8221;"</span> <span style="font-style: italic;">"&#65283;"</span> <span style="font-style: italic;">"&#65284;"</span> <span style="font-style: italic;">"&#65285;"</span> <span style="font-style: italic;">"&#65286;"</span> <span style="font-style: italic;">"&#8217;"</span>
 <span style="font-style: italic;">"&#65288;"</span> <span style="font-style: italic;">"&#65289;"</span> <span style="font-style: italic;">"&#65290;"</span> <span style="font-style: italic;">"&#65291;"</span> <span style="font-style: italic;">"&#65292;"</span> <span style="font-style: italic;">"&#8722;"</span> <span style="font-style: italic;">"&#65294;"</span> <span style="font-style: italic;">"&#65295;"</span>
 <span style="font-style: italic;">"&#65296;"</span> <span style="font-style: italic;">"&#65297;"</span> <span style="font-style: italic;">"&#65298;"</span> <span style="font-style: italic;">"&#65299;"</span> <span style="font-style: italic;">"&#65300;"</span> <span style="font-style: italic;">"&#65301;"</span> <span style="font-style: italic;">"&#65302;"</span> <span style="font-style: italic;">"&#65303;"</span>
 <span style="font-style: italic;">"&#65304;"</span> <span style="font-style: italic;">"&#65305;"</span> <span style="font-style: italic;">"&#65306;"</span> <span style="font-style: italic;">"&#65307;"</span> <span style="font-style: italic;">"&#65308;"</span> <span style="font-style: italic;">"&#65309;"</span> <span style="font-style: italic;">"&#65310;"</span> <span style="font-style: italic;">"&#65311;"</span>
 <span style="font-style: italic;">"&#65312;"</span> <span style="font-style: italic;">"&#65313;"</span> <span style="font-style: italic;">"&#65314;"</span> <span style="font-style: italic;">"&#65315;"</span> <span style="font-style: italic;">"&#65316;"</span> <span style="font-style: italic;">"&#65317;"</span> <span style="font-style: italic;">"&#65318;"</span> <span style="font-style: italic;">"&#65319;"</span>
 <span style="font-style: italic;">"&#65320;"</span> <span style="font-style: italic;">"&#65321;"</span> <span style="font-style: italic;">"&#65322;"</span> <span style="font-style: italic;">"&#65323;"</span> <span style="font-style: italic;">"&#65324;"</span> <span style="font-style: italic;">"&#65325;"</span> <span style="font-style: italic;">"&#65326;"</span> <span style="font-style: italic;">"&#65327;"</span>
 <span style="font-style: italic;">"&#65328;"</span> <span style="font-style: italic;">"&#65329;"</span> <span style="font-style: italic;">"&#65330;"</span> <span style="font-style: italic;">"&#65331;"</span> <span style="font-style: italic;">"&#65332;"</span> <span style="font-style: italic;">"&#65333;"</span> <span style="font-style: italic;">"&#65334;"</span> <span style="font-style: italic;">"&#65335;"</span>
 <span style="font-style: italic;">"&#65336;"</span> <span style="font-style: italic;">"&#65337;"</span> <span style="font-style: italic;">"&#65338;"</span> <span style="font-style: italic;">"&#65339;"</span> <span style="font-style: italic;">"&#65340;"</span> <span style="font-style: italic;">"&#65341;"</span> <span style="font-style: italic;">"&#65342;"</span> <span style="font-style: italic;">"&#65343;"</span>
 <span style="font-style: italic;">"&#8216;"</span> <span style="font-style: italic;">"&#65345;"</span> <span style="font-style: italic;">"&#65346;"</span> <span style="font-style: italic;">"&#65347;"</span> <span style="font-style: italic;">"&#65348;"</span> <span style="font-style: italic;">"&#65349;"</span> <span style="font-style: italic;">"&#65350;"</span> <span style="font-style: italic;">"&#65351;"</span>
 <span style="font-style: italic;">"&#65352;"</span> <span style="font-style: italic;">"&#65353;"</span> <span style="font-style: italic;">"&#65354;"</span> <span style="font-style: italic;">"&#65355;"</span> <span style="font-style: italic;">"&#65356;"</span> <span style="font-style: italic;">"&#65357;"</span> <span style="font-style: italic;">"&#65358;"</span> <span style="font-style: italic;">"&#65359;"</span>
 <span style="font-style: italic;">"&#65360;"</span> <span style="font-style: italic;">"&#65361;"</span> <span style="font-style: italic;">"&#65362;"</span> <span style="font-style: italic;">"&#65363;"</span> <span style="font-style: italic;">"&#65364;"</span> <span style="font-style: italic;">"&#65365;"</span> <span style="font-style: italic;">"&#65366;"</span> <span style="font-style: italic;">"&#65367;"</span>
 <span style="font-style: italic;">"&#65368;"</span> <span style="font-style: italic;">"&#65369;"</span> <span style="font-style: italic;">"&#65370;"</span> <span style="font-style: italic;">"&#65371;"</span> <span style="font-style: italic;">"&#65372;"</span> <span style="font-style: italic;">"&#65373;"</span> <span style="font-style: italic;">"&#12316;"</span> nil]
</pre>
</div>

<p>
挿入される文字を変更したい場合: <a href="#sec-6-6-1-4">数字や記号文字の入力</a>.
</p>

<p>
関数 <code>skk-jisx0208-latin-insert</code> も Emacs オリジナルの関数 <code>self-insert-command</code> を
エミュレートしています。つまり、関数 <code>skk-insert</code> における動作と同じく、
引数を渡すことにより同じ文字を複数、一度に挿入することができます。
</p>

<p>
<a href="#sec-6-6-1-4">数字や記号文字の入力</a>.
</p>
</div>
</div>

<div id="outline-container-sec-6-6-3" class="outline-4">
<h4 id="sec-6-6-3"><span class="section-number-4">6.6.3</span> 閉じ括弧の自動入力</h4>
<div class="outline-text-4" id="text-6-6-3">
<p>
通常、 <b>「</b> を入力したら <b>」</b> を後で入力する必要があります。 <b>「</b> の入力
時点で、対になる文字を自動挿入してくれると打鍵数を減らすことができますし、
同時に入力忘れの防止にもなるでしょう。
</p>

<p>
そのために変数 <code>skk-auto-insert-paren</code> が用意されています。この値を <code>non-nil</code> に
すると、上記の自動挿入を行います。
</p>

<pre class="example">
  ------ Buffer: foo ------
  彼はこう言った*
  ------ Buffer: foo ------

[

  ------ Buffer: foo ------
  彼はこう言った「*」
  ------ Buffer: foo ------
</pre>

<p>
上記のように <b>「</b> の入力時点で対となる <b>」</b> を自動挿入し、 <b>「</b> と <b>」</b> の
間にポイントを再配置するので、その位置からかぎかっこに囲まれた文字列を即
始めることができます。
</p>


<ul class="org-ul">
<li>Variable: <code class="symbol">skk-auto-paren-string-alist</code>

<p>
自動挿入すべきペアの文字列を指定します。標準設定は下記のとおり。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">((<span style="font-style: italic;">"&#12300;"</span> . <span style="font-style: italic;">"&#12301;"</span>) (<span style="font-style: italic;">"&#12302;"</span> . <span style="font-style: italic;">"&#12303;"</span>) (<span style="font-style: italic;">"("</span>  . <span style="font-style: italic;">")"</span>)  (<span style="font-style: italic;">"&#65288;"</span> . <span style="font-style: italic;">"&#65289;"</span>) (<span style="font-style: italic;">"{"</span>  . <span style="font-style: italic;">"}"</span>)
 (<span style="font-style: italic;">"&#65371;"</span> . <span style="font-style: italic;">"&#65373;"</span>) (<span style="font-style: italic;">"&#12296;"</span> . <span style="font-style: italic;">"&#12297;"</span>) (<span style="font-style: italic;">"&#12298;"</span> . <span style="font-style: italic;">"&#12299;"</span>) (<span style="font-style: italic;">"["</span>  . <span style="font-style: italic;">"]"</span>)  (<span style="font-style: italic;">"&#65339;"</span> . <span style="font-style: italic;">"&#65341;"</span>)
 (<span style="font-style: italic;">"&#12308;"</span> . <span style="font-style: italic;">"&#12309;"</span>) (<span style="font-style: italic;">"&#12304;"</span> . <span style="font-style: italic;">"&#12305;"</span>) (<span style="font-style: italic;">"\""</span> . <span style="font-style: italic;">"\""</span>) (<span style="font-style: italic;">"&#8220;"</span>  . <span style="font-style: italic;">"&#8221;"</span>)  (<span style="font-style: italic;">"`"</span>  . <span style="font-style: italic;">"'"</span>))
</pre>
</div>

<p>
これは、ひと言でまとめると、「開き括弧と閉じ括弧とのコンスセルを集めた
リスト」です。各コンスセルの <code>car</code> にある文字列を挿入したときに <code>cdr</code> に
ある文字列が自動挿入されます。
</p>

<p>
このリストの各要素の <code>car</code> の文字列は、必ず変数 <code>skk-rom-kana-rule-list</code> の
規則によって入力されなければなりません。例えば、 <code>(</code> に対する <code>)</code> を自
動挿入するには
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-rom-kana-rule-list
      (append skk-rom-kana-rule-list
            '((<span style="font-style: italic;">"("</span> nil <span style="font-style: italic;">"("</span>))))
</pre>
</div>

<p>
のように設定する必要があります。
</p>

<p>
既に SKK モードになっているバッファで変数 <code>skk-auto-paren-string-alist</code> を
変更した場合は、 <code>C-x C-j</code> もしくは <code>C-x j</code> を２度キー入力して <code>skk-mode</code> も
しくは <code>skk-auto-fill-mode</code> を起動し直す必要があります。
</p>
</li>
</ul>

<p>
キーとなる文字が挿入されても、その挿入後のポイントに自動挿入すべき文字が
既に存在している場合には、自動挿入されないように設計されています。
</p>

<pre class="example">
  ------ Buffer: foo ------
  *」
  ------ Buffer: foo ------

[

  ------ Buffer: foo ------
  「*」
  ------ Buffer: foo ------
</pre>

<p>
対になる文字を複数挿入したい場合は、引数を渡して文字を指定します。
</p>

<pre class="example">
C-u 2 [

  ------ Buffer: foo ------
  「「*」」
  ------ Buffer: foo ------
</pre>

<p>
<code>yatex-mode</code> など、既に同様の機能が付いているモードがあります。そのような
モードにおいてもこの自動挿入の機能が邪魔になることはないでしょうが、特定
のモードに限って自動入力機能をオフにしたい場合は、当該モードに入ったとき
にコールされるフック変数を利用して設定することができます。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'yatex-mode-hook
          (<span style="font-weight: bold;">lambda</span> ()
              (<span style="font-weight: bold;">when</span> skk-auto-insert-paren
                (make-local-variable 'skk-auto-insert-paren)
                (<span style="font-weight: bold;">setq</span> skk-auto-insert-paren nil))))
</pre>
</div>

<p>
特定のモードにおいて、自動挿入すべき文字を変更したい場合にも同様にフック
変数を用いて操作できます。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'tex-mode-hook
          (<span style="font-weight: bold;">lambda</span> ()
              (<span style="font-weight: bold;">when</span> skk-auto-insert-paren
                (make-local-variable 'skk-auto-paren-string-alist)
                (<span style="font-weight: bold;">setq</span> skk-auto-paren-string-alist
                      (cons '(<span style="font-style: italic;">"$"</span> . <span style="font-style: italic;">"$"</span>) skk-auto-paren-string-alist)))))
</pre>
</div>

<p>
同様に、特定のペアを削除したい場合は、例えば下記のように設定します。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'tex-mode-hook
          (<span style="font-weight: bold;">lambda</span> ()
              (<span style="font-weight: bold;">when</span> skk-auto-insert-paren
                (make-local-variable 'skk-auto-paren-string-alist)
                (<span style="font-weight: bold;">setq</span> skk-auto-paren-string-alist
                      (delete
                       '(<span style="font-style: italic;">"$"</span> . <span style="font-style: italic;">"$"</span>)
                       (copy-sequence skk-auto-paren-string-alist))))))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-6-6-4" class="outline-4">
<h4 id="sec-6-6-4"><span class="section-number-4">6.6.4</span> リージョンを括弧で囲む</h4>
<div class="outline-text-4" id="text-6-6-4">
<p>
「閉じ括弧の自動入力」の応用として、リージョンを括弧で囲むことができます。
</p>

<pre class="example">
  ------ Buffer: foo ------
  このマニュアルにおいて*DDSKK*と呼びます
  ------ Buffer: foo ------

`

  ------ Buffer: foo ------
  このマニュアルにおいて`DDSKK'*と呼びます
  ------ Buffer: foo ------
</pre>


<ul class="org-ul">
<li>User Option: <code class="symbol">skk-use-auto-enclose-pair-of-region</code>

<p>
<code>non-nil</code> であれば、上記の機能が有効になります。
当然に <code>skk-auto-insert-paren</code> も <code>non-nil</code> である必要があります。
なお、 <code>delete-selection-mode</code> の方が優先されます。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-6-5" class="outline-4">
<h4 id="sec-6-6-5"><span class="section-number-4">6.6.5</span> 確定するキー</h4>
<div class="outline-text-4" id="text-6-6-5">
<ul class="org-ul">
<li>Variable: <code class="symbol">skk-kakutei-key</code>

<p>
この変数の値は、明示的な確定動作を行うキーを指定します。標準設定では <code>C-j</code> と
なっています。
</p>

<p>
<a href="#sec-6-7-4">暗黙の確定のタイミング</a>.
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-6-6" class="outline-4">
<h4 id="sec-6-6-6"><span class="section-number-4">6.6.6</span> 候補の選択に用いるキー</h4>
<div class="outline-text-4" id="text-6-6-6">
<p>
変換において、候補が５つ以上あるときは、５番目以降の候補は７つずつまとめ
てエコーエリアに下記のように表示されます <sup><a id="fnr.71" name="fnr.71" class="footref" href="#fn.71">71</a></sup> 。
</p>

<pre class="example">
-------------------- Echo Area --------------------
A:嘘  S:拒  D:拠  F:虚  J:挙  K:許  L:渠  [残り 2]
-------------------- Echo Area --------------------
</pre>

<p>
この際、候補の選択に用いるキーは、次の変数によって決定されます。
</p>

<ul class="org-ul">
<li>Variable: <code class="symbol">skk-henkan-show-candidates-keys</code>

<p>
７つの異なる文字のリスト。文字は必ず小文字とする。 <code>x</code> , <code class="key">SPC</code> 及び <code>C-g</code> は、
それぞれ候補選択中における前候補群の表示、次候補群の表示、取り止めのた
めに割り付けられているので、含めてはならない。標準設定は、以下のとおり。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(?a ?s ?d ?f ?j ?k ?l)
</pre>
</div>
</li>

<li>Variable: <code class="symbol">skk-henkan-show-candidates-keys-face</code>

<p>
選択キーを表示する際のフェイスを指定します。
</p>
</li>

<li>Variable: <code class="symbol">skk-henkan-rest-indicator</code>

<p>
標準設定は <code>nil</code> 。 <code>Non-nil</code> であれば <code>[残り 99++]</code> の表示を右寄せ配
置する。
</p>
</li>

<li>Variable: <code class="symbol">skk-henkan-rest-indicator-face</code>

<p>
<code>[残り 99++]</code> の face 属性。標準設定は <code>default</code> 。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-6-7" class="outline-4">
<h4 id="sec-6-6-7"><span class="section-number-4">6.6.7</span> ▼モードでの <SPAN CLASS="KEY">RET</SPAN></h4>
<div class="outline-text-4" id="text-6-6-7">
<p>
標準設定では、
</p>

<pre class="example">
K a k u t e i <SPAN CLASS="KEY">SPC</SPAN>

  ------ Buffer: foo ------
  ▼確定*
  ------ Buffer: foo ------

<SPAN CLASS="KEY">RET</SPAN>

  ------ Buffer: foo ------
  確定
  *
  ------ Buffer: foo ------
</pre>

<p>
のように、▼モードで <code class="key">RET</code> を入力すると、確定し、かつ改行を行います。この
挙動を変えるためのユーザオプションが用意されています。
</p>

<ul class="org-ul">
<li>User Option: <code class="symbol">skk-egg-like-newline</code>

<p>
この変数の値を <code>non-nil</code> にすると、▼モードで <code class="key">RET</code> を入力したときに確
定のみ行い、改行はしません。従って、辞書登録モードにおいて▼モードであ
るときの <code class="key">RET</code> 打鍵時の挙動も変化 <sup><a id="fnr.72" name="fnr.72" class="footref" href="#fn.72">72</a></sup> します。
</p>

<pre class="example">
K a k u t e i <SPAN CLASS="KEY">SPC</SPAN>

------ Buffer: foo ------
▼確定*
------ Buffer: foo ------

<SPAN CLASS="KEY">RET</SPAN>

------ Buffer: foo ------
確定*
------ Buffer: foo ------
</pre>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-6-8" class="outline-4">
<h4 id="sec-6-6-8"><span class="section-number-4">6.6.8</span> ▼モードでの BS</h4>
<div class="outline-text-4" id="text-6-6-8">
<p>
標準設定では、▼モードで <code>BS</code> を押すと、前の一文字を削除した上で確定しま
す。
</p>

<pre class="example">
D e n k i y a <SPAN CLASS="KEY">SPC</SPAN>

  ------ Buffer: foo ------
  ▼電気屋*
  ------ Buffer: foo ------

<SPAN CLASS="KEY">BS</SPAN>

  ------ Buffer: foo ------
  電気*
  ------ Buffer: foo ------
</pre>

<ul class="org-ul">
<li>User Option: <code class="symbol">skk-delete-implies-kakutei</code>

<p>
この変数の値を <code>nil</code> に設定すると、▼モードで <code>BS</code> を押した時にひとつ前
の候補を表示します。例えば、
</p>

<pre class="example">
  でんき /電気/伝記/
</pre>

<p>
という辞書エントリがあるとき、以下のようになります。
</p>
</li>
</ul>

<pre class="example">
D e n k i

  ------ Buffer: foo ------
  ▽でんき*
  ------ Buffer: foo ------

<SPAN CLASS="KEY">SPC</SPAN>

  ------ Buffer: foo ------
  ▼電気*
  ------ Buffer: foo ------

<SPAN CLASS="KEY">SPC</SPAN>

  ------ Buffer: foo ------
  ▼伝記*
  ------ Buffer: foo ------

<SPAN CLASS="KEY">BS</SPAN>

  ------ Buffer: foo ------
  ▼電気*
  ------ Buffer: foo ------

<SPAN CLASS="KEY">BS</SPAN>

  ------ Buffer: foo ------
  ▽でんき*
  ------ Buffer: foo ------
</pre>

<p>
変数 <code>skk-delete-implies-kakutei</code> がシンボル <code>dont-update</code> であれば、
<code>non-nil</code> 時と同じ動作のうえで個人辞書を更新しません。
</p>

<p>
なお、変数 <code>skk-delete-implies-kakutei</code> の値にかかわらず、*候補*バッファ
を表示している場合はひとつ前の候補表示に戻る動作となります。
</p>
</div>
</div>

<div id="outline-container-sec-6-6-9" class="outline-4">
<h4 id="sec-6-6-9"><span class="section-number-4">6.6.9</span> 送りあり変換中の C-g</h4>
<div class="outline-text-4" id="text-6-6-9">
<p>
送りありの変換中に <code>C-g</code> を入力すると、▼モードを抜け、その見出し語と送り
仮名を現在のバッファに挿入し、▽モードに入ります。
</p>

<pre class="example">
N a K u

  ------ Buffer: foo ------
  ▼泣く*
  ------ Buffer: foo ------

C-g

  ------ Buffer: foo ------
  ▽なく*
  ------ Buffer: foo ------
</pre>

<ul class="org-ul">
<li>User Option: <code class="symbol">skk-delete-okuri-when-quit</code>

<p>
この変数の値を <code>non-nil</code> に設定すると、送りありの変換中に <code>C-g</code> を入力
したときの挙動が変化します。▽モードに入るのは同じですが、同時に送り仮
名を消します。送り仮名の入力間違いを修正するのには便利です。例えば、以
下のようになります。
</p>

<pre class="example">
N a K u

  ------ Buffer: foo ------
  ▼泣く*
  ------ Buffer: foo ------

C-g

  ------ Buffer: foo ------
  ▽な*
  ------ Buffer: foo ------
</pre>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-6-10" class="outline-4">
<h4 id="sec-6-6-10"><span class="section-number-4">6.6.10</span> 変換位置の指定方法</h4>
<div class="outline-text-4" id="text-6-6-10">
<p>
SKK では通常、「漢字変換の開始位置」と「送り仮名の開始位置」を大文字で指
定しますが、これらを任意のキーで指定することで sticky-shift ライクな
操作 <sup><a id="fnr.73" name="fnr.73" class="footref" href="#fn.73">73</a></sup> も可能です。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-sticky-key <span style="font-style: italic;">";"</span>)
</pre>
</div>

<p>
と設定すると <code>;</code> キーで <sup><a id="fnr.74" name="fnr.74" class="footref" href="#fn.74">74</a></sup> 漢字変換位置が指定できるようになりま
す。
</p>

<p>
例えば「有る」という単語を入力するには
</p>

<pre class="example">
; a ; r u
</pre>

<p>
というキー入力で可能となり、シフトキーを押す必要がなくなります。
</p>

<p>
操作上は通常の sticky-shift <sup><a id="fnr.75" name="fnr.75" class="footref" href="#fn.75">75</a></sup> と変わりませんが、画面表示は
</p>

<pre class="example">
打鍵  通常の sticky  skk-sticky
;     変化なし       ▽
a     ▽あ           ▽あ
;     ▽あ           ▽あ*
r     ▽あ*r         ▽あ*r
</pre>

<p>
と遷移します。通常の sticky と比べて skk-sticky は <code>;</code> を押した時点で画面
表示が変化するので若干分かり易いと思います。
</p>

<p>
キーの設定方法は、割り当てるキーの種類によって異なります。
</p>

<ol class="org-ol">
<li>表示を伴うキー

<p>
<code>;</code> などの表示を伴うキーの場合は
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-sticky-key <span style="font-style: italic;">";"</span>)
</pre>
</div>

<p>
のように <code>string</code> を設定して下さい。 <code>skk-sticky-key</code> に設定した文字そ
のものを入力したい場合は２回続けて打鍵すると入力できます。
</p>
</li>

<li>表示を伴わないキー

<p>
【無変換】のような表示を伴わないキーの場合は
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-sticky-key [muhenkan]) <span style="font-weight: bold; font-style: italic;">;</span><span style="font-weight: bold; font-style: italic;">Microsoft Windows &#12391;&#12399; [noconvert]</span>
</pre>
</div>

<p>
のようにそのキーを表わす <code>vector</code> を設定して下さい。
</p>
</li>

<li>同時打鍵

<p>
２つのキーを同時に打鍵することでも漢字変換位置を指定できます。例えば
<code>f</code> と <code>j</code> の同時打鍵で指定する場合は
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-sticky-key '(?f ?j))
</pre>
</div>

<p>
のように <code>character</code> のリストを設定して下さい。
</p>

<p>
Dvorak 配列のような、押しやすい場所に適当なキーがない環境でもこの機能を
使いたい場合に便利かもしれません。
</p>
</li>

<li>Variable: <code class="symbol">skk-sticky-double-interval</code>

<p>
この変数が指定する秒数以内に打鍵されたものを同時打鍵と判定する。
標準設定は 0.1 秒。
</p>
</li>
</ol>
</div>
</div>

<div id="outline-container-sec-6-6-11" class="outline-4">
<h4 id="sec-6-6-11"><span class="section-number-4">6.6.11</span> １回の取り消し操作 (undo) の対象</h4>
<div class="outline-text-4" id="text-6-6-11">
<p>
Emacs では本来、連続する 20 文字の挿入が一回の取り消し操作（アンドゥ）の
対象となっています。そこで DDSKK のかな・カナ・全英モードにおける入力も、
これと同様の動作をするように設計されています <sup><a id="fnr.76" name="fnr.76" class="footref" href="#fn.76">76</a></sup> 。正確に言えば、
<code>skk-insert</code> , <code>skk-set-henkan-point</code> , <code>skk-jisx0208-latin-insert</code> <sup><a id="fnr.77" name="fnr.77" class="footref" href="#fn.77">77</a></sup> の
各関数にバインドされたキー入力については、連続して入力された 20 文字をい
ちどのアンドゥの対象としています <sup><a id="fnr.78" name="fnr.78" class="footref" href="#fn.78">78</a></sup> 。
</p>

<p>
ただし、これらの DDSKK のコマンドと Emacs 本来の <code>self-insert-command</code> を
織り混ぜてキー入力した場合 <sup><a id="fnr.79" name="fnr.79" class="footref" href="#fn.79">79</a></sup> は、このエミュレーションは正常に動作
しませんが、これは現在の仕様です。
</p>

<pre class="example">
a i u e o k a k i k u k e k o s a s i s u s e s o t a t i t u t e t o

  ------------------------- Buffer: foo -------------------------
  あいうえおかきくけこさしすせそたちつてと*   ※ 連続する20文字
  ------------------------- Buffer: foo -------------------------

C-_

  ------------------------- Buffer: foo -------------------------
  *                                           ※ 20文字全てがアンドゥの対象
  ------------------------- Buffer: foo -------------------------

a i u e o k a k i k u k e k o s a s i s u s e s o t a t i t u t e t o n a

  -------------------------- Buffer: foo --------------------------
  あいうえおかきくけこさしすせそたちつてとな* ※ 連続する21文字
  -------------------------- Buffer: foo --------------------------

C-_

  -------------------------- Buffer: foo --------------------------
  あいうえおかきくけこさしすせそたちつてと*   ※ 最後の1文字のみがアンドゥの対象
  -------------------------- Buffer: foo --------------------------
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-6-7" class="outline-3">
<h3 id="sec-6-7"><span class="section-number-3">6.7</span> 変換、確定の前後</h3>
<div class="outline-text-3" id="text-6-7">
<p>
関連事項:
</p>

<ul class="org-ul">
<li><a href="#sec-6-8-4">送りあり変換の変換開始のタイミング</a>.
</li>

<li><a href="#sec-6-6-10">変換位置の指定方法</a>.
</li>
</ul>
</div>

<div id="outline-container-sec-6-7-1" class="outline-4">
<h4 id="sec-6-7-1"><span class="section-number-4">6.7.1</span> ポイントを戻して▽モードへ</h4>
<div class="outline-text-4" id="text-6-7-1">
<p>
▽モードに入り忘れた場合に、手動で▽マークを付ける方法 (<a href="#sec-5-3-2-1">後から▽モードに入る方法</a>.) に
ついては、前述しました。
</p>

<p>
ここで述べる方法では、遡って▽マークを付ける位置を自動的に選び、しかもポ
イントは動きません。
</p>

<ul class="org-ul">
<li>Key: <code class="symbol">M-Q</code> (skk-backward-and-set-henkan-point)

<p>
<code>M-Q</code> （大文字の <code>Q</code> です。）と打鍵すると、現在位置の直前の文字列につい
て走査し、同種の文字（ひらがな、カタカナ、全角アルファベット、アルファ
ベットの４種類のいずれか）が続く限り後方に戻って▽マークを付けます。ポ
イントは動きません。
</p>

<pre class="example">
k a n j i

  ------ Buffer: foo ------
  かんじ*
  ------ Buffer: foo ------

M-Q

  ------ Buffer: foo ------
  ▽かんじ*
  ------ Buffer: foo ------
</pre>

<p>
変換開始位置を決定するとき、スペース文字、タブ文字、長音を表わす「ー」
は無条件に無視されます。ただし、ひらがなの場合は「を」が、カタカナの場
合は「ヲ」が見つかった時点で変換開始位置の走査を止めて▽モードに入りま
す。変換開始ポイントを「を」又は「ヲ」の直前で止めるのは、たいていその
直後から単語が始まるからです。
</p>
</li>
</ul>

<p>
以上は、引数を与えないで <code>M-Q</code> を実行した場合です。一方で、 <code>C-u 5 M-Q</code> の
ように引数を渡して実行すると、変換開始位置から現在位置までの文字数を指定
することができます。この場合は文字種別を問わず、与えられた文字数だけ無条
件にポイントを戻します。
</p>

<ul class="org-ul">
<li>User Option: <code class="symbol">skk-allow-spaces-newlines-and-tabs</code>

<p>
後方にポイントを戻す途中で行頭に到達した場合は、更に上の行について、行
末の文字列から同様の走査を行い、必要があれば更にポイントを戻します。こ
うした「行を超えての走査」をやめるためには、この変数の値を <code>nil</code> に設定
します。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-7-2" class="outline-4">
<h4 id="sec-6-7-2"><span class="section-number-4">6.7.2</span> 直前の確定を再変換</h4>
<div class="outline-text-4" id="text-6-7-2">
<p>
一番最後（直近）の確定を取り消して、再変換することができます。
これを <b>確定アンドゥ</b> と呼びます。
</p>

<p>
例えば、辞書エントリが
</p>

<pre class="example">
こうこう /高校/孝行/航行/
</pre>

<p>
のようになっているとします。
</p>

<pre class="example">
K o u k o u <SPAN CLASS="KEY">SPC</SPAN>

  ------ Buffer: foo ------
  ▼高校*
  ------ Buffer: foo ------

s u r u

  ------ Buffer: foo ------
  高校する*
  ------ Buffer: foo ------

M-x skk-undo-kakutei

  ------ Buffer: foo ------
  ▼孝行*
  ------ Buffer: foo ------
</pre>

<p>
この例では、「高校」の確定を取り消しています。すると、辞書の第一候補であ
る「高校」をとばして、次候補である「孝行」が現れます。ここで更に <code class="key">SPC</code> を
押せば次候補である「航行」が現れ、更にもう一度 <code class="key">SPC</code> を押せば候補が尽きて
辞書登録モードに入ります。
</p>

<p>
この例のとおり、確定アンドゥは、確定した直後でなくとも有効です。より正確
には、次の新たな確定を行うまで <sup><a id="fnr.80" name="fnr.80" class="footref" href="#fn.80">80</a></sup> は確定に関する情報が保持され
ているので、確定アンドゥすることができます。
</p>

<p>
また、変換、確定に関連しない文字列は、確定アンドゥを行っても削除されない
ように設計されています。上記の例では「する」がそのままカレントバッファに
残っています。
</p>

<ul class="org-ul">
<li>User Option: <code class="symbol">skk-undo-kakutei-return-previous-point</code>

<p>
この変数の値が <code>non-nil</code> であれば、確定アンドゥ処理が完了した後に、確定
アンドゥ処理の直前の位置にカーソルが戻ります。上の例の場合、確定アンド
ゥ処理が完了した後のカーソル位置は、標準設定 <code>nil</code> では「孝行」の直後
のままですが、 <code>non-nil</code> であれば「する」の直後に復帰します。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-7-3" class="outline-4">
<h4 id="sec-6-7-3"><span class="section-number-4">6.7.3</span> 自動変換開始</h4>
<div class="outline-text-4" id="text-6-7-3">
<p>
▽モードで見出し語を入力しているときに「を」や「。」などの文字を打鍵する
と、 <code class="key">SPC</code> を押したかのように変換を開始 <sup><a id="fnr.81" name="fnr.81" class="footref" href="#fn.81">81</a></sup> し、▼モードに入
るようになっています。
</p>

<pre class="example">
K a n j i

  ------ Buffer: foo ------
  ▽かんじ*
  ------ Buffer: foo ------

w o

  ------ Buffer: foo ------
  ▼漢字を*
  ------ Buffer: foo ------
</pre>

<ul class="org-ul">
<li>User Option: <code class="symbol">skk-auto-okuri-process</code>

<p>
この変数を <code>non-nil</code> に設定して送り仮名の自動処理 <sup><a id="fnr.82" name="fnr.82" class="footref" href="#fn.82">82</a></sup> を行ってい
る場合は、以下のような変換も可能です。ただし、個人辞書に
</p>

<pre class="example">
  できr /出来/[る/出来/]/
</pre>

<p>
というようなエントリがあると仮定します。
</p>

<pre class="example">
D e k i r u n n d e s u

  ------ Buffer: foo ------
  ▽できるんです
  ------ Buffer: foo ------

.

  ------ Buffer: foo ------
  ▼出来るんです。
  ------ Buffer: foo ------
</pre>
</li>

<li>Variable: <code class="symbol">skk-auto-start-henkan-keyword-list</code>

<p>
この変数の値は、単語や文節の区切りとなるような文字列のリストです。標準
設定は以下のようになっています。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-style: italic;">"&#12434;"</span> <span style="font-style: italic;">"&#12289;"</span> <span style="font-style: italic;">"&#12290;"</span> <span style="font-style: italic;">"&#65294;"</span> <span style="font-style: italic;">"&#65292;"</span> <span style="font-style: italic;">"&#65311;"</span> <span style="font-style: italic;">"&#12301;"</span> <span style="font-style: italic;">"&#65281;"</span> <span style="font-style: italic;">"&#65307;"</span> <span style="font-style: italic;">"&#65306;"</span> <span style="font-style: italic;">")"</span> <span style="font-style: italic;">";"</span>
 <span style="font-style: italic;">":"</span> <span style="font-style: italic;">"&#65289;"</span> <span style="font-style: italic;">"&#8221;"</span> <span style="font-style: italic;">"&#12305;"</span> <span style="font-style: italic;">"&#12303;"</span> <span style="font-style: italic;">"&#12299;"</span> <span style="font-style: italic;">"&#12297;"</span> <span style="font-style: italic;">"&#65373;"</span> <span style="font-style: italic;">"&#65341;"</span> <span style="font-style: italic;">"&#12309;"</span> <span style="font-style: italic;">"}"</span>
 <span style="font-style: italic;">"]"</span> <span style="font-style: italic;">"?"</span> <span style="font-style: italic;">"."</span> <span style="font-style: italic;">","</span> <span style="font-style: italic;">"!"</span> )
</pre>
</div>
</li>

<li>Variable: <code class="symbol">skk-auto-start-henkan</code>

<p>
この変数の値を <code>nil</code> に設定すると、本節で説明した自動変換開始機能を無効
にします。標準設定は <code>t</code> です。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-7-4" class="outline-4">
<h4 id="sec-6-7-4"><span class="section-number-4">6.7.4</span> 暗黙の確定のタイミング</h4>
<div class="outline-text-4" id="text-6-7-4">
<p>
標準の設定では、確定が済む前に次の文字 <sup><a id="fnr.83" name="fnr.83" class="footref" href="#fn.83">83</a></sup> を入力すると、直ちに確
定されます。これを「暗黙の確定」と呼んでいます。具体的には以下のようにな
ります。
</p>

<pre class="example">
K a k u t e i

  ------ Buffer: foo ------
  ▽かくてい*
  ------ Buffer: foo ------

<SPAN CLASS="KEY">SPC</SPAN>

  ------ Buffer: foo ------
  ▼確定*
  ------ Buffer: foo ------

s

  ------ Buffer: foo ------
  確定s*      ; 暗黙の確定
  ------ Buffer: foo ------

u

  ------ Buffer: foo ------
  確定す*
  ------ Buffer: foo ------
</pre>

<ul class="org-ul">
<li>User Option: <code class="symbol">skk-kakutei-early</code>

<p>
この変数の値を <code>nil</code> にすると、「暗黙の確定」を遅らせます。具体的には、
</p>

<ul class="org-ul">
<li>括弧 <code>(</code> <code>)</code> <code>[</code> <code>]</code> の入力時
</li>
<li>句読点 <code>,</code> <code>.</code> の入力時
</li>
<li>次の変換開始時（ <code>A</code> から <code>Z</code> までの大文字の入力時）
</li>
<li><code class="key">RET</code> 入力時
</li>
</ul>
<p>
まで暗黙の確定が遅延されます <sup><a id="fnr.84" name="fnr.84" class="footref" href="#fn.84">84</a></sup> 。
</p>

<pre class="example">
K a k u t e i

  ------ Buffer: foo ------
  ▽かくてい*
  ------ Buffer: foo ------

<SPAN CLASS="KEY">SPC</SPAN>

  ------ Buffer: foo ------
  ▼確定*
  ------ Buffer: foo ------

s

  ------ Buffer: foo ------
  ▼確定s*
  ------ Buffer: foo ------

u r u

  ------ Buffer: foo ------
  ▼確定する*
  ------ Buffer: foo ------

.

  ------ Buffer: foo ------
  確定する。*      ; 暗黙の確定
  ------ Buffer: foo ------
</pre>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-7-5" class="outline-4">
<h4 id="sec-6-7-5"><span class="section-number-4">6.7.5</span> 積極的な確定</h4>
<div class="outline-text-4" id="text-6-7-5">
<p>
変換候補がひとつしか見つからない場合は自動的に確定する、という設定ができ
ます。
</p>

<ul class="org-ul">
<li>User Option: <code class="symbol">skk-kakutei-when-unique-candidate</code>

<p>
この値が <code>non-nil</code> であれば、この機能が有効になります。
</p>

<p>
<code>t</code> であれば送りあり変換、送りなし変換、SKK abbrev モードでの変換、全て
でこの機能が有効になります。
</p>

<p>
また、 <code>okuri-ari</code> , <code>okuri-nasi</code> , <code>abbrev</code> を要素とするリストであるこ
ともできます。この場合は変換対象がその条件に合致した場合のみ確定変換が
機能します。
</p>

<pre class="example">
'(okuri-nasi abbrev)
</pre>

<p>
この機能は、全ての辞書を検索した上で変換候補が唯一か否かを調べます。そ
のため、 <code>skk-search-prog-list</code> の内容によってはレスポンスが悪くなる可
能性があります。
</p>

<p>
<a href="#sec-6-10-3">辞書の検索方法の設定</a>.
</p>
</li>

<li>Variable: <code class="symbol">skk-kakutei-search-prog-limit</code>

<p>
この変数の値が数値であれば、積極的な確定 <code>skk-kakutei-when-unique-candidate</code> に
おける「変換候補が唯一か否か」の判定を <code>skk-search-prog-list</code> の先頭か
ら数えて当該数値の個数までの辞書に制限します。
</p>

<p>
数値以外であれば、無制限に全ての辞書を検索対象とします。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-7-6" class="outline-4">
<h4 id="sec-6-7-6"><span class="section-number-4">6.7.6</span> 確定辞書</h4>
<div class="outline-text-4" id="text-6-7-6">
<p>
特定の語は、変換したら即座に確定させる事ができます。これを <b>確定変換</b> と
呼び、利用するには <b>確定辞書</b> を用意します。例えば、
</p>

<pre class="example">
じしょ /辞書/
</pre>

<p>
というエントリが確定辞書にあったとします。このとき、
</p>

<pre class="example">
Z i s h o

  ------ Buffer: foo ------
  ▽じしょ*
  ------ Buffer: foo ------

<SPAN CLASS="KEY">SPC</SPAN>

  ------ Buffer: foo ------
  辞書*
  ------ Buffer: foo ------
</pre>

<p>
のように <code class="key">SPC</code> を押しただけでいきなり確定します。エントリの候補がひとつだ
けだからです。
</p>

<p>
確定辞書以外の辞書に登録されているであろう同音異義語を得るには、確定変換
の直後に <code>x</code> を打鍵します。すると、▼モードに戻って次の候補を検索すること
ができます。
</p>

<p>
次の例では、確定辞書に「辞書」が、個人辞書（や共有辞書）に「自署」が登録
されているとします。
</p>

<pre class="example">
Z i s y o <SPAN CLASS="KEY">SPC</SPAN>

  ------ Buffer: foo ------
  辞書*
  ------ Buffer: foo ------

x

  ------ Buffer: foo ------
  ▼自署*
  ------ Buffer: foo ------
</pre>

<p>
確定辞書の単語は、優先的に変換されます。
</p>

<ul class="org-ul">
<li>Variable: <code class="symbol">skk-kakutei-jisyo</code>

<p>
確定変換用の辞書ファイル <sup><a id="fnr.85" name="fnr.85" class="footref" href="#fn.85">85</a></sup> を指定します。 <code>nil</code> であれ
ば、確定変換は行われません。この辞書は、標準の配布パッケージには含まれ
ていないので、使用するのであればユーザ側で用意する必要があります。 
</p>

<p>
<a href="#sec-6-10-7">辞書の書式</a>.
</p>
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-6-8" class="outline-3">
<h3 id="sec-6-8"><span class="section-number-3">6.8</span> 送り仮名関連</h3>
<div class="outline-text-3" id="text-6-8">
<p>
SKK の送り仮名の処理は、好みが分かれるところです。色々な対策が用意されて
いますので、試してみて下さい。
</p>
</div>

<div id="outline-container-sec-6-8-1" class="outline-4">
<h4 id="sec-6-8-1"><span class="section-number-4">6.8.1</span> 送り仮名の厳密なマッチ</h4>
<div class="outline-text-4" id="text-6-8-1">
<p>
今、個人辞書に
</p>

<pre class="example">
おおk /大/多/[く/多/]/[き/大/]/
</pre>

<p>
という送りありエントリがあると仮定します。
</p>

<p>
ここで <code>O o K i i <SPAN CLASS="KEY">SPC</SPAN></code> と入力した場合、普通は「大きい」と「多きい」という
２通りの候補が出力されますが、このうち「多きい」は現代の日本語として正し
くありません。このような場合に、出力される候補を正しい表現のみに絞りこむ
方法について、説明します。
</p>

<ul class="org-ul">
<li>User Option: <code class="symbol">skk-henkan-okuri-strictly</code>

<p>
この変数の値を <code>non-nil</code> に設定すると、見出し語がマッチするかどうかのチ
ェックの上に、送り仮名がマッチするかどうかのチェックが行われます。結果
として送り仮名がマッチしない候補は出力されません。上記の例では、送り仮
名「き」がマッチする「大きい」は出力されますが、「多きい」は出力されま
せん <sup><a id="fnr.86" name="fnr.86" class="footref" href="#fn.86">86</a></sup> 。
</p>

<p>
個人辞書の送りありエントリが充実していれば、標準の設定よりも候補が絞り
込まれるので変換効率がアップしますが、さもなければ、すぐに辞書登録モー
ドに入ってしまうため逆に不便になります。
</p>
</li>
</ul>

<p>
変数 <code>skk-henkan-okuri-strictly</code> の値を <code>non-nil</code> にすると、辞書登録モー
ドに入っても送り仮名のマッチが厳密に行われます。これは辞書登録の際希望す
る候補を得るためには障害となります。そのような障害を避けるためには、下記
のようにフック変数を設定します。これにより、辞書登録時だけは、一時的に送
り仮名の厳密なマッチをしないようになります <sup><a id="fnr.87" name="fnr.87" class="footref" href="#fn.87">87</a></sup> 。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'minibuffer-setup-hook
          (<span style="font-weight: bold;">lambda</span> ()
              (<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">and</span> (boundp 'skk-henkan-okuri-strictly)
                         skk-henkan-okuri-strictly
                         (not (eq last-command 'skk-purge-jisyo)))
                (<span style="font-weight: bold;">setq</span> skk-henkan-okuri-strictly nil)
                (put 'skk-henkan-okuri-strictly 'temporary-nil t))))
</pre>
</div>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'minibuffer-exit-hook
          (<span style="font-weight: bold;">lambda</span> ()
              (<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">and</span> (get 'skk-henkan-okuri-strictly 'temporary-nil)
                         (&lt;= (minibuffer-depth) 1))
                (put 'skk-henkan-okuri-strictly 'temporary-nil nil)
                (<span style="font-weight: bold;">setq</span> skk-henkan-okuri-strictly t))))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-6-8-2" class="outline-4">
<h4 id="sec-6-8-2"><span class="section-number-4">6.8.2</span> 送り仮名の優先的なマッチ</h4>
<div class="outline-text-4" id="text-6-8-2">
<p>
「送り仮名の厳密なマッチ」では、見出し語と送り仮名が一致した場合のみ候
補を表示します。
</p>

<p>
<a href="#sec-6-8-1">送り仮名の厳密なマッチ</a>.
</p>

<p>
ここでは、その条件を緩めて優先的に表示する方法を紹介します <sup><a id="fnr.88" name="fnr.88" class="footref" href="#fn.88">88</a></sup> 。
</p>

<p>
今、個人辞書に
</p>

<pre class="example">
おおk /大/多/[く/多/]/[き/大/]/
</pre>

<p>
という送りありエントリがあると仮定します。
</p>

<p>
ここで <code>O o K i i <SPAN CLASS="KEY">SPC</SPAN></code> と入力した場合、普通は「大きい」と「多きい」という
２通りの候補が出力されますが、このうち「多きい」は現代の日本語として正し
くありません。このような場合に、出力される候補を正しい表現が優先的にする
設定を紹介します。
</p>

<ul class="org-ul">
<li>User Option: <code class="symbol">skk-henkan-strict-okuri-precedence</code>

<p>
この変数の値を <code>non-nil</code> に設定すると、見出し語と送り仮名がマッチした候
補を優先して表示します。上記の例では「▽おお*く」を変換したとき、まず
「多く」を出力し、次に「大く」を出力します。
</p>

<p>
この変数の値が <code>non-nil</code> の時は、変数 <code>skk-process-okuri-early</code> の値は <code>nil</code> で
なければなりません <sup><a id="fnr.89" name="fnr.89" class="footref" href="#fn.89">89</a></sup> 。
また、変数 <code>skk-henkan-okuri-strictly</code> が <code>non-nil</code> のときは、この変数
は無視されます。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-8-3" class="outline-4">
<h4 id="sec-6-8-3"><span class="section-number-4">6.8.3</span> 送り仮名の自動処理</h4>
<div class="outline-text-4" id="text-6-8-3">
<p>
この節では、「あげる」と入力してから <code class="key">SPC</code> を押しても「上げる」と変換する
機能を紹介します。
</p>
</div>

<div id="outline-container-sec-6-8-3-1" class="outline-5">
<h5 id="sec-6-8-3-1"><span class="section-number-5">6.8.3.1</span> どのように変換されるか</h5>
<div class="outline-text-5" id="text-6-8-3-1">

<ul class="org-ul">
<li>User Option: <code class="symbol">skk-auto-okuri-process</code>

<p>
この変数の値を <code>non-nil</code> に設定すると、送り仮名の自動処理が行われます。
</p>
</li>
</ul>

<p>
例えば <code>T a t i a g e r u <SPAN CLASS="KEY">SPC</SPAN></code> とキー入力した場合を考えます。このとき、検
索される見出し語の変化を追うと、
</p>

<ul class="org-ul">
<li>たちあげる
</li>
<li>たちあげr
</li>
<li>たちあg
</li>
<li>たちa
</li>
<li>たt
</li>
</ul>

<p>
のようになります。仮に個人辞書エントリが、
</p>

<pre class="example">
たちあg /立ち上/[げ/立ち上/]/[が/立ち上/]/
たt /建/断/経/立/[つ/建/断/経/立/]/[ち/建/断/経/立/]/[て/経/立/建/]/
</pre>

<p>
の２つのエントリを含むとすると、見出し語を後方から順に切り詰める過程で
「たちあg」と「たt」の２つの見出し語の検索時にこれらの辞書エントリがマッ
チします。
</p>

<p>
つまり、「たちあげる」という見出し語に対し、見出し語を最後尾から１文字ず
つ切り詰め、「切り詰めの結果残った文字列」と、「切り捨てられた先頭の文字
のローマ字プレフィックスを連結した文字列」を送りあり変換の見出し語として
検索します <sup><a id="fnr.90" name="fnr.90" class="footref" href="#fn.90">90</a></sup> 。
</p>

<p>
次に、マッチしたエントリの各候補に対し、切り捨てられた先頭の文字を送り仮
名として取るかどうかをチェックします。この判断には、個人辞書の送り仮名ブ
ロック部分 <sup><a id="fnr.91" name="fnr.91" class="footref" href="#fn.91">91</a></sup> を利用します。
</p>

<p>
「たちあg」の場合の送り仮名チェックの対象は、切り捨てられた最初の文字の
「げ」です。個人辞書に
</p>

<pre class="example">
[げ/立ち上/]
</pre>

<p>
の部分があることから、送り仮名として取るべきと判断します。また、「たt」の
場合の送り仮名チェックの対象は「ち」です。個人辞書に
</p>

<pre class="example">
[ち/建/断/経/立/]
</pre>

<p>
の部分があることから、送り仮名として取るべきと判断します。
</p>

<p>
こうして、送り仮名がマッチする候補が「立ち上」、「建」、「断」、「経」、
「立」の５つに絞られます。これらは文字列の長さ順に昇順にソートされ <sup><a id="fnr.92" name="fnr.92" class="footref" href="#fn.92">92</a></sup> 、
それぞれの候補と該当の見出し語から切り捨てられた文字列と連結したもの <sup><a id="fnr.93" name="fnr.93" class="footref" href="#fn.93">93</a></sup> を、
送り仮名の自動処理の最終候補として返します。上記の例は、「立ち上げる」、
「建ちあげる」、「断ちあげる」、「経ちあげる」、「立ちあげる」 の５つが
最終候補になります。
</p>

<p>
自動送り機能は、個人辞書のみを検索します。
</p>

<p>
ここで、自動送り機能の特徴を考えてみると、
</p>

<ul class="org-ul">
<li>長所
<ul class="org-ul">
<li>送り仮名の最初のローマ字表現を大文字で始める必要がない。
</li>
<li>送り仮名を正確に思い出せない場合に送り仮名を指定しなくとも変換できる。
</li>
</ul>
</li>
<li>短所
<ul class="org-ul">
<li>意図しない変換をされる割合が増える。
</li>
<li>個人辞書の送りありエントリが貧弱な場合は、自動処理ができない可能性が高い。
</li>
</ul>
</li>
</ul>

<p>
となります。
</p>

<p>
変数 <code>skk-auto-okuri-process</code> の値を <code>non-nil</code> に設定したとしても、従来
どおりの送りあり変換も同時にできますので、一度この機能を試してみることを
お勧めします <sup><a id="fnr.94" name="fnr.94" class="footref" href="#fn.94">94</a></sup> 。
</p>
</div>
</div>

<div id="outline-container-sec-6-8-3-2" class="outline-5">
<h5 id="sec-6-8-3-2"><span class="section-number-5">6.8.3.2</span> 辞書登録の際に注意すべきこと</h5>
<div class="outline-text-5" id="text-6-8-3-2">

<p>
送り仮名の自動処理を行っている場合 <sup><a id="fnr.95" name="fnr.95" class="footref" href="#fn.95">95</a></sup> には、辞書登録の際に注
意すべきことがあります。
</p>

<p>
個人辞書に見出し語「わたs」についてのエントリが全くない場合、あるいは個人
辞書のエントリが
</p>

<pre class="example">
わたs /渡/[し/渡/]/
</pre>

<p>
のような送り仮名のブロックを持たない場合を考えてみます。
ここで <code>W a t a s i t a <SPAN CLASS="KEY">SPC</SPAN></code> と入力すると、送り仮名の自動処理においては
送り仮名がマッチしないので、候補が見つからずに辞書登録モードに入ります。
</p>

<pre class="example">
W a t a s i t a <SPAN CLASS="KEY">SPC</SPAN>

  ------ Buffer: foo ------
  ▼わたした
  ------ Buffer: foo ------

  ------ Minibuffer -------
  [辞書登録] わたした*
  ------ Minibuffer -------
</pre>

<p>
辞書登録モードで <code>W a t a S i t a <SPAN CLASS="KEY">RET</SPAN></code> と送り仮名を明示的に入力して「渡し
た」と変換して登録したとします。この場合、登録する語の最後が平仮名で終わ
るので、その最後の平仮名の文字列（上記の例では「した」）が見出し語の最後
と一致するかを調べます。一致する場合には、辞書の登録を送りありエントリと
して行うのかどうかの確認を求めます。
</p>

<pre class="example">
W a t a S i t a

  ------ Minibuffer -------
  [辞書登録] わたした 渡した*
  ------ Minibuffer -------

<SPAN CLASS="KEY">RET</SPAN>

  -------------------------- Echo Area --------------------------
  Shall I register this as okuri-ari word: わたs /渡/ ? (y or n)
  -------------------------- Echo Area --------------------------
</pre>

<p>
この確認に対して <code>y</code> と回答した場合は、
</p>

<pre class="example">
わたs /渡/[し/渡/]/
</pre>

<p>
という辞書エントリが個人辞書の送りありエントリに書き込まれます。一方 <code>n</code> と
回答した場合は、個人辞書の送りなしエントリに
</p>

<pre class="example">
わたした /渡した/
</pre>

<p>
というエントリが書き込まれます。本例の場合は <code>y</code> と回答するのが正解です。
</p>

<ul class="org-ul">
<li>Variable: <code class="symbol">skk-kana-rom-vector</code>

<p>
この変数は、送り仮名部分をローマ字プレフィックスに分解する際に、参照さ
れます。
</p>
</li>
</ul>

<p>
変数 <code>skk-kana-rom-vector</code> の標準設定は以下のようになっています。
</p>

<pre class="example">
["x" "a" "x" "i" "x" "u" "x" "e" "x" "o" "k" "g" "k" "g" "k" "g"
 "k" "g" "k" "g" "s" "z" "s" "j" "s" "z" "s" "z" "s" "z" "t" "d"
 "t" "d" "x" "t" "d" "t" "d" "t" "d" "n" "n" "n" "n" "n" "h" "b"
 "p" "h" "b" "p" "h" "b" "p" "h" "b" "p" "h" "b" "p" "m" "m" "m"
 "m" "m" "x" "y" "x" "y" "x" "y" "r" "r" "r" "r" "r" "x" "w" "x"
 "x" "w" "n"]
</pre>

<p>
このベクトルは、それぞれ下記のかな文字をそのローマ字プレフィックスで現し
たものです。
</p>

<pre class="example">
ぁ  あ  ぃ  い  ぅ  う  ぇ  え  ぉ  お  か  が  き  ぎ  く  ぐ
け  げ  こ  ご  さ  ざ  し  じ  す  ず  せ  ぜ  そ  ぞ  た  だ
ち  ぢ  っ  つ  づ  て  で  と  ど  な  に  ぬ  ね  の  は  ば
ぱ  ひ  び  ぴ  ふ  ぶ  ぷ  へ  べ  ぺ  ほ  ぼ  ぽ  ま  み  む
め  も  ゃ  や  ゅ  ゆ  ょ  よ  ら  り  る  れ  ろ  ゎ  わ  ゐ
ゑ  を  ん
</pre>

<p>
これに従うと、見出し語中の送り仮名がローマ字プレフィックスに分解される際、
例えば「じ」は <code>j</code> に、「ち」は <code>t</code> に、「ふ」は <code>h</code> に、それぞれ分解され
ます。これらをそれぞれ <code>z</code> 、 <code>c</code> 、 <code>f</code> に変更することもできます。それに
は変数 <code>skk-kana-rom-vector</code> の該当部分を <code>z</code> 、 <code>c</code> 、 <code>f</code> に変更します。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-rom-kana-vector
      [<span style="font-style: italic;">"x"</span> <span style="font-style: italic;">"a"</span> <span style="font-style: italic;">"x"</span> <span style="font-style: italic;">"i"</span> <span style="font-style: italic;">"x"</span> <span style="font-style: italic;">"u"</span> <span style="font-style: italic;">"x"</span> <span style="font-style: italic;">"e"</span> <span style="font-style: italic;">"x"</span> <span style="font-style: italic;">"o"</span> <span style="font-style: italic;">"k"</span> <span style="font-style: italic;">"g"</span> <span style="font-style: italic;">"k"</span> <span style="font-style: italic;">"g"</span> <span style="font-style: italic;">"k"</span> <span style="font-style: italic;">"g"</span>
       <span style="font-style: italic;">"k"</span> <span style="font-style: italic;">"g"</span> <span style="font-style: italic;">"k"</span> <span style="font-style: italic;">"g"</span> <span style="font-style: italic;">"s"</span> <span style="font-style: italic;">"z"</span> <span style="font-style: italic;">"s"</span> <span style="font-style: italic;">"z"</span> <span style="font-style: italic;">"s"</span> <span style="font-style: italic;">"z"</span> <span style="font-style: italic;">"s"</span> <span style="font-style: italic;">"z"</span> <span style="font-style: italic;">"s"</span> <span style="font-style: italic;">"z"</span> <span style="font-style: italic;">"t"</span> <span style="font-style: italic;">"d"</span>
       <span style="font-style: italic;">"c"</span> <span style="font-style: italic;">"d"</span> <span style="font-style: italic;">"x"</span> <span style="font-style: italic;">"t"</span> <span style="font-style: italic;">"d"</span> <span style="font-style: italic;">"t"</span> <span style="font-style: italic;">"d"</span> <span style="font-style: italic;">"t"</span> <span style="font-style: italic;">"d"</span> <span style="font-style: italic;">"n"</span> <span style="font-style: italic;">"n"</span> <span style="font-style: italic;">"n"</span> <span style="font-style: italic;">"n"</span> <span style="font-style: italic;">"n"</span> <span style="font-style: italic;">"h"</span> <span style="font-style: italic;">"b"</span>
       <span style="font-style: italic;">"p"</span> <span style="font-style: italic;">"h"</span> <span style="font-style: italic;">"b"</span> <span style="font-style: italic;">"p"</span> <span style="font-style: italic;">"f"</span> <span style="font-style: italic;">"b"</span> <span style="font-style: italic;">"p"</span> <span style="font-style: italic;">"h"</span> <span style="font-style: italic;">"b"</span> <span style="font-style: italic;">"p"</span> <span style="font-style: italic;">"h"</span> <span style="font-style: italic;">"b"</span> <span style="font-style: italic;">"p"</span> <span style="font-style: italic;">"m"</span> <span style="font-style: italic;">"m"</span> <span style="font-style: italic;">"m"</span>
       <span style="font-style: italic;">"m"</span> <span style="font-style: italic;">"m"</span> <span style="font-style: italic;">"x"</span> <span style="font-style: italic;">"y"</span> <span style="font-style: italic;">"x"</span> <span style="font-style: italic;">"y"</span> <span style="font-style: italic;">"x"</span> <span style="font-style: italic;">"y"</span> <span style="font-style: italic;">"r"</span> <span style="font-style: italic;">"r"</span> <span style="font-style: italic;">"r"</span> <span style="font-style: italic;">"r"</span> <span style="font-style: italic;">"r"</span> <span style="font-style: italic;">"x"</span> <span style="font-style: italic;">"w"</span> <span style="font-style: italic;">"x"</span>
       <span style="font-style: italic;">"x"</span> <span style="font-style: italic;">"w"</span> <span style="font-style: italic;">"n"</span>])
</pre>
</div>

<p>
次にもうひとつ例を挙げます。「ありがさつき」に対して「有賀さつき」を登録
したい場合は、上記と同様に辞書登録をし、
</p>

<pre class="example">
-------------------------- Echo Area --------------------------
Shall I register this as okuri-ari entry: ありがs /有賀/ ? (y or n)
-------------------------- Echo Area --------------------------
</pre>

<p>
の確認に対して <code>n</code> と回答します。この結果、個人辞書の送りなしエントリには、
</p>

<pre class="example">
ありがさつき /有賀さつき/
</pre>

<p>
というエントリが書き込まれます。
</p>
</div>
</div>
</div>

<div id="outline-container-sec-6-8-4" class="outline-4">
<h4 id="sec-6-8-4"><span class="section-number-4">6.8.4</span> 送りあり変換の変換開始のタイミング</h4>
<div class="outline-text-4" id="text-6-8-4">
<ul class="org-ul">
<li>User Option: <code class="symbol">skk-process-okuri-early</code>

<p>
この変数の値を <code>non-nil</code> に設定すると、送りあり変換の変換開始のタイミン
グが早められます。つまり、送り仮名のローマ字プレフィックスの入力時点で
変換を開始します。
</p>

<pre class="example">
U g o K

  ------ Buffer: foo ------
  ▼動k
  ------ Buffer: foo ------
</pre>

<p>
送り仮名が分からないまま変換しているため、個人辞書が送り仮名に対応した
形に成長しません。つまり <code>うごk /動/</code> のような形態のままとなります。た
だし、
</p>

<pre class="example">
  うごk /動/[く/動/]/[か/動/]/[け/動/]/[き/動/]/[こ/動/]/
</pre>

<p>
のようなエントリが既に個人辞書にある場合、それを破壊することはありませ
ん <sup><a id="fnr.96" name="fnr.96" class="footref" href="#fn.96">96</a></sup> 。
</p>

<p>
このユーザオプションを <code>non-nil</code> に設定して SKK モードを起動すると、両
立できないオプションである下記オプションは自動的に <code>nil</code> に設定されます。
</p>

<ul class="org-ul">
<li><code>skk-kakutei-early</code>
</li>
<li><code>skk-auto-okuri-process</code>
</li>
<li><code>skk-henkan-okuri-strictly</code>
</li>
</ul>
<p>
既に SKK モードに入った後でこの変数の設定を変更した場合は、カレントバッ
ファで <code>C-x C-j</code> もしくは <code>C-x j</code> を２回打鍵して SKK モードを起動し直す
ことで、これらの変数間の衝突を調整します。
</p>

<ul class="org-ul">
<li><a href="#sec-6-7-4">暗黙の確定のタイミング</a>.
</li>

<li><a href="#sec-6-8-3">送り仮名の自動処理</a>.
</li>

<li><a href="#sec-6-8-1">送り仮名の厳密なマッチ</a>.
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-6-9" class="outline-3">
<h3 id="sec-6-9"><span class="section-number-3">6.9</span> 候補の順序</h3>
<div class="outline-text-3" id="text-6-9">
<p>
skk の初期設定では、変換で確定された単語は、次の変換時では最初に表示され
ます。この動作を変更して、効率良く変換する方法があります。
</p>

<p>
ここで解説するほか、確定辞書を用いた変換も、候補の順序に影響を与えます。
</p>

<p>
<a href="#sec-6-7-6">確定辞書</a>.
</p>
</div>

<div id="outline-container-sec-6-9-1" class="outline-4">
<h4 id="sec-6-9-1"><span class="section-number-4">6.9.1</span> 変換の学習</h4>
<div class="outline-text-4" id="text-6-9-1">
<p>
<code>skk-study.el</code> は、ある語 A を確定した場合に、A 及びその見出し語 A' に対
して、直前に変換した語 B とその見出し語 B' を関連語として登録しておき、
再度見出し語 A' の変換を行ったときに、B 及び B' のペアが直前の何回かに確
定した語の中に見つかれば、A を優先して出力する単純な学習効果を提供するプ
ログラムです。
</p>

<p>
<code>~/.skk</code> に <code>(require 'skk-study)</code> と書いて DDSKK を起動して下さい。以降、
かな漢字変換の学習を始めます。
</p>

<p>
例えば「梅雨には雨が降る」と変換した場合、
</p>

<ul class="org-ul">
<li>雨（あめ）の関連語 → 梅雨（つゆ）
</li>

<li>降る（ふr）の関連語 → 雨（あめ）
</li>
</ul>

<p>
という風に「直前に確定した語」を関連語として、語と語の関連性を学習します。
</p>

<p>
ここで続けて「傘を振る」と変換すると、個人辞書が更新されてしまい、見出し
語「ふr」の第一候補は「振る」になってしまいます。
</p>

<p>
しかし、更に続けて <code>A m e <SPAN CLASS="KEY">SPC</SPAN> g a H u R u</code> とキー入力すると、
<code>H u R u</code> （ふr）に対して「雨」（あめ）が関連語になっているため、
「ふr」と対で記憶されている「降る」に変換されるというわけです。
</p>

<p>
では、またここで「傘を振る」と変換し、個人辞書の第一候補が「振る」に更新
された状態で、
</p>

<pre class="example">
A m e <SPAN CLASS="KEY">SPC</SPAN> g a T a i r y o u <SPAN CLASS="KEY">SPC</SPAN> n i H u R u
</pre>

<p>
と変換すれば、「ふr」はどう変換されるでしょうか？　今度は「雨」（あめ）と
「ふr」の間に「大量」（たいりょう）が入っています <sup><a id="fnr.97" name="fnr.97" class="footref" href="#fn.97">97</a></sup> 。
</p>

<p>
実はちゃんと「雨が大量に降る」と変換されます。何故なら「ふr」の関連語を探
す際、 <code>skk-study-search-times</code> に指定された回数分だけ遡って、以前に確定
した語の中に関連語がないか探すのです。従って、この場合だと、２つ前の確定
情報を探した際に「雨」（あめ）を見つけ、これを関連語として「ふr」の値を決
めようとするのです。
</p>

<p>
<code>skk-study.el</code> に関するその他のオプションを説明します。
</p>

<ul class="org-ul">
<li>Variable: <code class="symbol">skk-study-sesearch-times</code>

<p>
現在の変換キーに対する関連変換キーをいくつまで遡って検索するか。標準設
定は 5 です。
</p>
</li>

<li>Variable: <code class="symbol">skk-study-max-distance</code>

<p>
この変数には integer を指定します。標準設定値は 30 です。直前に確定し
たポイントと今回の変換ポイントがこの距離以上離れていると学習データを蓄
積しないようにします。この変数は、必ずしも文章がバッファの <code>point-min</code> か
ら <code>point-max</code> へ流れるように書かれるものではなく、ポイントを前に戻した
り後へ移動したりして書かれることを想定しています。この変数に integer を
設定すると、直前の変換よりも前のポイントで変換した場合に学習データを蓄
積しないようにします。
</p>

<p>
この変数に <code>nil</code> を指定すると、直前に確定したポイントとの距離を考慮せず
に学習します。
</p>

<p>
なお、この変数の値にかかわらず、直前の変換バッファと現在変換を行ってい
るバッファが異なる場合は学習データを蓄積しません。
</p>
</li>

<li>Variable: <code class="symbol">skk-study-first-candidate</code>

<p>
この変数が <code>non-nil</code> であれば、第一候補で確定した際も学習します。 <code>nil</code> で
あれば、第一候補で確定したときのみ学習データを蓄積しません。学習データ
をできるだけ小さくしたい場合、この変数を <code>nil</code> にすると効果があるかもし
れません。この変数の標準設定値は <code>t</code> です。
</p>
</li>

<li>Variable: <code class="symbol">skk-study-file</code>

<p>
学習結果を保存するファイル名です。この変数の標準設定値は <code>~/.skk-study</code> です。
変数 <code>skk-user-directory</code> からも設定ができます。
</p>

<p>
<a href="#sec-6-2-1">設定ファイル</a>.
</p>
</li>

<li>Variable: <code class="symbol">skk-study-backup-file</code>

<p>
<code>~/.skk-study</code> のバックアップファイルです。
この変数の標準設定値は <code>~/.skk-study.BAK</code> です。
</p>
</li>

<li>Variable: <code class="symbol">skk-study-sort-saving</code>

<p>
学習データのデータ構造に関するものです。この変数の値が <code>non-nil</code> であれ
ば、学習結果をソートしてセーブします。この変数が影響を及ぼすのは学習デ
ータの単なる見映えの問題だけです。この変数の標準設定値は <code>nil</code> です。
</p>
</li>

<li>Variable: <code class="symbol">skk-study-check-alist-format</code>

<p>
学習データのデータ構造に関するものです。この変数の値が <code>non-nil</code> であれ
ば、学習結果の読み込み時に連想リストのフォーマットをチェックします。
これは主に debug の目的で使います。この変数の標準設定値は <code>nil</code> です。
</p>
</li>

<li>Key: <code class="symbol">M-x skk-study-switch-current-theme</code> (skk-study-switch-current-theme)

<p>
そのバッファで利用する学習テーマを切り替えます。プロンプト
</p>

<pre class="example">
------ Minibuffer -------
Theme of current buffer: *
------ Minibuffer -------
</pre>

<p>
に対して学習テーマ名を入力してください。例えば、科学の話題を書くバッフ
ァでは "<code>science</code>" と、法律の話題を書くバッファでは "<code>law</code>" などと入力
してください。
</p>
</li>

<li>Key: <code class="symbol">M-x skk-study-remove-theme</code> (skk-study-remove-theme)

<p>
不要な学習テーマを消去します。
</p>
</li>

<li>Key: <code class="symbol">M-x skk-study-copy-theme</code> (skk-study-copy-theme)

<p>
学習テーマを複製します。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-9-2" class="outline-4">
<h4 id="sec-6-9-2"><span class="section-number-4">6.9.2</span> 候補の順序の固定</h4>
<div class="outline-text-4" id="text-6-9-2">
<p>
skk の初期設定では、変換、選択された候補は、次回の変換では最初に表示され
ます。これに対し、毎回同じ順序で候補を表示させることができます。
</p>

<ul class="org-ul">
<li>Variable: <code class="symbol">skk-jisyo-fix-order</code>

<p>
<code>non-nil</code> であれば、確定の際に個人辞書の同音語の順序を変更せず、個人辞
書に新規追加する際は既出語の後に追加する。標準は <code>nil</code> 。
</p>
</li>
</ul>

<p>
これは、個人辞書のエントリの中の各候補の順序を変更しないことで実現されて
いますので、 <code>skk-study.el</code> による変換の学習と併用できます。
</p>

<p>
<a href="#sec-6-9-1">変換の学習</a>.
</p>

<p>
<code>skk-jisyo-fix-order</code> が <code>non-nil</code> の時、個人辞書の候補を手軽に並べ替える
方法は、現時点ではありません。個人辞書ファイルを直接編集する
コマンド <code>M-x skk-edit-private-jisyo</code> を実行して下さい。
</p>

<p>
<a href="#sec-6-10-10">個人辞書ファイルの編集</a>.
</p>

<p>
直前に変換したばかりの単語は、個人辞書の送りあり／なしエントリの一番上に
ありますので、すぐに見つけることができます。
</p>
</div>
</div>

<div id="outline-container-sec-6-9-3" class="outline-4">
<h4 id="sec-6-9-3"><span class="section-number-4">6.9.3</span> ベイズ統計を用いた学習</h4>
<div class="outline-text-4" id="text-6-9-3">
<p>
<code>skk-bayesian.el</code> は、直前の履歴のみ使用する <code>skk-study.el</code> に比べて、
更に拡張された学習機能です。ベイズ統計を用いて文脈から変換候補が選択され
る確率を計算して候補順をソートします。なお、機能が重なることから <code>skk-study.el</code> と
の併用はお勧めできません。
</p>

<p>
動作の枠組みは emacs lisp の <code>skk-bayesian.el</code> と ruby スクリプト <sup><a id="fnr.98" name="fnr.98" class="footref" href="#fn.98">98</a></sup> の <code>bskk</code> <sup><a id="fnr.99" name="fnr.99" class="footref" href="#fn.99">99</a></sup> が
連携することで実現しています。
</p>

<p>
<code>skk-bayesian.el</code> のインストールについては <code>bayesian/README.ja.md</code> を参照
してください。
</p>

<ul class="org-ul">
<li>User Option: <code class="symbol">skk-bayesian-debug</code>

<p>
<code>non-nil</code> ならば、以下のとおりデバッグ用のメッセージを表示します。
</p>

<ul class="org-ul">
<li><code>skk-bayesian.el</code> が吐き出すメッセージを <code>*Messages*</code> バッファに表示します。
</li>

<li><code>bskk</code> サブプロセスを <code>-d</code> オプションで起動させます。 <code>bskk</code> は <code>$HOME/tmp/bskk.log</code> に
メッセージを吐き出します。
</li>

<li>普段は非表示である <code>*skk-bayesian*</code> バッファを表示するようにします。
このバッファには <code>bskk</code> の出力が表示されます。
</li>
</ul>
</li>

<li>User Option: <code class="symbol">skk-bayesian-prefer-server</code>

<p>
<code>non-nil</code> ならば <code>skk-bayesian-host</code> の <code>skk-bayesian-port</code> に接続しま
す。 <code>nil</code> であれば <code>bskk</code> を emacs のサブプロセスとして起動します。
</p>
</li>

<li>Variable: <code class="symbol">skk-bayesian-host</code>

<p>
<code>bskk</code> サーバが稼動しているホスト名
</p>
</li>

<li>Variable: <code class="symbol">skk-bayesian-port</code>

<p>
<code>bskk</code> サーバのポート番号
</p>
</li>

<li>Variable: <code class="symbol">skk-bayesian-history-file</code>

<p>
not documented
</p>
</li>

<li>Variable: <code class="symbol">skk-bayesian-corpus-make</code>

<p>
not documented
</p>
</li>

<li>Variable: <code class="symbol">skk-bayesian-corpus-file</code>

<p>
not documented
</p>
</li>

<li>Key: <code class="symbol">M-x skk-bayesian-kill-process</code> (skk-bayesian-kill-process)

<p>
not documented
</p>
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-6-10" class="outline-3">
<h3 id="sec-6-10"><span class="section-number-3">6.10</span> 辞書関連</h3>
<div class="outline-text-3" id="text-6-10">
<p>
本節では、辞書の種別と形式、設定方法、その他辞書にまつわる動作や設定を説明しま
す。
</p>
</div>

<div id="outline-container-sec-6-10-1" class="outline-4">
<h4 id="sec-6-10-1"><span class="section-number-4">6.10.1</span> 辞書の種類</h4>
<div class="outline-text-4" id="text-6-10-1">
<ul class="org-ul">
<li>共有辞書

<p>
ユーザの変換操作によって内容が書き替えられることはありません。
</p>

<p>
<code>SKK-JISYO.S</code> (S 辞書)、 <code>SKK-JISYO.M</code> (M 辞書)、 <code>SKK-JISYO.ML</code> (ML 辞書)、
 <code>SKK-JISYO.L</code> (L 辞書) などがあります。通常、個人辞書よりもサイズが大き
く、省資源の面からユーザ間で共有して参照されます。
</p>

<p>
これら以外にも、共有辞書として使えるファイルが配布されています。それぞ
れの辞書の詳細については <a href="http://openlab.jp/skk/dic.html">http://openlab.jp/skk/dic.html</a> をご参照下さい。
</p>
</li>

<li>個人辞書

<p>
変数 <code>skk-jisyo</code> で指定されるファイル。DDSKK を一番最初に使い始めたとき
にホームディレクトリに自動的に作られます。その後の使用により日々刻々と
エントリが追加され、更新されていきます。なお、最初の個人辞書として S 辞
書をリネームして使用するのも良いかもしれません。
</p>
</li>

<li><code>skk-initial-search-jisyo</code>
</li>
<li><code>skk-kakutei-jisyo</code>

<p>
これらは共有辞書、個人辞書という区分のいずれにも属しません。これらは個
人毎に持つものを使用するか、ユーザ間で共有しているものを使用します。そ
の性格から、辞書内容の更新は行われず、参照のみ行われます。また使用目的
から、通常は小さい辞書を使用します。
</p>
</li>
</ul>

<p>
個人辞書、 <code>skk-initial-search-jisyo</code>, <code>skk-kakutei-jisyo</code> は Emacs のバ
ッファに読み込んで検索を行います。
</p>

<p>
共有辞書は設定により Emacs のバッファに読み込んで使用するか、または辞書サ
ーバ経由で使用します。
</p>
</div>
</div>

<div id="outline-container-sec-6-10-2" class="outline-4">
<h4 id="sec-6-10-2"><span class="section-number-4">6.10.2</span> 辞書ファイルの指定</h4>
<div class="outline-text-4" id="text-6-10-2">
<p>
この節では、辞書ファイルを指定する変数を説明します。個人辞書とバックアッ
プのディレクトリは、変数 <code>skk-user-directory</code> でも変更できます。
</p>

<p>
<a href="#sec-6-2-1">設定ファイル</a>.
</p>

<ul class="org-ul">
<li>Variable: <code class="symbol">skk-kakutei-jisyo</code>

<p>
確定変換のための辞書です。
</p>

<p>
<a href="#sec-6-7-6">確定辞書</a>.
</p>

<p>
一番最初に参照されます。確定変換をしない時は、初期設定の <code>nil</code> のままで
良いです。
</p>
</li>

<li>Variable: <code class="symbol">skk-initial-search-jisyo</code>

<p>
確定辞書の後、かつ、個人辞書の前に検索を行う辞書です。この辞書を適当に
指定することにより、最初に出てくる候補を操作することができます。例えば、
複数の専門用語毎の辞書を用意しておいて <code>skk-initial-search-jisyo</code> の値
を切り替えることにより、専門分野毎の専門用語を切り替えて入力することが
できます。
</p>

<p>
この辞書は、標準の配布パッケージには含まれていないので、使用するのであ
ればユーザ側で用意する必要があります。不要ならば、初期設定の <code>nil</code> のま
まで良いです。
</p>
</li>

<li>Variable: <code class="symbol">skk-jisyo</code>

<p>
個人辞書。DDSKK を一番最初に起動したとき、変数 <code>skk-jisyo</code> が指すファイ
ルが存在しなければ自動的に作られます。
</p>
</li>

<li>Variable: <code class="symbol">skk-backup-jisyo</code>

<p>
個人辞書の予備（バックアップ）です。検索の対象ではなく、あくまで個人辞
書のバックアップとして指定してください。
</p>
</li>

<li>Variable: <code class="symbol">skk-cdb-large-jisyo</code>

<p>
共有辞書のうち CDB 形式に変換した辞書です。指定した場合は <code>skk-large-jisyo</code> よ
りも先に検索されます。DDSKK 14.1 からは辞書サーバを経由せずとも CDB 形
式辞書ファイルを直接検索できるようになりました。
</p>
</li>

<li>Variable: <code class="symbol">skk-large-jisyo</code>

<p>
共有辞書のひとつ。バッファに読み込んで検索を行います。例えば <code>skk-large-jisyo</code> に S 辞書
か M 辞書を指定し、 <code>skk-aux-large-jisyo</code> に L 辞書を指定する、という
選択肢もあります。
</p>

<p>
また、辞書サーバ経由のアクセスも決して遅くはないので「共有辞書はバッフ
ァには読み込まない」という設定も自然であり、これには <code>skk-large-jisyo</code> を <code>nil</code> に
設定します。
</p>
</li>

<li>Variable: <code class="symbol">skk-aux-large-jisyo</code>

<p>
共有辞書のひとつ。辞書サーバに接続できない時にバッファに読み込んで検索
を行う辞書です。
</p>
</li>

<li>Variable: <code class="symbol">skk-extra-jisyo-file-list</code>

<p>
SKK では個人辞書の他に、共有辞書または辞書サーバを設定して利用するのが
一般的ですが、郵便番号辞書 <code>SKK-JISYO.zipcode</code> をはじめとした多彩な辞書
もメンテナンスされています。
</p>

<p>
これらの辞書を利用するために変数 <code>skk-search-prog-list</code> を手動で編集す
ることもできますが、この変数は厳密にはユーザ変数に分類されていないため、
予期しない問題が起こることもあります。
</p>

<p>
DDSKK 14.2 以降では追加の辞書を簡単に設定する方法を提供します。以下の例
を参考に変数 <code>skk-extra-jisyo-file-list</code> の設定を <code>~/.skk</code> に記述します。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-extra-jisyo-file-list
      (list '(<span style="font-style: italic;">"/usr/share/skk/SKK-JISYO.JIS3_4"</span> . euc-jisx0213)
            <span style="font-style: italic;">"/usr/share/skk/SKK-JISYO.zipcode"</span>))
</pre>
</div>

<p>
このように、辞書のファイル名のリストを指定します <sup><a id="fnr.100" name="fnr.100" class="footref" href="#fn.100">100</a></sup> 。
</p>

<p>
ただし、変数 <code>skk-jisyo-code</code> <sup><a id="fnr.101" name="fnr.101" class="footref" href="#fn.101">101</a></sup> とは異なる文字コードのファイルに
ついては、上記の例中の <code>SKK-JISYO.JIS3_4</code> のように「ファイル名と文字コー
ドのペア」を記述します。
</p>
</li>
</ul>

<p>
これらの変数の意味するところは初期設定でのものですが、 <code>skk-search-prog-list</code> の
設定で変更することもできます。
</p>

<p>
<a href="#sec-6-10-3-2">辞書検索のための関数</a>.
</p>
</div>
</div>

<div id="outline-container-sec-6-10-3" class="outline-4">
<h4 id="sec-6-10-3"><span class="section-number-4">6.10.3</span> 辞書の検索方法の設定</h4>
<div class="outline-text-4" id="text-6-10-3">
<p>
辞書の検索方法の指定は、変数 <code>skk-search-prog-list</code> で行われます。特に必
要が無ければ、読み飛ばして下さい。
</p>
</div>

<div id="outline-container-sec-6-10-3-1" class="outline-5">
<h5 id="sec-6-10-3-1"><span class="section-number-5">6.10.3.1</span> 辞書検索の設定の具体例</h5>
<div class="outline-text-5" id="text-6-10-3-1">

<p>
この節では <code>skk-search-prog-list</code> の初期設定を示し、大体の流れを説明しま
す。
</p>

<p>
DDSKK では、複数の辞書を扱うことが可能です。複数の辞書が同時並列に検索さ
れるのではなく、指定した順番に検索します。 <code>skk-search-prog-list</code> はリス
トであり、大雑把に言えば、確定されるまで先頭の要素から順に lisp として評
価されます。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">((skk-search-kakutei-jisyo-file skk-kakutei-jisyo 10000 t)
 (skk-search-jisyo-file skk-initial-search-jisyo 10000 t)
 (skk-search-jisyo-file skk-jisyo 0 t)
 (skk-okuri-search)
 (skk-search-cdb-jisyo skk-cdb-large-jisyo)
 (skk-search-jisyo-file skk-large-jisyo 10000)
 (skk-search-server skk-aux-large-jisyo 10000)
 (skk-search-ja-dic-maybe)
 (skk-search-extra-jisyo-files)
 (skk-search-katakana-maybe)
 (skk-search-sagyo-henkaku-maybe))
</pre>
</div>

<p>
この例では、
</p>

<ul class="org-ul">
<li><code>skk-kakutei-jisyo</code> （<a href="#sec-6-7-6">確定辞書</a>.）
</li>
<li><code>skk-initial-search-jisyo</code>
</li>
<li><code>skk-jisyo</code> （個人辞書）
</li>
</ul>

<p>
の順に検索を行い、次に
</p>

<ul class="org-ul">
<li>送り仮名の自動処理 （<a href="#sec-6-8-3">送り仮名の自動処理</a>.）
</li>
</ul>

<p>
を行い、その後
</p>

<ul class="org-ul">
<li><code>skk-cdb-large-jisyo</code> と
</li>

<li><code>skk-large-jisyo</code> の
</li>
</ul>

<p>
検索を順に行い、最後に <code>skk-aux-large-jisyo</code> に辞書サーバ経由でアクセスし
ています。
</p>

<p>
これらの辞書の意味について: <a href="#sec-6-10-2">辞書ファイルの指定</a>.
</p>

<p>
もし確定辞書で候補が見つかったらそのまま自動的に確定されます。１回 <code class="key">SPC</code> を
押す動作に対し、プログラム側では新たな候補を見つけるまで上記の動作を進め
ます。例えば、
</p>

<ul class="org-ul">
<li>確定辞書では候補は見つけられなかったが <code>skk-initial-search-jisyo</code> に候
補がある場合、そこでいったん止まりユーザにその候補を表示します。
</li>

<li>更に <code class="key">SPC</code> が押されると、次は個人辞書を検索します。そこで候補が見つかり、
しかもその候補が <code>skk-initial-search-jisyo</code> で見つけた候補とは異なるも
のであったときは、そこでまた止まりその候補をユーザに表示します。
</li>
</ul>

<p>
以降、共有辞書についても同様の繰り返しを行います。最後まで候補が見つから
なかった時は、辞書登録モードに入ります。
</p>
</div>
</div>

<div id="outline-container-sec-6-10-3-2" class="outline-5">
<h5 id="sec-6-10-3-2"><span class="section-number-5">6.10.3.2</span> 辞書検索のための関数</h5>
<div class="outline-text-5" id="text-6-10-3-2">

<p>
前節で見たとおり、変数 <code>skk-search-prog-list</code> を適切に定義することによっ
て辞書の検索方法を指定します。そこで使われる辞書検索のための関数を使いこ
なすことで、より細かい辞書検索の方法を指定することができます。
</p>

<ul class="org-ul">
<li>Function: <code class="symbol">skk-search-jisyo-file FILE LIMIT &amp;optional NOMSG</code>

<p>
通常の検索を行うプログラム。変数 <code>skk-henkan-key</code> を見出し語（検索文字
列）として、 <code>FILE</code> を被検索対象として変換検索を実施します。個人辞書、
共有辞書又は辞書サーバを使わずに検索を行いたい場合はこの関数を使用しま
す。
</p>

<p>
第１引数 <code>FILE</code> は、被検索対象となる辞書ファイルを指定します。 <code>nil</code> を
指定したときは、検索を行いません。 <code>FILE</code> で指定した辞書ファイルは Emacs の
バッファに読み込まれます。
</p>

<p>
第２引数 <code>LIMIT</code> は二分検索（バイナリ・サーチ）が行なわれる領域の大きさ
を指定します。ひとつの見出し語に対する変換動作に対し、検索対象の領域の
大きさ <sup><a id="fnr.102" name="fnr.102" class="footref" href="#fn.102">102</a></sup> が第２引数に指定された数値より小さくなるまでは二分
検索が行われ、最後に直線的検索（リニア・サーチ、 <code>search-forward</code> ）が
１回行われます。
</p>

<p>
第２引数に 0 を指定すると、常に直線的検索のみが行われます。個人辞書 <code>skk-jisyo</code> は
ソートされておらず二分検索が不可能であるため <code>LIMIT</code> を 0 にして下さい。
</p>

<p>
第３引数 <code>NOMSG</code> が <code>nil</code> ならば、辞書ファイルをバッファに読み込む関
数 <code>skk-get-jisyo-buffer</code> のメッセージをエコーエリアに出力します。 <code>non-nil</code> を
与えると出力しません。
</p>
</li>
</ul>


<ul class="org-ul">
<li>Function: <code class="symbol">skk-search-cdb-jisyo CDB-PATH</code>

<p>
not documented
</p>
</li>
</ul>

<ul class="org-ul">
<li>Function: <code class="symbol">skk-search-kakutei-jisyo-file FILE LIMIT &amp;optional NOMSG</code>

<p>
確定変換を行う検索プログラム。検索対象の辞書ファイルは Emacs のバッファ
に読み込まれます。検索対象のファイルから候補を見つけると、内部変数 <code>skk-kakutei-henkan-flag</code> を
立てて、いきなり確定します。このためユーザが確定操作を行う必要はありま
せん。引数の意味はいずれも <code>skk-search-jisyo-file</code> の場合と同様です。
</p>
</li>

<li>Function: <code class="symbol">skk-okuri-search</code>

<p>
自動送り処理を行うプログラム。変数 <code>skk-auto-okuri-process</code> の値が <code>non-nil</code> の
ときだけ機能します。個人辞書の送りありエントリを検索対象としているので、
個人辞書のバッファを流用します。そのため、専用の辞書バッファは作りません。
</p>

<p>
<a href="#sec-6-8-3">送り仮名の自動処理</a>.
</p>
</li>

<li>Function: <code class="symbol">skk-search-server FILE LIMIT &amp;optional NOMSG</code>

<p>
辞書サーバ経由で検索するプログラム。辞書サーバが使用不能になると辞書フ
ァイルを Emacs のバッファに読み込んで検索を行います。引数の意味はいずれ
も <code>skk-search-jisyo-file</code> と同じですが、これらは辞書を Emacs のバッフ
ァに読み込んだときのみ利用されます。
</p>

<p>
辞書サーバが使う辞書ファイルの設定については、
</p>

<ul class="org-ul">
<li><a href="#sec-4-3">辞書サーバを使いたいときの設定</a>.
</li>

<li><a href="#sec-6-10-5">サーバ関連</a>.
</li>
</ul>
<p>
をご覧下さい。
</p>
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-6-10-4" class="outline-4">
<h4 id="sec-6-10-4"><span class="section-number-4">6.10.4</span> Emacs 付属の辞書</h4>
<div class="outline-text-4" id="text-6-10-4">
<p>
GNU Emacs には、 <code>SKK-JISYO.L</code> を元に変換された <code>leim/ja-dic/ja-dic.el</code> と
いう辞書が付属しています。
</p>

<p>
DDSKK 14.2 からは、この <code>ja-dic.el</code> を利用したかな漢字変換（送りあり、送
りなし、接頭辞、接尾辞）が可能となりました。つまり、 <code>SKK-JISYO.L</code> などの
辞書ファイルを別途準備しなくても一応は DDSKK の使用が可能、ということです。
</p>

<p>
DDSKK 14.2 から追加された「ja-dic.el 検索機能」(<code>skk-search-ja-dic</code>) は、
</p>

<ul class="org-ul">
<li><code>skk-large-jisyo</code>
</li>
<li><code>skk-aux-large-jisyo</code>
</li>
<li><code>skk-cdb-large-jisyo</code>
</li>
<li><code>skk-server-host</code>
</li>
</ul>

<p>
の全てが無効な場合に有効となります。
</p>

<p>
ただし、 <code>SKK-JISYO.L</code> を利用する場合と比べて英数変換や数値変換などができ
ません。可能な限り <code>SKK-JISYO.L</code> などの辞書を利用することを推奨します。
</p>

<p>
<a href="#sec-3-4">辞書の入手</a>.
</p>

<ul class="org-ul">
<li>User Option: <code class="symbol">skk-inhibit-ja-dic-search</code>

<p>
この変数を <code>Non-nil</code> に設定すると、 <code>skk-large-jisyo</code> 等の値にかかわら
ず、あらゆる場面で <code>skk-search-ja-dic</code> を無効とします。
</p>
</li>

<li>Function: <code class="symbol">skk-search-ja-dic</code>

<p>
GNU Emacs に付属するかな漢字変換辞書 <code>ja-dic.el</code> を用いて検索する。現在
の GNU Emacs には <code>SKK-JISYO.L</code> を基に変換された <code>ja-dic.el</code> が付属して
いる。この辞書データを用いて送りあり、送りなし、接頭辞、接尾辞の変換を
行う。ただし、 <code>SKK-JISYO.L</code> のような英数変換、数値変換などはできず、ま
た「大丈夫」のように複合語とみなしうる語彙が大幅に削除されている。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-10-5" class="outline-4">
<h4 id="sec-6-10-5"><span class="section-number-4">6.10.5</span> サーバ関連</h4>
<div class="outline-text-4" id="text-6-10-5">
<p>
辞書サーバの基本的な設定: <a href="#sec-4-3">辞書サーバを使いたいときの設定</a>.
</p>

<ul class="org-ul">
<li>Variable: <code class="symbol">skk-servers-list</code>

<p>
この変数を使うと、複数のホスト上の辞書サーバを使い分けることができます。
この変数の値は、辞書サーバ毎の情報リストです。各リストは次の４つの要素
から成ります。
</p>

<ul class="org-ul">
<li>ホスト名
</li>
<li>辞書サーバ名（フルパス）
</li>
<li>辞書サーバが読み込む辞書ファイル名
</li>
<li>辞書サーバが使用するポート番号
</li>
</ul>
<p>
ただし、辞書ファイル名及びポート番号は、辞書サーバ自身が決定することも
あるため、そのような場合は <code>nil</code> として構いません。
</p>

<p>
例えば、以下のように設定します。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-servers-list
      '((<span style="font-style: italic;">"host1"</span> <span style="font-style: italic;">"/your/path/to/skkserv"</span> nil nil)
        (<span style="font-style: italic;">"host2"</span> <span style="font-style: italic;">"/your/path/to/skkserv"</span> nil nil)))
</pre>
</div>

<p>
上記の設定の場合、まず host1 上の辞書サーバと接続します。接続できなくな
ると、次に host2 上の辞書サーバと接続します。
</p>
</li>

<li>Variable: <code class="symbol">skk-server-report-response</code>

<p>
この変数の値が <code>non-nil</code> であれば、変換時に、辞書サーバの送出する文字を
受け取るまでに関数 <code>accept-process-output</code> が実行された回数をエコーエリ
アに報告します。
</p>

<pre class="example">
-------------------- Echo Area --------------------
辞書サーバの応答を 99 回待ちました
-------------------- Echo Area --------------------
</pre>
</li>

<li>Variable: <code class="symbol">skk-server-inhibit-startup-server</code>

<p>
標準設定値は <code>t</code> です。この変数を <code>nil</code> に設定すると、辞書サーバと接
続できない場合に <code>call-process</code> で辞書サーバプログラムの起動を試みます。
</p>

<p>
<code>inetd</code> 経由で起動する多くの辞書サーバは <code>call-process</code> で起動すること
ができませんが、 <code>skkserv</code> のように <code>call-process</code> で起動することができ
る辞書サーバを利用している場合には、この変数を <code>nil</code> に設定するのが良い
かもしれません。
</p>
</li>

<li>Variable: <code class="symbol">skk-server-remote-shell-program</code>

<p>
この変数には、リモートシェルのプログラム名を指定します。標準設定は、
システム依存性を考慮する必要があるため、以下の Emacs Lisp コードを評価
することにより決定されています。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">or</span> (getenv <span style="font-style: italic;">"REMOTESHELL"</span>)
    (<span style="font-weight: bold;">and</span> (boundp 'remote-shell-program) remote-shell-program)
    (<span style="font-weight: bold;">cond</span>
     ((eq system-type 'berkeley-unix)
      (<span style="font-weight: bold;">if</span> (file-exists-p <span style="font-style: italic;">"/usr/ucb/rsh"</span>) <span style="font-style: italic;">"/usr/ucb/rsh"</span> <span style="font-style: italic;">"/usr/bin/rsh"</span>))
     ((eq system-type 'usg-unix-v)
      (<span style="font-weight: bold;">if</span> (file-exists-p <span style="font-style: italic;">"/usr/ucb/remsh"</span>) <span style="font-style: italic;">"/usr/ucb/remsh"</span> <span style="font-style: italic;">"/bin/rsh"</span>))
     ((eq system-type 'hpux) <span style="font-style: italic;">"/usr/bin/remsh"</span>)
     ((eq system-type 'EWS-UX/V) <span style="font-style: italic;">"/usr/ucb/remsh"</span>)
     ((eq system-type 'pcux) <span style="font-style: italic;">"/usr/bin/rcmd"</span>)
     (t <span style="font-style: italic;">"rsh"</span>)))
</pre>
</div>
</li>

<li>Function: <code class="symbol">skk-server-version</code>

<p>
辞書サーバから得たバージョン文字列とホスト名文字列を表示する。
</p>

<pre class="example">
(skk-server-version)
-| SKK SERVER version (wceSKKSERV) 0.2.0.0 (ホスト名 foo:192.168.0.999: )
</pre>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-10-6" class="outline-4">
<h4 id="sec-6-10-6"><span class="section-number-4">6.10.6</span> サーバコンプリージョン</h4>
<div class="outline-text-4" id="text-6-10-6">
<p>
Server completion に対応した辞書サーバであれば、見出し語から始まる全ての
語句の検索が可能です。
</p>

<ul class="org-ul">
<li>Function: <code class="symbol">skk-comp-by-server-completion</code>

<p>
この関数を <code>skk-completion-prog-list</code> の要素に追加すると、▽モードにお
いて見出し語補完を実行します。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-to-list 'skk-completion-prog-list
             '(skk-comp-by-server-completion) t)
</pre>
</div>
</li>

<li>Function: <code class="symbol">skk-server-completion-search</code>

<p>
この関数を <code>skk-search-prog-list</code> の要素に追加すると、変換を実行する際
に <code>skk-server-completion-search-char</code> を付すことによって見出し語で始ま
るすべての候補を掲げます。
</p>
</li>
</ul>


<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-to-list 'skk-search-prog-list
             '(skk-server-completion-search) t)
</pre>
</div>

<pre class="example">
  ------ Buffer: foo ------
  ▽おおさか~*
  ------ Buffer: foo ------

<SPAN CLASS="KEY">SPC</SPAN>

  ------ Buffer: *候補* ------
  A:おおさかいかだいがく
  S:大阪医科大学
  D:おおさかいがい
  F:大阪以外
  J:おおさかいだい
  K:大阪医大
  L:おおさかいちりつだいがく
  ------ Buffer: *候補* ------
</pre>

<ul class="org-ul">
<li>Variable: <code class="symbol">skk-server-completion-search-char</code>

<p>
標準設定は <code>~</code> （チルダ、 <code>#x7e</code> ）です。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-10-7" class="outline-4">
<h4 id="sec-6-10-7"><span class="section-number-4">6.10.7</span> 辞書の書式</h4>
<div class="outline-text-4" id="text-6-10-7">
</div><div id="outline-container-sec-6-10-7-1" class="outline-5">
<h5 id="sec-6-10-7-1"><span class="section-number-5">6.10.7.1</span> 送りありエントリと送りなしエントリ</h5>
<div class="outline-text-5" id="text-6-10-7-1">

<p>
以下は個人辞書の一例です。
</p>

<pre class="example">
;; okuri-ari entries.
たとe /例/[え/例/]/
もt /持/[つ/持/]/[って/持/]/[た/持/]/[て/持/]/[ち/持/]/[と/持/]/
たすk /助/[け/助/]/
うごk /動/[く/動/]/[か/動/]/[け/動/]/[き/動/]/[こ/動/]/
ふくm /含/[め/含/]/[む/含/]/[ま/含/]/[み/含/]/[も/含/]/
:
;; okuri-nasi entries.
てん /点/・/天/
ひつよう /必要/
さくじょ /削除/
へんこう /変更/
じゅんじょ /順序/
ぐん /群/郡/
こうほ /候補/
いち /位置/一/壱/
</pre>

<p>
<code>てん /点/・/天/</code> を例にして説明します。これは「てん」が見出し語であり、
その候補が「点」、「・」、「天」です。候補はそれぞれ <code>/</code> によって区切られ
ています。SKK では、見出し語と候補群を合わせた <code>てん /点/・/天/</code> の一行
を <b>エントリ</b> と呼びます。
</p>

<p>
辞書は単純なテキストファイルで、必ず下記の２つの行を持っています。
</p>

<ul class="org-ul">
<li><code>;; okuri-ari entries.</code>
</li>
<li><code>;; okuri-nasi entries.</code>
</li>
</ul>

<p>
この２つの行は、それぞれ送り仮名あり、送り仮名なしのエントリの開始地点を
示すマークです。 <code>;; okuri-ari entries.</code> までの行で <code>;</code> を行頭に持つ行は
コメント行として無視されます。 <code>;; okuri-ari entries.</code> 以降にコメント行を
含むことはできません。
</p>

<p>
<code>;; okuri-ari entries.</code> と <code>;; okuri-nasi entries.</code> の間に囲まれた上半分
の部分が送り仮名ありのエントリです。これを <b>送りありエントリ</b> と呼びます。
</p>

<p>
<code>;; okuri-nasi entries.</code> 以下の下半分部分が送り仮名なしのエントリです。
これを <b>送りなしエントリ</b> と呼びます。
</p>

<p>
送りありエントリを検索する変換を <b>送りあり変換</b> 、送りなしエントリを検索
する変換を <b>送りなし変換</b> と呼びます。SKK では送り仮名の有無が変換方法の
ひとつの種別となっています。送り仮名がある変換では送りありエントリのみが
検索され、送り仮名がない変換では送りなしエントリのみが検索されます。
</p>

<p>
ひとつの見出し語についてのエントリは１行内に書かれます。２行以上にまたが
ることはできません。改行を含む候補については <code>(concat "改\n行")</code> のように、
評価すると改行を該当個所に挿入するような Lisp プログラムに変換して辞書に
収めています。
</p>

<p>
<a href="#sec-6-5-7">プログラム実行変換</a>.
</p>

<p>
送りありエントリは、基本的には <code>もt /持/</code> のようになっています。送り仮名
部分は、送り仮名をローマ字表現したときの１文字目 <sup><a id="fnr.103" name="fnr.103" class="footref" href="#fn.103">103</a></sup> で表現されていま
す。この１エントリで「持た」「持ち」「持つ」「持て」「持と」の５つの候補
に対応します。その５つの候補の送り仮名をローマ字プレフィックスで表現すれば、
いずれも <code>t</code> になります。
</p>
</div>
</div>

<div id="outline-container-sec-6-10-7-2" class="outline-5">
<h5 id="sec-6-10-7-2"><span class="section-number-5">6.10.7.2</span> 送りありエントリのブロック形式</h5>
<div class="outline-text-5" id="text-6-10-7-2">

<p>
個人辞書の送りありエントリには <code>[</code> と <code>]</code> に囲まれたブロックがあります。
これは、そのブロックの先頭にある平仮名を送り仮名に取る候補群です。
</p>

<pre class="example">
たとe /例/[え/例/]/
:
ふくm /含/[め/含/]/[む/含/]/[ま/含/]/[み/含/]/[も/含/]/
</pre>

<p>
この例で見ると、見出し語「たとe」の場合は「え」を送り仮名とするひとつブロ
ックから構成されています。見出し語「ふくm」の場合は「ま」「み」「む」「め」「も」
を送り仮名とする５ブロックに分けられています。
</p>

<p>
この送り仮名毎のブロック部分は、 <code>skk-henkan-okuri-strictly</code> あるい
は <code>skk-auto-okuri-process</code> のいずれかの変数が <code>non-nil</code> である場合に使用
されます。その場合、検索において、見出し語の一致に加えて、更に送り仮名も
マッチするかどうかをテストします。例えば、
</p>

<pre class="example">
おおk /大/多/[く/多/]/[き/大/]/
</pre>

<p>
というエントリがあるとします。同じ見出し語「おおk」であっても、送り仮名が
「き」であれば、候補は「大」のみで「多」は無視されます <sup><a id="fnr.104" name="fnr.104" class="footref" href="#fn.104">104</a></sup> 。
</p>

<p>
<a href="http://openlab.jp/skk/dic.html">http://openlab.jp/skk/dic.html</a> で配布されている共有辞書では、 <code>[</code> と <code>]</code> を
使用した送り仮名毎のブロックの形式に対応していません。個人辞書のみがこの
形式で書き込まれていきます。 <code>skk-henkan-okuri-strictly</code> が <code>nil</code> であっ
ても送り仮名のブロック形式で書き込まれます <sup><a id="fnr.105" name="fnr.105" class="footref" href="#fn.105">105</a></sup> 。
</p>
</div>
</div>

<div id="outline-container-sec-6-10-7-3" class="outline-5">
<h5 id="sec-6-10-7-3"><span class="section-number-5">6.10.7.3</span> エントリの配列</h5>
<div class="outline-text-5" id="text-6-10-7-3">

<p>
共有辞書は、送りありエントリは <code>;; okuri-ari entries.</code> から順に下方向に見
出し語をキーとして <b>降順</b> に配置され、送りなしエントリ
は <code>;; okuri-nasi entries.</code> から順に下方向に見出し語をキーとして <b>昇順</b> に
配置されます。降順／昇順に配置されるのは、辞書サイズが大きいことに配慮して
二分検索（バイナリサーチ）を行うためです <sup><a id="fnr.106" name="fnr.106" class="footref" href="#fn.106">106</a></sup> 。
</p>

<p>
一方、個人辞書は、一番最後に変換された語が最も手前に置かれます。つまり、
送りなしエントリは <code>;; okuri-ari entries.</code> を、送りありエントリは <code>;; okuri-nasi entries.</code> を
基点として最小ポイントに挿入されて辞書が更新されます <sup><a id="fnr.107" name="fnr.107" class="footref" href="#fn.107">107</a></sup> 。
個人辞書は、通常は共有辞書ほどはサイズが大きくないので、検索時にはそれぞ
れの基点から直線的検索（リニアサーチ）が行われます。最後に確定された語は、
ひとつのエントリの中の最初の位置に置かれます。
</p>
</div>
</div>
</div>

<div id="outline-container-sec-6-10-8" class="outline-4">
<h4 id="sec-6-10-8"><span class="section-number-4">6.10.8</span> 強制的に辞書登録モードへ入る</h4>
<div class="outline-text-4" id="text-6-10-8">
<p>
▼モードにて、エコーエリアに変換候補が表示されているときに <code>.</code> を打鍵する
と、強制的に辞書登録モードへ入ります。
</p>

<ul class="org-ul">
<li>Variable: <code class="symbol">skk-force-registration-mode-char</code>

<p>
強制的に辞書登録モードへ入るためのキーキャラクタをこの変数で定義します。
標準設定は <code>.</code> です。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-10-9" class="outline-4">
<h4 id="sec-6-10-9"><span class="section-number-4">6.10.9</span> 誤った登録の削除</h4>
<div class="outline-text-4" id="text-6-10-9">
<p>
誤って個人辞書に登録した単語は削除できます。
</p>

<p>
削除したい単語を変換により求め、その単語が表示された時点 <sup><a id="fnr.108" name="fnr.108" class="footref" href="#fn.108">108</a></sup> で <code>X</code> （大文字のエックス）
を打鍵します。ミニバッファに確認プロンプトが出るので <code>y e s</code> と答えると、
個人辞書の対応するエントリが削除されます。現在のバッファに先程入力した
「誤りの変換結果」も削除されます。
</p>

<p>
例えば、
</p>

<pre class="example">
さいきてき /再起的/
</pre>

<p>
というエントリを誤って登録してしまったという仮定で、この誤登録を削除する
場合を説明します。
</p>

<pre class="example">
S a i k i t e k i <SPAN CLASS="KEY">SPC</SPAN>

  ------ Buffer: foo ------
  ▼再起的*
  ------ Buffer: foo ------

X

  ------------------ MiniBuffer ------------------
  Really purge "さいきてき /再起的/" ? (yes or no) *
  ------------------ MiniBuffer ------------------

y e s <SPAN CLASS="KEY">RET</SPAN>

  ------ Buffer: foo ------
  *
  ------ Buffer: foo ------
</pre>
</div>
</div>

<div id="outline-container-sec-6-10-10" class="outline-4">
<h4 id="sec-6-10-10"><span class="section-number-4">6.10.10</span> 個人辞書ファイルの編集</h4>
<div class="outline-text-4" id="text-6-10-10">
<p>
<b>構文チェックが十分ではありません。個人辞書ファイルの編集は、自己責任のもと行ってください。</b>
</p>

<ul class="org-ul">
<li>Key: <code class="symbol">M-x skk-edit-private-jisyo</code> (skk-edit-private-jisyo)

<p>
このコマンドを使うと、個人辞書ファイルが開かれます <sup><a id="fnr.109" name="fnr.109" class="footref" href="#fn.109">109</a></sup> 。個人辞書
ファイルを開いて編集している最中も skk を使えますが、skk からの単語の登
録、削除はできません。他にも少し制限がありますが、気にならないでしょう。
</p>

<p>
編集が終わったら <code>C-c C-c</code> とキー入力と、個人辞書ファイルを保存してバッ
ファを閉じます。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-10-11" class="outline-4">
<h4 id="sec-6-10-11"><span class="section-number-4">6.10.11</span> 個人辞書の保存動作</h4>
<div class="outline-text-4" id="text-6-10-11">
<p>
個人辞書の保存動作について説明します。個人辞書の保存が行われる場合として、
次の４通りがあります。
</p>

<ul class="org-ul">
<li><code>C-x C-c</code> または <code>M-x save-buffers-kill-emacs</code> によって Emacs を終了す
る場合
</li>

<li><code>M-x skk-save-jisyo</code> と入力したか、メニューバーの <code>Save Jisyo</code> を選択し
た場合
</li>

<li>個人辞書の更新回数が、変数 <code>skk-jisyo-save-count</code> で指定された値に達し
た結果として、自動保存（オートセーブ）機能が働くとき。
</li>

<li>変数 <code>skk-save-jisyo-instantly</code> が <code>non-nil</code> であれば、単語登録（単語削
除）のたびに個人辞書を保存する。
</li>
</ul>

<p>
保存動作を分析して考えます。まず、 Emacs に読み込んだ個人辞書が更新されて
いるかどうかを調べます。更新されていたら保存動作に入ります。Emacs の個人
辞書バッファを一時ファイルに保存して、そのファイルサイズが現存の（セーブ
前の）個人辞書より小さくないかどうかをチェックします。個人辞書より小さい
ときは、保存動作を継続するかどうか、確認のための質問がされます <sup><a id="fnr.110" name="fnr.110" class="footref" href="#fn.110">110</a></sup> 。
</p>

<pre class="example">
--------------------------- Minibuffer -----------------------------
New ~/.skk-jisyo will be 11bytes smaller.  Save anyway?(yes or no)
--------------------------- Minibuffer -----------------------------
</pre>

<p>
ここで <code>n o <SPAN CLASS="KEY">RET</SPAN></code> と答えた場合は、そこで保存動作が中止され、個人辞書は以前
の状態のままになります。 <code>y e s <SPAN CLASS="KEY">RET</SPAN></code> と答えた場合は、元の個人辞書を退避用
の辞書 <code>~/.skk-jisyo.BAK</code>  に退避し、一時ファイルに保存した新しい個人辞書
を <code>skk-jisyo</code> に保存します。
</p>

<p>
もし、一時ファイルのサイズが 0 である場合は、なんらかの異常と考えられるた
め保存動作は直ちに中止されます。
その場合は <code>M-x skk-kill-emacs-without-saving-jisyo</code> で Emacs を終了させ、
個人辞書 (<code>skk-jisyo</code>) 及び個人辞書の退避用辞書 (<code>skk-backup-jisyo</code>) をチ
ェックするよう強くお勧めします <sup><a id="fnr.111" name="fnr.111" class="footref" href="#fn.111">111</a></sup> 。
</p>

<ul class="org-ul">
<li>User Option: <code class="symbol">skk-compare-jisyo-size-when-saving</code>

<p>
この変数の値を <code>nil</code> に設定すると、保存前の個人辞書とのサイズを比較しま
せん。
</p>
</li>

<li>Variable: <code class="symbol">skk-jisyo-save-count</code>

<p>
この変数で指定された回数、個人辞書が更新された場合に個人辞書が自動保存
されます。標準設定は 50 です。この値を <code>nil</code> にすると、個人辞書の自動
保存機能が無効になります。
</p>

<p>
ここで、個人辞書の更新回数は確定回数と一致します。また、同じ候補につい
て確定した場合でもそれぞれ１回と数えられます <sup><a id="fnr.112" name="fnr.112" class="footref" href="#fn.112">112</a></sup> 。
</p>
</li>

<li>User Option: <code class="symbol">skk-save-jisyo-instantly</code>

<p>
この変数が <code>non-nil</code> であれば、単語を登録するたび（削除するたび）に個人
辞書を保存します。
</p>
</li>

<li>User Option: <code class="symbol">skk-share-private-jisyo</code>

<p>
<code>Non-nil</code> であれば、複数の SKK による個人辞書の共有を考慮して辞書を更新
する。 SKK 起動後にこの変数を変更した場合は <code>M-x skk-restart</code> で反映さ
せること。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-10-12" class="outline-4">
<h4 id="sec-6-10-12"><span class="section-number-4">6.10.12</span> 変換及び個人辞書に関する統計</h4>
<div class="outline-text-4" id="text-6-10-12">
<p>
DDSKK は、かな漢字変換及び個人辞書に関する統計を取っており、Emacs の終了
時にファイル <code>~/.skk-record</code> に保存します。保存する内容は、以下の形式です。
</p>

<pre class="example">
Sun Jul 28 09:38:59 1996  登録:   4  確定:  285  確定率:  98%  語数:  3042
</pre>

<p>
上記の「語数:」の数は個人辞書 <code>skk-jisyo</code> に登録されている候補数ですが、
ここでは１行を１語として数えています。そのため、ひとつの見出し語に対して
複数の候補を持っている場合は、２つ目以降の候補を無視しています。
</p>

<ul class="org-ul">
<li>Variable: <code class="symbol">skk-record-file</code>

<p>
統計情報を保存するファイル名を指定します。
</p>

<p>
<a href="#sec-6-2-1">設定ファイル</a>.
</p>
</li>

<li>Variable: <code class="symbol">skk-keep-record</code>

<p>
この変数の値を <code>nil</code> に設定すると、本節で説明した統計機能を無効にします。
数値を設定すると、 <code>skk-record-file</code> を指定数値の行数より大きくしません。
</p>
</li>

<li>Variable: <code class="symbol">skk-count-private-jisyo-candidates-exactly</code>

<p>
この変数の値を <code>non-nil</code> に設定すると、「語数」の数え方を変更します。
具体的には、１行を１語として数えるのではなく、正確に語数を数えます。
なお、その分時間がかかります。また、この場合でも <code>[</code> と <code>]</code> に囲まれた
送り仮名毎のブロック形式内は数えません。
</p>
</li>

<li>Key: <code class="symbol">M-x skk-count-jisyo-candidates</code> (skk-count-jisyo-candidates)
</li>
</ul>

<p>
このコマンドを使うと、辞書の候補数を数えることができます。
</p>

<pre class="example">
M-x skk-count-jisyo-candidates

  --------------- MiniBuffer --------------
  Jisyo file: (default: /your/home/.skk-jisyo) ~/*
  --------------- MiniBuffer --------------

. s k k - j i s y o <SPAN CLASS="KEY">RET</SPAN>

  -------------- Echo Area --------------
  Counting jisyo candidates... 100% done
  -------------- Echo Area --------------

  ------ Echo Area ------
  3530 candidates
  ------ Echo Area ------
</pre>

<p>
ただし、 <code>[</code> と <code>]</code> に囲まれた送り仮名毎のブロック形式内は数えません。
</p>

<p>
また、メニューバーが使用できる環境では、メニューバーを使ってこのコマン
ドを呼び出すことができます。
</p>

<p>
<a href="emacs#Menu Bars">Menu Bars in GNU Emacs Manual</a>.
</p>
</div>
</div>

<div id="outline-container-sec-6-10-13" class="outline-4">
<h4 id="sec-6-10-13"><span class="section-number-4">6.10.13</span> 辞書バッファ</h4>
<div class="outline-text-4" id="text-6-10-13">
<p>
辞書検索プログラムを実行すると、必要ならば辞書が Emacs のバッファに読み込
まれます。このバッファを <b>辞書バッファ</b> と呼びます。
</p>

<p>
辞書バッファの名前は、
</p>

<pre class="example">
空白 + * + 辞書ファイル名（ディレクトリ抜き） + *
</pre>

<p>
という規則に基づいて付けられます。例えば、変数 <code>skk-large-jisyo</code> の値
が <code>/usr/local/share/skk/SKK-JISYO.L</code> であるとき、これに対する辞書バッフ
ァ名は "<code>_*SKK-JISYO.L*</code>" （アンダーバーは SPACE の意）となります。
</p>

<p>
このバッファのメジャーモードは <code>fundamental-mode</code> です。しかし、諸般の事
情により、変数 <code>major-mode</code> の値をシンボル <code>skk-jisyo-mode</code> と、
変数 <code>mode-name</code> の値を文字列 <code>SKK dic</code> としています <sup><a id="fnr.113" name="fnr.113" class="footref" href="#fn.113">113</a></sup> 。
</p>
</div>
</div>

<div id="outline-container-sec-6-10-14" class="outline-4">
<h4 id="sec-6-10-14"><span class="section-number-4">6.10.14</span> 辞書バッファの文字コードの設定</h4>
<div class="outline-text-4" id="text-6-10-14">
<ul class="org-ul">
<li>Variable: <code class="symbol">skk-jisyo-code</code>

<p>
この変数は、辞書ファイルの文字コードを決定し、以下のような値を取ります。
</p>

<ul class="org-ul">
<li><code>nil</code> （標準設定）この場合、シンボル <code>euc-jis-2004</code> が使われます <sup><a id="fnr.114" name="fnr.114" class="footref" href="#fn.114">114</a></sup> 。
</li>

<li>Emacs の coding system （コード系） <sup><a id="fnr.115" name="fnr.115" class="footref" href="#fn.115">115</a></sup>
</li>

<li><code>euc</code>, <code>ujis</code>, <code>sjis</code>, <code>jis</code> の文字列。 <code>skk-coding-system-alist</code> に
従って、順に <code>euc-jisx0213</code>, <code>euc-jisx0213</code>, <code>shift_jisx0213</code>, <code>iso-2022-jp-3-strict</code> の
各シンボルへ変換されます。
</li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-10-15" class="outline-4">
<h4 id="sec-6-10-15"><span class="section-number-4">6.10.15</span> 辞書バッファの buffer-file-name</h4>
<div class="outline-text-4" id="text-6-10-15">
<p>
Emacs には <code>save-some-buffers</code> という関数があります。この関数は、ファイル
に関連付けられている各バッファについて、変更があればファイルに保存します
が、実際に保存するかどうかをユーザに質問します。
</p>

<p>
Emacs のコマンドには <code>M-x compile</code> のように <code>save-some-buffers</code> を呼び出
すものがあります。もし、個人辞書の辞書バッファがファイル名と関連付けられ
ていたとしたら、こうしたコマンドを実行するたびに個人辞書を保存するかどう
か質問されるので、面倒です。
</p>

<p>
DDSKK では、このような事態を避けるため、辞書バッファにおける変数 <code>buffer-file-name</code> の
値を <code>nil</code> に設定しています。
</p>
</div>
</div>
</div>

<div id="outline-container-sec-6-11" class="outline-3">
<h3 id="sec-6-11"><span class="section-number-3">6.11</span> 注釈（アノテーション）</h3>
<div class="outline-text-3" id="text-6-11">
<p>
かな漢字変換の際に、候補に注釈（アノテーション）が登録されていれば、それ
を表示することができます。
</p>
</div>

<div id="outline-container-sec-6-11-1" class="outline-4">
<h4 id="sec-6-11-1"><span class="section-number-4">6.11.1</span> アノテーションの基礎</h4>
<div class="outline-text-4" id="text-6-11-1">
<p>
この節では、辞書の中でのアノテーションの取り扱いを説明します。
</p>

<p>
アノテーションは、ユーザが登録したものと、共有辞書に元々登録されているも
の、それ以外の情報源から取得されるものの３つに大別されます。
</p>

<p>
ユーザが付けたアノテーションを「ユーザアノテーション」と呼びます。ユーザ
アノテーションは、次の形式で個人辞書に登録されます。
</p>

<pre class="example">
きかん /期間/機関;*機関投資家/基幹;*基幹業務/
</pre>

<p>
上記のとおり、 <code>;</code> の直後に <code>*</code> が自動的に振られる <sup><a id="fnr.116" name="fnr.116" class="footref" href="#fn.116">116</a></sup> ことによって
ユーザが独自に登録したアノテーションであることが分かります。
</p>

<p>
一方、共有辞書に元々登録されているアノテーションを「システムアノテーショ
ン」と呼び、これは <code>;</code> の直後に <code>*</code> の文字を伴いません。システムアノテー
ションは、次の形式で辞書に登録されています。
</p>

<pre class="example">
いぜん /以前;previous/依然;still/
</pre>

<p>
システムアノテーションは L 辞書等に採用されています。
</p>

<p>
上記のいずれでもなく、外部の辞典その他の情報源から得られるものを「外部ア
ノテーション」といいます。外部アノテーションは Emacs Lisp パッケージであ
る lookup.el、 Apple macOS 付属の辞書、Wiktionary/Wikipedia などから取得可
能です。
</p>
</div>
</div>

<div id="outline-container-sec-6-11-2" class="outline-4">
<h4 id="sec-6-11-2"><span class="section-number-4">6.11.2</span> アノテーションの使用</h4>
<div class="outline-text-4" id="text-6-11-2">
<ul class="org-ul">
<li>Variable: <code class="symbol">skk-show-annotation</code>

<p>
この変数の値を <code>non-nil</code> に設定するとアノテーションを表示します <sup><a id="fnr.117" name="fnr.117" class="footref" href="#fn.117">117</a></sup> 。
</p>

<ul class="org-ul">
<li><code>(setq skk-show-annotation t)</code>

<p>
アノテーションを常に表示します。
</p>
</li>

<li><code>(setq skk-show-annotation '(not list))</code>

<p>
候補バッファ <sup><a id="fnr.118" name="fnr.118" class="footref" href="#fn.118">118</a></sup> ではアノテーションを表示しません。
</p>
</li>

<li><code>(setq skk-show-annotation '(not minibuf))</code>

<p>
ミニバッファにおけるかな漢字変換（単語登録時）では、アノテーションを
表示しません。
</p>
</li>

<li><code>(setq skk-show-annotation '(not list minibuf))</code>

<p>
*候補バッファ及びミニバッファでは、アノテーションを表示しません。
</p>
</li>

<li><code>(setq skk-show-annotation nil)</code>

<p>
いかなる場合もアノテーションを表示しません。
</p>
</li>
</ul>
</li>

<li>Variable: <code class="symbol">skk-annotation-delay</code>

<p>
アノテーションを表示するまでの遅延を秒で指定する。標準設定は 1.0 秒。
</p>
</li>
</ul>

<ul class="org-ul">
<li>Key: <code class="symbol">C-w</code> (skk-annotation-copy-key)

<p>
<code>C-w</code> をタイプすると、現在表示されているアノテーションを kill ring に保
存します <sup><a id="fnr.119" name="fnr.119" class="footref" href="#fn.119">119</a></sup> 。
</p>
</li>

<li>Variable: <code class="symbol">skk-annotation-show-as-message</code>

<p>
<code>Non-nil</code> （標準設定）であれば、アノテーションをエコーエリアに表示し
ます。 <code>nil</code> であれば、other-window を一時的に開いてアノテーションを表
示します。 <code>other-window</code> は、その候補を確定するか、その候補の選択を止
める（次の候補の表示又は quit）と自動的に閉じます。
</p>

<p>
この変数の値にかかわらず、変数 <code>skk-show-tooltip</code> が <code>non-nil</code> の場合は
アノテーションをツールティップで表示します。
</p>
</li>

<li>Key: <code class="symbol">^</code> (skk-annotation-toggle-display-char)

<p>
候補バッファで変換候補を一覧表示しているときにアノテーションの表示／非
表示を動的に切り替えるキーを設定します。標準設定は <code>^</code> です。
</p>

<pre class="example">
  ----- Buffer: *候補* -----
  A:射
  S:亥;[十二支](12)いのしし
  D:夷;夷狄
  F:姨;おば
  J:洟;はな
  K:痍;満身創痍
  L:維;維持
  ----- Buffer: *候補* -----

^

  ----- Buffer: *候補* -----
  A:射
  S:亥;
  D:夷;
  F:姨;
  J:洟;
  K:痍;
  L:維;
  ----- Buffer: *候補* -----
</pre>
</li>

<li>Variable: <code class="symbol">skk-annotation-function</code>

<p>
ユーザアノテーションとシステムアノテーションを区別することで、ユーザア
ノテーションだけを表示したり、あるいはその逆を行うことが可能です。
</p>

<p>
変数 <code>skk-annotation-function</code> に「表示したいアノテーションを <code>non-nil</code> と
判定する関数」を定義します。アノテーション文字列を引数にして変数 <code>skk-annotation-function</code> が
指し示す関数が <code>funcall</code> されて、戻り値が <code>non-nil</code> である場合に限って
アノテーションが表示されます。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-annotation-function
      (<span style="font-weight: bold;">lambda</span> (annotation)
          (eq (aref annotation 0) ?*)))
</pre>
</div>

<p>
上記の例では、アノテーションの先頭が <code>*</code> で始まる「ユーザアノテーション」
の場合に <code>t</code> を返すλ式を <code>skk-annotation-function</code> に定義しました。こ
れによってユーザアノテーションだけが表示されます。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-11-3" class="outline-4">
<h4 id="sec-6-11-3"><span class="section-number-4">6.11.3</span> アノテーションの登録</h4>
<div class="outline-text-4" id="text-6-11-3">
<ul class="org-ul">
<li>Key: <code class="symbol">M-x skk-annotation-add</code> (skk-annotation-add)

<p>
アノテーションを登録／修正するには、アノテーションを付けたい単語を確定
した直後に同じバッファで <code>M-x skk-annotation-add</code> と実行します。アノテー
ションを編集するバッファ <code>*SKK annotation*</code> が開いてカレントバッファに
なりますので、アノテーションとして表示する文章を編集してください。編集
が終わったら <code>C-c C-c</code> とタイプします。
</p>

<p>
その単語に既にアノテーションが付いている場合は、あらかじめ当該アノテー
ションを挿入して <code>*SKK annotation*</code> バッファを開きます。
</p>
</li>

<li>Key: <code class="symbol">M-x skk-annotation-kill</code> (skk-annotation-kill)

<p>
上記 <code>M-x skk-annotation-add</code> を実行したもののアノテーションを付けず
に <code>*SKK annotation*</code> バッファを閉じたいときは <code>C-c C-k</code> とタイプする
か <code>M-x skk-annotation-kill</code> を実行してください。
</p>
</li>

<li>Key: <code class="symbol">M-x skk-annotation-remove</code> (skk-annotation-remove)

<p>
最後に確定した候補からアノテーションを取り去りたいとき
は <code>M-x skk-annotation-remove</code> と実行します。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-11-4" class="outline-4">
<h4 id="sec-6-11-4"><span class="section-number-4">6.11.4</span> アノテーションとして EPWING 辞書を表示する</h4>
<div class="outline-text-4" id="text-6-11-4">
<p>
<code>skk-lookup.el</code> に含まれる関数 <code>skk-lookup-get-content</code> を活用することに
より、EPWING 辞書から得た内容をアノテーション表示することが可能です。辞書
検索ツールの Lookup <sup><a id="fnr.120" name="fnr.120" class="footref" href="#fn.120">120</a></sup> が正常にインストールされていることが前提
です。Lookup を新規にインストールした場合は、SKK をインストールし直す必要
があります。
</p>

<p>
EPWING 辞書の内容をアノテーション表示するには、２つの方法があります。
</p>
</div>

<div id="outline-container-sec-6-11-4-1" class="outline-5">
<h5 id="sec-6-11-4-1"><span class="section-number-5">6.11.4.1</span> skk-treat-candidate-appearance-function を設定する方法</h5>
<div class="outline-text-5" id="text-6-11-4-1">

<p>
候補の表示を装飾する関数を指定する変数 <code>skk-treat-candidate-appearance-function</code> を
設定する場合は、 <code>etc/dot.skk</code> に示されている設定例を以下のように変更して
ください。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">+ (<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">skk-lookup</span>)
  (<span style="font-weight: bold;">setq</span> skk-treat-candidate-appearance-function
        #'(lambda (candidate listing-p)
            (<span style="font-weight: bold;">let*</span> ((value (skk-treat-strip-note-from-word candidate))
                   (cand (car value))     <span style="font-weight: bold; font-style: italic;">;</span><span style="font-weight: bold; font-style: italic;">&#20505;&#35036;</span>
-                  (note (cdr value))     <span style="font-weight: bold; font-style: italic;">;</span><span style="font-weight: bold; font-style: italic;">&#27880;&#37320;</span>
+                  (note (skk-lookup-get-content cand listing-p))
                   (sep (<span style="font-weight: bold;">if</span> note          <span style="font-weight: bold; font-style: italic;">;</span><span style="font-weight: bold; font-style: italic;">&#12475;&#12497;&#12524;&#12540;&#12479;</span>
                   :
</pre>
</div>

<ul class="org-ul">
<li>Function: <code class="symbol">skk-lookup-get-content 単語 listing-p</code>

<p>
<b>単語</b> の意味を EPWING 辞書から取得します。オプション引数 <code>listing-p</code> が
<code>non-nil</code> ならば候補一覧用に一行の短い文字列を返しますが、 <code>nil</code> な
らば全体を返します。
</p>
</li>

<li>Variable: <code class="symbol">skk-lookup-get-content-nth-dic</code>

<p>
関数 <code>skk-lookup-get-content</code> が「どの EPWING 辞書から単語の意味を取得
するのか」を、ゼロを起点とした数値で指定します。docstring に例示した S 式
を評価してみてください。
</p>
</li>

<li>Key: <code class="symbol">M-x skk-lookup-get-content-setup-dic</code> (skk-lookup-get-content-setup-dic)

<p>
DDSKK の起動後に変数 <code>skk-lookup-get-content-nth-dic</code> の数値を変更した
場合は、このコマンドを必ず実行してください。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-11-4-2" class="outline-5">
<h5 id="sec-6-11-4-2"><span class="section-number-5">6.11.4.2</span> skk-annotation-lookup-lookup を設定する方法</h5>
<div class="outline-text-5" id="text-6-11-4-2">

<p>
次に変数 <code>skk-annotation-lookup-lookup</code> について説明します。この変数は EPWING 経
由アノテーションの設定を簡単にします。
</p>

<ul class="org-ul">
<li>Variable: <code class="symbol">skk-annotation-lookup-lookup</code>

<p>
<code>Non-nil</code> ならば <code>lookup.el</code> を利用してアノテーションを取得する。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-annotation-lookup-lookup t)
</pre>
</div>

<p>
この値をシンボル <code>always</code> に設定 <sup><a id="fnr.121" name="fnr.121" class="footref" href="#fn.121">121</a></sup> すると、候補一覧でも辞書サー
ビスを引く。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-annotation-lookup-lookup 'always)
</pre>
</div>
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-6-11-5" class="outline-4">
<h4 id="sec-6-11-5"><span class="section-number-4">6.11.5</span> Apple macOS 「辞書」サービスからアノテーションを取得する</h4>
<div class="outline-text-4" id="text-6-11-5">
<p>
Apple Mac OS X 10.5 (Leopard) 以降に標準で入っている国語辞典などからアノ
テーションが取得できます。
</p>

<p>
この機能を利用するには、python の拡張機能として <code>readline</code> と <code>pyobject-framework-DictionaryServices</code> が必要です。
後者については Apple Mac OS X 10.5 (Leopard) 以降の OS 標準の python に初
めからインストールされています。 <code>readline</code> については Apple Mac OS X 10.7 (Lion) 標
準の python ではインストールする必要がありません。Apple Mac OS X 10.6 (Snow Leopard) 以
前の場合は
</p>

<div class="org-src-container">

<pre class="src src-shell-script">% easy_install readline
</pre>
</div>

<p>
などの方法でインストールします。
</p>

<p>
今のところ、アノテーションを取得する辞典を選択することはできません。
Apple macOS (OS X) の「辞書」アプリ (<code>Dictionary.app</code>) を起動し、環境設定
から辞書の検索順を指定してください。国語辞典を上位に指定すれば使いやすく
なります。
</p>

<ul class="org-ul">
<li>User Option: <code class="symbol">skk-annotation-lookup-DictionaryServices</code>

<p>
<code>Non-nil</code> ならば Apple macOS (OS X) の辞書サービスを利用してアノテーシ
ョンを取得する。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-annotation-lookup-DictionaryServices t)
</pre>
</div>

<p>
この値をシンボル <code>always</code> に設定すると、候補一覧でも辞書サービスを引く <sup><a id="fnr.122" name="fnr.122" class="footref" href="#fn.122">122</a></sup> 。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-annotation-lookup-DictionaryServices 'always)
</pre>
</div>
</li>

<li>Variable: <code class="symbol">skk-annotation-python-program</code>

<p>
アノテーション取得のために呼びだす python のプログラム名。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-annotation-python-program <span style="font-style: italic;">"/usr/bin/python"</span>)
</pre>
</div>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-11-6" class="outline-4">
<h4 id="sec-6-11-6"><span class="section-number-4">6.11.6</span> Wikipedia/Wiktionary からアノテーションを取得する</h4>
<div class="outline-text-4" id="text-6-11-6">
<p>
候補にアノテーションの登録がない場合、アノテーションに代えて
</p>

<ul class="org-ul">
<li><a href="http://ja.wiktionay.org/">Wiktionary</a>
</li>

<li><a href="http://ja.wikipedia.org/">Wikipedia</a>
</li>
</ul>

<p>
による解説を表示することができます。他のアノテーションが変換時に自動的に
表示されるのに対し、 Wikipedia/Wiktionary アノテーションは基本的にユーザ
の指示によって取得される点が異なります。
</p>

<p>
▼モードで候補を表示しているときに <code>C-i</code> を押すと、 <code>skk-annotation-other-sources</code> で
指定された順で解説を取得してエコーエリアに表示 <sup><a id="fnr.123" name="fnr.123" class="footref" href="#fn.123">123</a></sup> します。
</p>

<pre class="example">
B o k u j o u

  ----- Buffer: foo -----
  ▽ぼくじょう*
  ----- Buffer: foo -----

<SPAN CLASS="KEY">SPC</SPAN>

  ----- Buffer: foo -----
  ▼牧場*
  ----- Buffer: foo -----

C-i

  ----------------------------- Echo Area ------------------------------
  牧場（ぼくじょう）とは、ウシ、ウマなどの家畜を飼養する施設。訓読みされ
  てまきばと呼ばれることもある。
  ----------------------------- Echo Area ------------------------------
</pre>

<p>
エコーエリアに解説が表示されている最中に <code>C-o</code> を押すと、関数 <code>browse-url</code> を
用いて、その解説の元となった URL をブラウズします。
</p>

<ul class="org-ul">
<li>Variable: <code class="symbol">skk-annotation-wikipedia-key</code>

<p>
標準設定は <code>C-i</code> です。
</p>
</li>

<li>Variable: <code class="symbol">skk-annotation-browse-key</code>

<p>
標準設定は <code>C-o</code> です。EWW (Emacs Web Wowser) で閲覧したい場合は、次
のとおり設定してください。 <a href="eww#Top">eww#Top</a>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> browse-url-browser-function 'eww-browse-url)
</pre>
</div>
</li>

<li>Variable: <code class="symbol">skk-annotation-other-sources</code>

<p>
アノテーションを取得する SKK 辞書以外のソースを指定します。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-11-7" class="outline-4">
<h4 id="sec-6-11-7"><span class="section-number-4">6.11.7</span> 外部コマンドからアノテーションを取得する</h4>
<div class="outline-text-4" id="text-6-11-7">
<p>
外部コマンドからアノテーションを取得できます。
</p>

<ul class="org-ul">
<li>Variable: <code class="symbol">skk-annotation-lookup-dict</code>

<p>
<code>Non-nil</code> ならば、 <code>skk-annotation-dict-program</code> に指定された外部コマン
ドからアノテーションを指定します。
</p>
</li>

<li>Variable: <code class="symbol">skk-annotation-dict-program</code>

<p>
アノテーションを取得するための外部コマンド名を指定します。
</p>
</li>

<li>Variable: <code class="symbol">skk-annotation-dict-program-arguments</code>

<p>
アノテーションを取得に使う外部コマンドに渡す引数を指定します。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-11-8" class="outline-4">
<h4 id="sec-6-11-8"><span class="section-number-4">6.11.8</span> 各種アノテーション機能を SKK の枠をこえて活用する</h4>
<div class="outline-text-4" id="text-6-11-8">
<p>
前述した各種外部アノテーション (lookup.el + EPWING 辞書、 Apple macOS 辞書、
Wikipedia/Wiktionary) は、SKK の変換モードだけでなく Emacs のあらゆる状
況で辞書引き機能として使うことができます。そのためには、コマンド
<code>skk-annotation-lookup-region-or-at-point</code> を任意にキー定義します。
</p>

<ul class="org-ul">
<li>Function: <code class="symbol">skk-annotation-lookup-region-or-at-point &amp;optional PREFIX-ARG START END</code>

<p>
このコマンドは、領域が指定されていればその領域の文字列をキーワードとし
て Lookup.el, Apple macOS 辞書サービス、または Wikipedia/Wiktionary ア
ノテーションを探し、表示します。領域が指定されていなければ、可能な範囲
でその位置にある単語（始点と終点）を推測します。
</p>
</li>
</ul>

<p>
一例として、以下のキー割当を紹介します。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-set-key <span style="font-style: italic;">"\M-i"</span> 'skk-annotation-lookup-region-or-at-point)
</pre>
</div>

<p>
このようにしておくと、何かの意味が調べたくなったとき、領域選択して <code>M-i</code> と
打鍵すればその場で辞書を引くことができます。
</p>

<p>
さらに、ユーザオプション <code>skk-annotation-other-sources</code> の３番目 (Apple macOS で
は４番目) は標準で <code>en.wiktionary</code> になっています。例えば、英文を読んでい
て buffer という語の正確な意味を参照したくなったとします。そのときは単語 buffer に
ポイントを合わせて <code>M-3 M-i</code> (Apple macOS では <code>M-4 M-i</code>) とプレフィック
ス付でコマンドを実行してみてください <sup><a id="fnr.124" name="fnr.124" class="footref" href="#fn.124">124</a></sup> 。
</p>

<pre class="example">
----- Buffer: *scratch* -----
;; This buffer* is for notes you don't want to save, and for ...
----- Buffer: *scratch* -----

M-3 M-i (Apple macOS では M-4 M-i)
</pre>

<p>
すると SKK モードでのアノテーションと同様、以下のような説明が表示されます。
</p>

<pre class="example">
-------------------- Echo Area --------------------
 English, Noun
buffer (plural&amp;#160;buffers)
 1: Someone or something that buffs.
 2: (chemistry) A solution used to stabilize the pH (acidity) of a
 liquid.
 3: (computing) A portion of memory set aside to store data, often
 before it is sent to an external device or as it is received from an
 external device.
-------------------- Echo Area --------------------
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-6-12" class="outline-3">
<h3 id="sec-6-12"><span class="section-number-3">6.12</span> 文字コード関連</h3>
<div class="outline-text-3" id="text-6-12">
</div><div id="outline-container-sec-6-12-1" class="outline-4">
<h4 id="sec-6-12-1"><span class="section-number-4">6.12.1</span> 文字コードまたはメニューによる文字入力</h4>
<div class="outline-text-4" id="text-6-12-1">
<p>
かなモードで <code>\</code> キーを打鍵すると、ミニバッファに
</p>

<pre class="example">
---------------------------- Minibuffer -----------------------------
○○の文字を指定します。7/8 ビット JIS コード (00nn), 区点コード (00-00),
UNICODE (U+00nn), または [RET] (文字一覧): *
---------------------------- Minibuffer -----------------------------
</pre>

<p>
というプロンプトが表示され、文字コード（JIS コード、EUC コードまたは区点
番号）またはメニューによる文字入力が促されます。
</p>

<p>
上記例示の○○部分は変数 <code>skk-kcode-charset</code> の値であり、その初期値
は <code>japanese-jisx0208</code> 又は <code>japanese-jisx0213-1</code> です。初期値は環境によ
って自動的に設定されます。キー <code>\</code> の代わりに <code>C-u \</code> と入力すると、異な
る文字集合 (charset) を指定する事ができます。
</p>

<p>
ここで、文字コードがあらかじめ分かっている場合には、その文字コードを入力
します。例えば <b>℃</b> の文字コードは、JIS コードでは <code>216e</code> 、EUCコードで
は <code>a1ee</code> なので、いずれかの文字コードを入力すれば ℃ が現在のバッファに
挿入されます。
</p>

<p>
区点番号で入力するには <code>01-78</code> のように区と点の間にハイフン <code>-</code> を入れる
必要があります。ハイフン <code>-</code> で区切った３組の数字は JIS X 0213 の２面を指
定したとみなします。例えば <code>2-93-44</code> で「魚花」（ほっけ U+29e3d）が入力で
きます。
</p>
</div>
</div>

<div id="outline-container-sec-6-12-2" class="outline-4">
<h4 id="sec-6-12-2"><span class="section-number-4">6.12.2</span> メニューによる文字入力</h4>
<div class="outline-text-4" id="text-6-12-2">
<p>
文字コードが不明の文字を入力するには、文字コードを入力せずにそのまま
<code class="key">RET</code> キーを入力します。するとミニバッファに以下のような表示が現れま
す。
</p>

<pre class="example">
---------------------------- Minibuffer -----------------------------
A:　  S:￣  D:〜  F:｝  G:＝  H:¢  Q:◆  W:　  E:∩  R:　  T:≡  Y:　
---------------------------- Minibuffer -----------------------------
</pre>

<p>
これを <b>第１段階のメニュー</b> と呼びます。第１段階のメニューでは、JIS 漢字
をコードの順に 16 文字毎に１文字抽出し、ミニバッファに一度に 12 文字ずつ
表示しています（上記の例では、JIS コード 2121（全角スペース）、2131、2141、
2151&#x2026; の文字がそれぞれ表示されています）。ここで <code class="key">SPC</code> を打鍵すると次の
候補群を表示します（文字コードの値を 16 * 12 = 192 ずつ増やします）。
キー <code>x</code> を打鍵するとひとつ前の候補群に戻ります。
</p>

<p>
キー <code>a</code>, <code>s</code>, <code>d</code>, <code>f</code>, <code>g</code>, <code>h</code>, <code>q</code>, <code>w</code>, <code>e</code>, <code>r</code>, <code>t</code>, <code>y</code> のいずれ
かを打鍵する <sup><a id="fnr.125" name="fnr.125" class="footref" href="#fn.125">125</a></sup> と、そのキーに対応する文字から始まる 16 個の文字
が文字コード順に表示されます。これを <b>第２段階のメニュー</b> と呼びます。例
えば、第１段階のメニューが上記の状態のときに <code>d</code> を打鍵すると 第２段階の
メニューは以下のようになります。
</p>

<pre class="example">
--------------------------------- Minibuffer -----------------------------
A:〜 S:‖ D:｜ F:… G:‥ H:‘ J:’ K:“ L:” Q:（ W:） E:〔 R:〕 T:［ Y:］ U:｛
--------------------------------- Minibuffer -----------------------------
</pre>

<p>
ここで、キー <code>a</code>, <code>s</code>, <code>d</code>, <code>f</code>, <code>g</code>, <code>h</code>, <code>j</code>, <code>k</code>, <code>l</code>, <code>q</code>, <code>w</code>, <code>e</code>, <code>r</code>, <code>t</code>, <code>y</code>, <code>u</code> の
いずれかを打鍵すると、対応する文字がカレントバッファに挿入されてメニュー
による入力が終了します。
</p>

<p>
第２段階のメニューが表示されているときも <code class="key">SPC</code> と <code>x</code> キーにより第２段階
のメニューが前進、後退します。
</p>

<p>
また、キー <code>&lt;</code> 及び <code>&gt;</code> により、メニューを１文字分だけ移動します。例えば、
第２段階のメニューが上記の状態のときにキー <code>&lt;</code> を打鍵すると、メニューは以
下のようになります。
</p>

<pre class="example">
--------------------------------- Minibuffer -----------------------------
A:＼ S:〜 D:‖ F:｜ G:… H:‥ J:‘ K:’ L:“ Q:” W:（ E:） R:〔 T:〕 Y:［ U:］
--------------------------------- Minibuffer -----------------------------
</pre>

<p>
第１段階あるいは第２段階のメニューが表示されているときにキー <code>?</code> を打鍵す
ると、そのときのキー <code>A</code> に対応する文字（上記の例では <b>＼</b> ）の文字コード
が表示されます。
</p>

<ul class="org-ul">
<li>Variable: <code class="symbol">skk-kcode-method</code>

<p>
キー <code>\</code> の打鍵で起動する <code>skk-input-by-code-or-menu</code> の挙動を調節しま
す。
</p>

<ul class="org-ul">
<li>シンボル <code>char-list</code>

<p>
キー <code>\</code> の打鍵で「文字コード一覧」 (<code>skk-list-chars</code>) を起動します。
</p>
</li>

<li>シンボル <code>code-or-char-list</code>

<p>
キー <code>\</code> の打鍵で「文字コード」 (<code>skk-input-by-code</code>) を起動します。
JIS コード／区点コード入力プロンプトの表示に対して単に <code class="key">RET</code> をタイプ
した場合、「文字コード一覧」 (<code>skk-list-chars</code>) を起動します。
</p>
</li>

<li>シンボル <code>this-key</code>

<p>
キー <code>\</code> の打鍵で <code>\</code> を挿入します。
</p>
</li>

<li>上記シンボル以外

<p>
キー <code>\</code> の打鍵で「文字コード」 (<code>skk-input-by-code</code>) を起動します。
JIS コード／区点コード入力プロンプトの表示に対して単に <code class="key">RET</code> をタイプ
した場合、「メニュー入力」を起動します。
</p>
</li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-12-3" class="outline-4">
<h4 id="sec-6-12-3"><span class="section-number-4">6.12.3</span> 文字コード一覧</h4>
<div class="outline-text-4" id="text-6-12-3">
<p>
<code>M-x skk-list-chars</code> と実行すると、変数 <code>skk-kcode-charset</code> が指す文字集
合に従ってバッファ <code>*skk-list-chars*</code> に文字の JIS コード一覧が表示されま
す。プレフィックス付きで、つまり <code>C-u M-x skk-list-chars</code> と実行すると、
カーソル位置の文字に照準をあわすようコード一覧を表示します。
</p>

<pre class="example">
-------------------- *skk-list-chars* --------------------
variable skk-kcode-charset's value is `japanese-jisx0208'.

01-#x--- 0-- 1-- 2-- 3-- 4-- 5-- 6-- 7-- 8-- 9-- A-- B-- C-- D-- E-- F
　 2120 　　　　、　。　，　．　・　：　；　？　！　゛　゜　´　｀　¨
　 2130 ＾　￣　＿　ヽ　ヾ　ゝ　ゞ　〃　仝　々　〆　〇　ー　—　‐　／
　 2140 ＼　〜　‖　｜　…　‥　‘　’　“　”　（　）　〔　〕　［　］
　 2150 ｛　｝　〈　〉　《　》　「　」　『　』　【　】　＋　−　±　×
　 2160 ÷　＝　≠　＜　＞　≦　≧　∞　∴　♂　♀　°　′　″　℃　￥
　 2170 ＄　¢　£　％　＃　＆　＊　＠　§　☆　★　○　●　◎　◇
-------------------- *skk-list-chars* --------------------
</pre>

<ul class="org-ul">
<li>Key: <code class="symbol">C-f</code> (next-completion)
</li>
<li>Key: <code class="symbol">f</code> (next-completion)
</li>
<li>Key: <code class="symbol">l</code> (next-completion)

<p>
カーソル移動
</p>
</li>

<li>Key: <code class="symbol">C-b</code> (previous-completion)
</li>
<li>Key: <code class="symbol">b</code> (previous-completion)
</li>
<li>Key: <code class="symbol">h</code> (previous-completion)

<p>
カーソル移動
</p>
</li>

<li>Key: <code class="symbol">C-n</code> (skk-list-chars-next-line)
</li>
<li>Key: <code class="symbol">n</code> (skk-list-chars-next-line)
</li>
<li>Key: <code class="symbol">j</code> (skk-list-chars-next-line)

<p>
カーソル移動
</p>
</li>

<li>Key: <code class="symbol">C-p</code> (skk-list-chars-previous-line)
</li>
<li>Key: <code class="symbol">p</code> (skk-list-chars-previous-line)
</li>
<li>Key: <code class="symbol">k</code> (skk-list-chars-previous-line)

<p>
カーソル移動
</p>
</li>

<li>Key: <code class="symbol">C-x C-x</code> (skk-list-chars-goto-point)

<p>
カーソル移動
</p>
</li>

<li>Key: <code class="symbol"><SPAN CLASS="KEY">RET</SPAN></code> (skk-list-chars-insert)
</li>
<li>Key: <code class="symbol">i</code> (skk-list-chars-insert)

<p>
文書バッファへ文字を挿入
</p>
</li>

<li>Key: <code class="symbol">g</code> (skk-list-chars-jump)
</li>

<li>Key: <code class="symbol">\</code> (skk-list-chars-other-charset)
</li>
<li>Key: <code class="symbol">o</code> (skk-list-chars-other-charset)

<p>
文字集合の切り替え
</p>
</li>

<li>Key: <code class="symbol">c</code> (skk-list-chars-code-input)

<p>
文字コード入力
</p>
</li>

<li>Key: <code class="symbol">$</code> (skk-list-chars-display-code)

<p>
カーソル位置の文字の文字コードを表示
</p>
</li>

<li>Key: <code class="symbol">w</code> (skk-list-chars-copy)
</li>

<li>Key: <code class="symbol">q</code> (skk-list-chars-quit)

<p>
skk-list-chars を抜ける
</p>
</li>
</ul>

<p>
ほか、Emacs のコマンド <code>M-x list-charset-chars</code> や <code>C-x 8 <SPAN CLASS="KEY">RET</SPAN></code> も有用でしょう。
</p>

<ul class="org-ul">
<li>Variable: <code class="symbol">skk-list-chars-table-header-face</code>

<p>
コード一覧の枠線などに適用するフェイスです。
</p>
</li>

<li>Variable: <code class="symbol">skk-list-chars-face</code>

<p>
プレフィックス付きで実行したときの照準のフェイスです。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-12-4" class="outline-4">
<h4 id="sec-6-12-4"><span class="section-number-4">6.12.4</span> 文字コードを知る方法</h4>
<div class="outline-text-4" id="text-6-12-4">
<p>
かなモード／カナモードでキー <code>$</code> を打鍵する <sup><a id="fnr.126" name="fnr.126" class="footref" href="#fn.126">126</a></sup> と、現在のポイン
ト位置の直後にある文字の文字コードをエコーエリア <sup><a id="fnr.127" name="fnr.127" class="footref" href="#fn.127">127</a></sup> に表示します。
</p>

<p>
例えば、カーソルを文字 <code>А</code> の上に置いて <code>$</code> を入力すると、
</p>

<pre class="example">
-------------------- Echo Area --------------------
`А',KUTEN:07-01, JIS:#x2721, EUC:#xa7a1, SJIS:#x8440, UNICODE:U+0410, キリール大文字A,CYRILLIC CAPITAL LETTER A
-------------------- Echo Area --------------------
</pre>

<p>
とエコーエリアに表示され、この文字がキリル文字であることがわかります。
</p>

<p>
ほか、 Emacs のコマンド <code>M-x describe-char</code> も有用でしょう。
</p>

<ul class="org-ul">
<li>Variable: <code class="symbol">skk-display-code-prompt-face</code>

<p>
エコーエリアに表示されるメッセージ中 <code>KUTEN:</code> 、 <code>JIS:</code> 、 <code>EUC:</code> 、 <code>SJIS:</code> 及
び <code>UNICODE:</code> に適用するフェイスです。
</p>
</li>

<li>Variable: <code class="symbol">skk-display-code-char-face</code>

<p>
エコーエリアに表示されるメッセージ中の当該文字に適用するフェイスです。
</p>
</li>

<li>Variable: <code class="symbol">skk-display-code-tankan-radical-face</code>

<p>
エコーエリアに表示されるメッセージ中の総画数表示に適用するフェイスです。
</p>
</li>

<li>Variable: <code class="symbol">skk-display-code-tankan-annotation-face</code>

<p>
エコーエリアに表示されるメッセージ中の文字名表示に適用するフェイスです。
</p>
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-6-13" class="outline-3">
<h3 id="sec-6-13"><span class="section-number-3">6.13</span> DDSKK 以外のツールを用いた辞書変換</h3>
<div class="outline-text-3" id="text-6-13">
</div><div id="outline-container-sec-6-13-1" class="outline-4">
<h4 id="sec-6-13-1"><span class="section-number-4">6.13.1</span> skk-lookup</h4>
<div class="outline-text-4" id="text-6-13-1">
<p>
<code>skk-lookup.el</code> を使用すると、辞書検索ツールの <a href="http://openlab.jp/edict/lookup/">Lookup</a> で
検索できる辞書を用いて単語の候補を出すことができるようになります。
</p>

<p>
DDSKK のインストール過程で <code>(require 'lookup)</code> が成功する場合は <code>skk-lookup.el</code> も
自動的にインストールされます。まずは <code>make what-where</code> を実行して <code>SKK modules:</code> 欄
に <code>skk-lookup</code> が含まれていることを確認してください。
</p>

<p>
Lookup がインストールされているにも関わらず、うまく <code>skk-lookup.el</code> が
インストールされない場合は、 <code>SKK-CFG</code> を編集して <code>lookup.el</code> が置かれて
いるパスを <code>ADDITIONAL_LISPDIR</code> に設定し、再度 DDSKK をインストールして下
さい <sup><a id="fnr.128" name="fnr.128" class="footref" href="#fn.128">128</a></sup> 。
</p>

<p>
<code>~/.skk</code> に以下のように設定します。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-search-prog-list
      (append skk-search-prog-list
              (list
               '(skk-lookup-search))))
</pre>
</div>

<p>
<code>skk-lookup-search</code> は、 DDSKK が用意している検索プログラムの中で最も遅い
ものです。したがって、 <code>skk-search-prog-list</code> の設定にあっては辞書サーバ
の検索 (<code>skk-search-server</code>) よりも後方に置くよう設定します。
</p>

<p>
Lookup の agent で利用するのは、 <code>lookup-search-agents</code> から <code>ndkks</code>,
<code>ndcookie</code> 及び <code>ndnmz</code> を取り去ったものです <sup><a id="fnr.120.100" name="fnr.120.100" class="footref" href="#fn.120">120</a></sup> 。
</p>
</div>
</div>

<div id="outline-container-sec-6-13-2" class="outline-4">
<h4 id="sec-6-13-2"><span class="section-number-4">6.13.2</span> skk-look</h4>
<div class="outline-text-4" id="text-6-13-2">
<p>
<code>skk-look.el</code> は、 <code>look</code> コマンドを使って３つの機能を提供します。
</p>
</div>

<div id="outline-container-sec-6-13-2-1" class="outline-5">
<h5 id="sec-6-13-2-1"><span class="section-number-5">6.13.2.1</span> 英単語の補完</h5>
<div class="outline-text-5" id="text-6-13-2-1">

<ul class="org-ul">
<li>Variable: <code class="symbol">skk-use-look</code>

<p>
<code>non-nil</code> に設定すると <code>skk-look.el</code> が使用できるようになります。例え
ば <code>~/.skk</code> で以下のように設定します。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-use-look t)
</pre>
</div>
</li>
</ul>

<p>
SKK abbrev モードが拡張されて <code>look</code> コマンドを使用した補完が有効になりま
す。
</p>

<pre class="example">
/ a b s t r

  ------ Buffer: foo ------
  ▽abstr*
  ------ Buffer: foo ------

<SPAN CLASS="KEY">TAB</SPAN>

  ------ Buffer: foo ------
  ▽abstract*
  ------ Buffer: foo ------
</pre>

<p>
と補完してくれます。通常の補完と同様に <code>.</code> （ピリオド）で次の補完候補
に、 <code>,</code> （コンマ）でひとつ前の補完候補に移動できます。
</p>

<p>
SKK 形式の英和辞書 edict <sup><a id="fnr.129" name="fnr.129" class="footref" href="#fn.129">129</a></sup> があれば、ここから <code class="key">SPC</code> を押して英和
変換ができます。
</p>
</div>
</div>

<div id="outline-container-sec-6-13-2-2" class="outline-5">
<h5 id="sec-6-13-2-2"><span class="section-number-5">6.13.2.2</span> 英単語をあいまいに変換して取り出す</h5>
<div class="outline-text-5" id="text-6-13-2-2">

<p>
見出し語にアスタリスク <code>*</code> を入れて <code class="key">SPC</code> を押すと、英単語をあいまいにし
て変換できます。
</p>

<pre class="example">
  ------ Buffer: foo ------
  ▽abstr*
  ------ Buffer: foo ------

<SPAN CLASS="KEY">SPC</SPAN>

  ------ Buffer: foo ------
  ▼abstract*
  ------ Buffer: foo ------
</pre>

<p>
確定すると、 <code>abstr*</code> を見出し語と、 <code>abstract</code> を候補とするエントリが個
人辞書に追加されます。このようなエントリを追加したくない場合、
ユーザ変数 <code>skk-search-excluding-word-pattern-function</code> を適切に設定しま
す。例えば次のような設定です。
</p>

<ul class="org-ul">
<li>Variable: <code class="symbol">skk-search-excluding-word-pattern-function</code>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'skk-search-excluding-word-pattern-function
          <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#36820;&#12426;&#20516;&#12364; non-nil &#12398;&#26178;&#12289;&#20491;&#20154;&#36766;&#26360;&#12395;&#21462;&#12426;&#36796;&#12414;&#12394;&#12356;&#12290;</span>
          <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">KAKUTEI-WORD &#12434;&#24341;&#25968;&#12395;&#12375;&#12390;&#12467;&#12540;&#12523;&#12373;&#12428;&#12427;&#12398;&#12391;&#12289;&#19981;&#35201;&#12391;&#12418;&#24341;&#25968;&#12434;&#21462;&#12427;</span>
          <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#24517;&#35201;&#12354;&#12426;</span>
          (<span style="font-weight: bold;">lambda</span> (kakutei-word)
              (<span style="font-weight: bold;">and</span> skk-abbrev-mode
                   (<span style="font-weight: bold;">save-match-data</span>
                     <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">SKK-HENKAN-KEY &#12364; "*" &#12391;&#32066;&#12431;&#12427;&#12392;&#12365;</span>
                     (string-match <span style="font-style: italic;">"\\*$"</span> skk-henkan-key)))))
</pre>
</div>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-13-2-3" class="outline-5">
<h5 id="sec-6-13-2-3"><span class="section-number-5">6.13.2.3</span> 英単語をあいまいに変換して取り出した後、更に再帰的な英和変換を行う</h5>
<div class="outline-text-5" id="text-6-13-2-3">

<p>
SKK 辞書に
</p>

<pre class="example">
abstract /アブストラクト/抽象/
abstraction /アブストラクション/
</pre>

<p>
というエントリがあるとして解説します <sup><a id="fnr.130" name="fnr.130" class="footref" href="#fn.130">130</a></sup> 。
</p>

<ul class="org-ul">
<li>Variable: <code class="symbol">skk-look-recursive-search</code>

<p>
<code>non-nil</code> であれば、英単語 + その英単語を見出し語にした候補の「セット」
を変換結果として出力することができます。
</p>

<pre class="example">
  ▽abstr*

<SPAN CLASS="KEY">SPC</SPAN>

  ▼abstract

<SPAN CLASS="KEY">SPC</SPAN>

  ▼アブストラクト

<SPAN CLASS="KEY">SPC</SPAN>

  ▼抽象

<SPAN CLASS="KEY">SPC</SPAN>

  ▼abstraction

<SPAN CLASS="KEY">SPC</SPAN>

  ▼アブストラクション
</pre>
</li>

<li>Variable: <code class="symbol">skk-look-expanded-word-only</code>

<p>
この変数の値が <code>non-nil</code> であれば、再帰検索に成功した英単語の「セット」
だけを出力することができます。再帰検索で検出されなかった英単語は無視し
て出力しません。
</p>
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-6-13-3" class="outline-4">
<h4 id="sec-6-13-3"><span class="section-number-4">6.13.3</span> Lisp シンボル名の補完検索変換</h4>
<div class="outline-text-4" id="text-6-13-3">
<p>
SKK abbrev モードにて、Lisp シンボル名を補完して検索し、検索結果を候補と
して返すことができます。英文字の後ろに <b>~</b> を付加してから変換を開始してく
ださい。
</p>

<p>
まずは動作例を示します。
</p>

<pre class="example">
/ d e f i ~

  ----- Buffer: foo -----
  ▽defi~*
  ----- Buffer: foo -----

<SPAN CLASS="KEY">SPC</SPAN>

  ----- Buffer: foo -----
  ▽defimage*
  ----- Buffer: foo -----

<SPAN CLASS="KEY">SPC</SPAN>

  ----- Buffer: foo -----
  ▽define-abbrev*
  ----- Buffer: foo -----

<SPAN CLASS="KEY">SPC</SPAN>

  ----- Buffer: foo -----
  ▽define-abbrev-table*
  ----- Buffer: foo -----

<SPAN CLASS="KEY">SPC</SPAN>

  ----- Buffer: foo -----
  ▽define-abbrevs*
  ----- Buffer: foo -----

<SPAN CLASS="KEY">SPC</SPAN>

  ----- Buffer: *候補* -----
  A:define-auto-insert
  S:define-category
  D:define-ccl-codepoint-translation-table
  F:define-ccl-constant-translation-table
  J:define-ccl-identity-translation-table
  K:define-ccl-program
  L:define-ccl-slide-translation-table
  ----- Buffer: *候補* -----
</pre>

<p>
この機能を有効とするには、リスト <code>skk-search-prog-list</code> の要素に
関数 <code>skk-search-lisp-symbol</code> を加えてください。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-to-list 'skk-search-prog-list
             '(skk-search-lisp-symbol) t)
</pre>
</div>

<p>
なお、見出し語に <b>~</b> を含む辞書もあります。例えば <code>SKK-JISYO.JIS3_4</code> には
</p>

<pre class="example">
A~ /チルド付きA(LATIN CAPITAL LETTER A WITH TILDE)/
</pre>

<p>
と登録されています。したがって、
</p>

<pre class="example">
▽A~ <SPAN CLASS="KEY">SPC</SPAN>
</pre>

<p>
と変換したときに「チルド付きA」が表示されるか、Lisp シンボル名が補完され
るかは、リスト <code>skk-search-prog-list</code> 内の要素の順によります。
</p>

<ul class="org-ul">
<li>Function: <code class="symbol">skk-search-lisp-symbol &amp;optional PREDICATE NOT-ABBREV-ONLY WITHOUT-CHAR-MAYBE</code>

<p>
オプション <code>PREDICATE</code> で補完検索する範囲（関数名、変数名、コマンド名）
を限定することができます。詳細は docstring を参照してください。
</p>
</li>

<li>Variable: <code class="symbol">skk-completion-search-char</code>

<p>
<code>skk-completion-search</code> による変換機能を指示するキーキャラクタ。
標準設定は <b>~</b> です。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-13-4" class="outline-4">
<h4 id="sec-6-13-4"><span class="section-number-4">6.13.4</span> Google CGI API for Japanese Input を利用したかな漢字変換</h4>
<div class="outline-text-4" id="text-6-13-4">
<p>
かな漢字変換に <a href="http://www.google.co.jp/ime/cgiapi.html">Google CGI API for Japanese Input</a> を利用することができます。
連文節変換も可能となります。
</p>

<p>
まず、 <code>~/.skk</code> にて、変数 <code>skk-use-search-web</code> を <code>non-nil</code> に設定します。
これにより、skk-mode を起動した際に <code>skk-search-web.el</code> を require するよ
うになります。
</p>

<p>
同じく <code>~/.skk</code> にて、リスト <code>skk-search-prog-list</code> の一番最後の要素とし
て、関数 <code>skk-search-web</code> を追加します。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-to-list 'skk-search-prog-list
             '(skk-search-web 'skk-google-cgi-api-for-japanese-input)
             t)
</pre>
</div>

<p>
以上の設定によって、通常のかな漢字変換の <b>候補が尽きたとき</b> に関数 <code>skk-search-web</code> が
実行され、Google CGI API for Japanese Input による変換結果が表示されます。
</p>

<p>
そのほか、変数 <code>skk-read-from-minibuffer-function</code> を以下のように設定する
ことで、辞書登録モードへの突入時の初期値に Google サジェストを表示するこ
ともできます。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-read-from-minibuffer-function
      (<span style="font-weight: bold;">lambda</span> ()
         (car (skk-google-suggest skk-henkan-key))))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-6-14" class="outline-3">
<h3 id="sec-6-14"><span class="section-number-3">6.14</span> 飾りつけ</h3>
<div class="outline-text-3" id="text-6-14">
</div><div id="outline-container-sec-6-14-1" class="outline-4">
<h4 id="sec-6-14-1"><span class="section-number-4">6.14.1</span> 仮名文字のローマ字プレフィックスのエコー</h4>
<div class="outline-text-4" id="text-6-14-1">
<ul class="org-ul">
<li>Variable: <code class="symbol">skk-echo</code>

<p>
この変数の値は、仮名文字のローマ字プレフィックスのエコーの有無を制御し
ます。
</p>

<p>
<a href="#sec-6-10-7-1">送りありエントリと送りなしエントリ</a>.
</p>
</li>
</ul>

<p>
変数 <code>skk-echo</code> の値が <code>non-nil</code> であれば、仮名文字のローマ字プレフィック
スが、入力時点でいったん現在のバッファに挿入され、続く母音の入力の際に、
かな文字に変換された時点で現在のバッファから消去されます。
</p>

<pre class="example">
t

  ------ Buffer: foo ------
  t*
  ------ Buffer: foo ------

a

  ------ Buffer: foo ------
  た*
  ------ Buffer: foo ------
</pre>

<p>
変数 <code>skk-echo</code> の値が <code>nil</code> であれば、仮名文字のローマ字プレフィックスの
エコーは行われません。これを上記の例で考えると、 <code>t</code> が現在のバッファに挿
入されず、続く母音 <code>a</code> が入力された瞬間に「た」の文字が挿入されます。
</p>

<ul class="org-ul">
<li>Variable: <code class="symbol">skk-prefix-hiragana-face</code>

<p>
かなモードにおけるローマ字プレフィックスのフェイスを指定します。
</p>
</li>
</ul>


<ul class="org-ul">
<li>Variable: <code class="symbol">skk-prefix-katakana-face</code>

<p>
カナモードにおけるローマ字プレフィックスのフェイスを指定します。
</p>
</li>

<li>Variable: <code class="symbol">skk-prefix-jisx0201-face</code>

<p>
JIS X 0201 モードにおけるローマ字プレフィックスのフェイスを指定します。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-14-2" class="outline-4">
<h4 id="sec-6-14-2"><span class="section-number-4">6.14.2</span> 入力モードを示すモードラインの文字列の変更</h4>
<div class="outline-text-4" id="text-6-14-2">
<p>
下記の変数の値を変更することによって、モードライン上の「入力モードを示す文字
列」を変更することができます。skk-show-mode の表示も連動します。
</p>

<ul class="org-ul">
<li>Variable: <code class="symbol">skk-latin-mode-string</code>

<p>
アスキーモードを示す文字列。標準は <b>SKK</b> 。
</p>
</li>

<li>Variable: <code class="symbol">skk-hiragana-mode-string</code>

<p>
かなモードを示す文字列。標準は <b>かな</b> 。
</p>
</li>

<li>Variable: <code class="symbol">skk-katakana-mode-string</code>

<p>
カナモードを示す文字列。標準は <b>カナ</b> 。
</p>
</li>

<li>Variable: <code class="symbol">skk-jisx0208-latin-mode-string</code>

<p>
全英モードを示す文字列。標準は <b>全英</b> 。
</p>
</li>

<li>Variable: <code class="symbol">skk-abbrev-mode-string</code>

<p>
SKK abbrev モードを示す文字列。標準は <b>aあ</b> 。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-14-3" class="outline-4">
<h4 id="sec-6-14-3"><span class="section-number-4">6.14.3</span> 入力モードを示すカーソル色に関する設定</h4>
<div class="outline-text-4" id="text-6-14-3">
<ul class="org-ul">
<li>User Option: <code class="symbol">skk-use-color-cursor</code>

<p>
この変数が <code>non-nil</code> ならば、カーソルを色付けします。標準では、ウィンド
ウシステムを使用して、かつ、色表示が可能な場合に限って、この機能が有効
になります。
</p>
</li>
</ul>

<p>
この機能が有効になっているとき、以下の変数の値を変更することで、各モード
におけるカーソルの色を変更できます。
</p>

<ul class="org-ul">
<li>Variable: <code class="symbol">skk-cursor-default-color</code>

<p>
SKK モードがオフであることを示すカーソル色。標準では、カーソルのある該
当フレームにおける標準のカーソル色を使います。
</p>
</li>

<li>Variable: <code class="symbol">skk-cursor-hiragana-color</code>

<p>
かなモードであることを示すカーソル色。標準は、背景の明暗により coral4 ま
たは pink です。
</p>
</li>

<li>Variable: <code class="symbol">skk-cursor-katakana-color</code>

<p>
カナモードであることを示すカーソル色。標準は、背景の明暗により forestgreen ま
たは green です。
</p>
</li>

<li>Variable: <code class="symbol">skk-cursor-jisx0201-color</code>

<p>
JIS X 0201 モードであることを示すカーソル色。標準は、背景の明暗により blueviolet ま
たは thistle です。
</p>
</li>

<li>Variable: <code class="symbol">skk-cursor-jisx0208-latin-color</code>

<p>
全英モードであることを示すカーソル色。標準は、gold です。
</p>
</li>

<li>Variable: <code class="symbol">skk-cursor-latin-color</code>

<p>
アスキーモードであることを示すカーソル色。標準は、背景の明暗により ivory4 ま
たは gray です。
</p>
</li>

<li>Variable: <code class="symbol">skk-cursor-abbrev-color</code>

<p>
SKK abbrev モードであることを示すカーソル色。標準は、royalblue です。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-14-4" class="outline-4">
<h4 id="sec-6-14-4"><span class="section-number-4">6.14.4</span> 変換候補一覧の表示方法</h4>
<div class="outline-text-4" id="text-6-14-4">
<p>
変換候補一覧の表示方法は、次の４つに大別されます。
</p>

<ul class="org-ul">
<li>現在のウィンドウにインライン表示する
</li>

<li>ツールティップで表示する
</li>

<li>現在のウィンドウの隣に別なウィンドウを開いて表示する（ポップアップ）
</li>

<li>エコーエリアに表示する
</li>
</ul>
</div>

<div id="outline-container-sec-6-14-4-1" class="outline-5">
<h5 id="sec-6-14-4-1"><span class="section-number-5">6.14.4.1</span> 現在のウィンドウにインライン表示する</h5>
<div class="outline-text-5" id="text-6-14-4-1">

<p>
<b>XEmacs ではインライン表示はサポートされません。</b>
</p>

<ul class="org-ul">
<li>Variable: <code class="symbol">skk-show-inline</code>

<p>
この変数の値が <code>non-nil</code> であれば、候補一覧を現在のポイント位置でインラ
イン表示します。値がシンボル <code>vertical</code> であれば、各候補を縦方向にイン
ライン表示します。
</p>
</li>

<li>Variable: <code class="symbol">skk-inline-show-face</code>

<p>
インライン表示する変換候補を装飾するフェイスを指定します。標準設定
は <code>underline</code> です。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-inline-show-face 'font-lock-doc-face)
</pre>
</div>

<p>
<code>skk-treat-candidate-appearance-function</code> による装飾を優先するには <code>nil</code> に
設定して下さい。
</p>
</li>

<li>Variable: <code class="symbol">skk-inline-show-background-color</code>

<p>
インライン表示する変換候補の背景色を指定します。
</p>

<p>
<code>skk-inline-show-face</code> または <code>skk-treat-candidate-appearance-function</code> に
て、背景色が指定されていない文字に対してのみ作用します。
</p>
</li>

<li>Variable: <code class="symbol">skk-inline-show-background-color-odd</code>

<p>
インライン表示する変換候補の背景色（奇数ライン）を指定します。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-14-4-2" class="outline-5">
<h5 id="sec-6-14-4-2"><span class="section-number-5">6.14.4.2</span> ツールティップで表示する</h5>
<div class="outline-text-5" id="text-6-14-4-2">

<ul class="org-ul">
<li>Variable: <code class="symbol">skk-show-tooltip</code>

<p>
この変数の値が <code>non-nil</code> であれば、候補一覧をツールティップで表示します。
同時に、「注釈（アノテーション）の表示方法」と「文字コードの表示方法」
も制御します。
</p>

<ul class="org-ul">
<li><a href="#sec-6-11">注釈（アノテーション）</a>.
</li>

<li><a href="#sec-6-12-1">文字コードまたはメニューによる文字入力</a>.
</li>
</ul>
</li>

<li>Variable: <code class="symbol">skk-tooltip-face</code>

<p>
ツールティップ表示する文字列に適用するフェイスのシンボルを指定する変数
です。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-tooltip-face 'font-lock-doc-face)
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(make-face 'skk-tooltip-face) &#12391;&#12399;&#12394;&#12356;&#12371;&#12392;&#12395;&#27880;&#24847;</span>
</pre>
</div>

<p>
候補文字列のフェイス属性（ <code>skk-treat-candidate-appearance-function</code> に
よる加工など）をそのまま使いたい場合は <code>nil</code> に設定して下さい。
</p>
</li>

<li>Variable: <code class="symbol">skk-tooltip-mouse-behavior</code>

<p>
ツールティップを表示する位置及びマウスポインタの挙動を指定します。下記
に掲げるシンボル以外のシンボルを指定した場合は <code>nil</code> となります。
</p>

<ul class="org-ul">
<li>シンボル <code>follow</code>

<p>
マウスポインタをカーソル位置へ移動させてツールティップを表示します。
ツールティップの表示を終えるとマウスポインタは元の位置へ戻ります。た
だし、元のマウスポインタが Emacs フレーム外であったならばツールティッ
プの表示を終えてもマウスポインタはカーソル位置のままです。
</p>
</li>

<li>シンボル <code>banish</code>

<p>
マウスポインタを Emacs フレーム右上隅へ移動させてツールティップを表示
します。ツールティップの表示を終えもてマウスポインタは Emacs フレーム
右上隅のままです。
</p>
</li>

<li>シンボル <code>avoid</code>

<p>
マウスポインタを Emacs フレーム右上隅へ移動させてツールティップを表示
します。ツールティップの表示を終えるとマウスポインタは元の位置へ戻り
ます。ただし、元のマウスポインタが Emacs フレーム外であったならばツー
ルティップの表示を終えてもマウスポインタは Emacs フレーム右上隅のまま
です。
</p>
</li>

<li>シンボル <code>avoid-maybe</code>

<p>
マウスポインタが Emacs フレーム内であれば <code>avoid</code> と同じ動作です。マ
ウスポインタが Emacs フレーム外であればマウスポインタ位置を変更せず、
その位置にツールティップを表示します。
</p>
</li>

<li><code>nil</code>

<p>
マウスポインタを一切移動せず、その位置にツールティップを表示します。
ツールティップのテキストとマウスポインタが重なったり、うまくツールテ
ィップが表示できなかったりする場合があります。
</p>
</li>
</ul>
</li>

<li>Variable: <code class="symbol">skk-tooltip-hide-delay</code>

<p>
ツールティップを表示する秒数。標準設定は 1,000秒。この時間が経過する
と、ツールティップは自動的に消える。
</p>
</li>

<li>Variable: <code class="symbol">skk-tooltip-parameters</code>

<p>
標準設定は <code>nil</code> 。SKK 独自のフレームパラメータを設定する。 <code>nil</code> の
場合、 <code>tooltip-frame-parameters</code> が適用される。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-14-4-3" class="outline-5">
<h5 id="sec-6-14-4-3"><span class="section-number-5">6.14.4.3</span> 現在のウィンドウの隣に別なウィンドウを開いて表示する（ポップアップ）</h5>
<div class="outline-text-5" id="text-6-14-4-3">

<ul class="org-ul">
<li>Variable: <code class="symbol">skk-show-candidates-always-pop-to-buffer</code>

<p>
この値が <code>non-nil</code> であれば、画面を上下に分割したうえで、候補一覧を専用
の *候補*バッファで表示します。
</p>
</li>
</ul>

<p>
候補一覧表示中に、この値を動的に切り換える手段が用意されています。
</p>

<ul class="org-ul">
<li>Variable: <code class="symbol">skk-show-candidates-toggle-display-place-char</code>

<p>
候補一覧表示中に、候補一覧の表示位置をエコーエリアとバッファとで動的に
切り換えることができます。標準設定は <code>C-f</code> です。
</p>
</li>

<li>Variable: <code class="symbol">skk-candidate-buffer-background-color</code>

<p>
*候補*バッファの背景色を指定します。背景色を付けたくない場合は <code>nil</code> を
指定すること（標準設定）。
</p>
</li>

<li>Variable: <code class="symbol">skk-candidate-buffer-background-color-odd</code>

<p>
*候補*バッファの背景色（奇数ライン）を指定します。
</p>
</li>

<li>Variable: <code class="symbol">skk-candidate-buffer-delete-other-windows</code>

<p>
<code>nil</code> であれば、*候補*バッファ表示に際して window 配置を変更しない。
window 配置を popwin や shackle にまかせている場合は <code>nil</code> とすべき。
</p>

<ul class="org-ul">
<li><a href="https://github.com/m2ym/popwin-el">Popup Window Manager for Emacs</a>
</li>

<li><a href="https://github.com/wasamasa/shackle">Enforce rules for popup windows</a>
</li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-14-4-4" class="outline-5">
<h5 id="sec-6-14-4-4"><span class="section-number-5">6.14.4.4</span> エコーエリアに表示する</h5>
<div class="outline-text-5" id="text-6-14-4-4">

<p>
標準設定では３つの変数
</p>

<ul class="org-ul">
<li><code>skk-show-inline</code>
</li>
<li><code>skk-show-tooltip</code>
</li>
<li><code>skk-show-candidates-always-pop-to-buffer</code>
</li>
</ul>

<p>
とも <code>nil</code> であり、この状態では候補一覧はエコーエリアに表示 <sup><a id="fnr.131" name="fnr.131" class="footref" href="#fn.131">131</a></sup> しま
す。もしも、これら変数のうち２つ以上が <code>non-nil</code> の場合、優先順位は上記の
解説の順です。
</p>
</div>
</div>
</div>

<div id="outline-container-sec-6-14-5" class="outline-4">
<h4 id="sec-6-14-5"><span class="section-number-4">6.14.5</span> ▼モードにおける変換候補のハイライト表示</h4>
<div class="outline-text-4" id="text-6-14-5">
<ul class="org-ul">
<li>Variable: <code class="symbol">skk-use-face</code>

<p>
この変数の値が <code>non-nil</code> であれば、Emacs のフェイス機能を使って変換候補
をハイライト表示します。このハイライト表示には GNU Emacs のオーバーレイ (overlay) の
機能を使います <sup><a id="fnr.132" name="fnr.132" class="footref" href="#fn.132">132</a></sup> 。
</p>
</li>

<li>Variable: <code class="symbol">skk-henkan-face</code>

<p>
この変数の値はフェイスであり、このフェイスによって変換候補がハイライト
表示されます。標準では、背景の明暗により black/darkseagreen2 又は
white/darkolivegreen を用います。
</p>

<p>
なお、この変数よりも <code>skk-treat-candidate-appearance-function</code> の設定が
優先されます。
</p>
</li>
</ul>

<p>
変数 <code>skk-henkan-face</code> には、既存のフェイス <sup><a id="fnr.133" name="fnr.133" class="footref" href="#fn.133">133</a></sup> を指定できますが、
新たにフェイスを作ることもできます。そのために次の関数が用意されています。
</p>

<ul class="org-ul">
<li>Function: <code class="symbol">skk-make-face FACE</code>

<p>
この関数は、引数 <code>FACE</code> と同じ名前のフェイスを作成して、そのフェイスを
返します。フェイスの前景色・背景色は、引数 <code>FACE</code> にスラッシュ <code>/</code> を含
めることよって、例えば以下の例のように決定されます。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-henkan-face (skk-make-face 'DimGray/PeachPuff1))
</pre>
</div>

<p>
この場合、前景色は DimGray に、背景色は PeachPuff1 になります。もうひと
つ例を挙げます。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-henkan-face (skk-make-face 'RosyBrown1))
</pre>
</div>

<p>
この場合、前景色は RosyBrown1 になります。背景色が無指定の場合はバッフ
ァの背景色がそのまま見えます。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-14-6" class="outline-4">
<h4 id="sec-6-14-6"><span class="section-number-4">6.14.6</span> 変換候補の更なる装飾</h4>
<div class="outline-text-4" id="text-6-14-6">
<p>
変換候補についてユーザの任意の加工を施すための変数を用意してあります。
</p>

<ul class="org-ul">
<li>Variable: <code class="symbol">skk-treat-candidate-appearance-function</code>

<p>
この変数に適切な形式で関数を収めることによって、変換候補をユーザの任意
に加工することができます。「適切な形式」とは、次のとおりです。
</p>

<ul class="org-ul">
<li>引数を２つ取ること。
</li>

<li>第１引数は文字列として扱うこと。これは加工前の文字列に相当する。
</li>

<li>第２引数が <code>nil</code> の時は通常の変換時、 <code>non-nil</code> の時は候補一覧表示時
を表すものとして扱うこと。
</li>

<li>返り値は次のいずれかとすること。

<ul class="org-ul">
<li>文字列

<p>
この場合、この文字列は候補と注釈を両方含みうるものとして処理される。
</p>
</li>

<li><code>(候補 . 注釈)</code>

<p>
この場合、候補はもう注釈を含まないものとして処理される。注釈について
は先頭が <code>;</code> かどうかを調べた上で処理される。
</p>
</li>

<li><code>(候補 . (セパレータ . 注釈))</code>

<p>
この場合、候補はもう注釈を含まないものとして処理される。セパレータ
は通常の <code>;</code> の代わりに利用される。注釈はもうセパレータを含まないも
のとして処理される。
</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>

<p>
ファイル <code>etc/dot.skk</code> に設定例があるほか、サンプルとして関数
<code>skk-treat-candidate-sample1</code> と <code>skk-treat-candidate-sample2</code> を用意して
あります。ファイル <code>~/.skk</code> に次のいずれかを書いてみて変換候補の装飾を試
してください。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-treat-candidate-appearance-function
      'skk-treat-candidate-sample1)
</pre>
</div>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-treat-candidate-appearance-function
      'skk-treat-candidate-sample2)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-6-14-7" class="outline-4">
<h4 id="sec-6-14-7"><span class="section-number-4">6.14.7</span> モードラインの装飾</h4>
<div class="outline-text-4" id="text-6-14-7">
<p>
XEmacs 及び GNU Emacs 21 以降では、以下の機能が使用できます。
</p>
</div>

<div id="outline-container-sec-6-14-7-1" class="outline-5">
<h5 id="sec-6-14-7-1"><span class="section-number-5">6.14.7.1</span> インジケータ</h5>
<div class="outline-text-5" id="text-6-14-7-1">

<ul class="org-ul">
<li>Variable: <code class="symbol">skk-indicator-use-cursor-color</code>

<p>
DDSKK のインジケータをモードラインの左 <sup><a id="fnr.134" name="fnr.134" class="footref" href="#fn.134">134</a></sup> に表示している場合、
インジケータの色がカーソルの色と同期します。インジケータに色を付けたく
ない場合は、この変数を <code>nil</code> にします。
</p>
</li>
</ul>

<p>
<a href="#sec-6-14-3">入力モードを示すカーソル色に関する設定</a>.
</p>

<p>
インジケータに独自色を使いたい場合は、以下のフェイス <sup><a id="fnr.135" name="fnr.135" class="footref" href="#fn.135">135</a></sup> を設定し
ます。この場合カーソルの色は参照されません。
</p>

<ul class="org-ul">
<li>GNU Emacs 21 以上（変数 <code>mule-version</code> の値が 5.0 以上の GNU Emacs）の場合

<ul class="org-ul">
<li><code>skk-emacs-hiragana-face</code>
</li>
<li><code>skk-emacs-katakana-face</code>
</li>
<li><code>skk-emacs-jisx0208-latin-face</code>
</li>
<li><code>skk-emacs-jisx0201-face</code>
</li>
<li><code>skk-emacs-abbrev-face</code>
</li>
</ul>
</li>
</ul>

<ul class="org-ul">
<li>XEmacs の場合

<ul class="org-ul">
<li><code>skk-xemacs-hiragana-face</code>
</li>
<li><code>skk-xemacs-katakana-face</code>
</li>
<li><code>skk-xemacs-jisx0208-latin-face</code>
</li>
<li><code>skk-xemacs-latin-face</code>
</li>
<li><code>skk-xemacs-jisx0201-face</code>
</li>
<li><code>skk-xemacs-abbrev-face</code>
</li>
</ul>
</li>
</ul>

<p>
なお、インジケータを右クリックするとポップアップメニューが表示されます。
</p>
</div>
</div>

<div id="outline-container-sec-6-14-7-2" class="outline-5">
<h5 id="sec-6-14-7-2"><span class="section-number-5">6.14.7.2</span> アイコン</h5>
<div class="outline-text-5" id="text-6-14-7-2">

<ul class="org-ul">
<li>Variable: <code class="symbol">skk-show-icon</code>

<p>
変数 <code>skk-show-icon</code> の値を <code>non-nil</code> と設定することにより、モードライ
ンに SKK のアイコンが表示されます。なお、アイコン表示は <code>(image-type-available-p 'xpm)</code> が <code>t</code> を
返す必要があるため、Emacs の種類／実行環境に依存します。
</p>
</li>

<li>Variable: <code class="symbol">skk-icon</code>

<p>
アイコンの画像ファイル <code>skk.xpm</code> へのパス。関数 <code>skk-emacs-prepare-modeline-properties</code> で
定義しています。
</p>
</li>
</ul>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-6-15" class="outline-3">
<h3 id="sec-6-15"><span class="section-number-3">6.15</span> ユーザガイダンス関連</h3>
<div class="outline-text-3" id="text-6-15">
</div><div id="outline-container-sec-6-15-1" class="outline-4">
<h4 id="sec-6-15-1"><span class="section-number-4">6.15.1</span> エラーなどの日本語表示</h4>
<div class="outline-text-4" id="text-6-15-1">
<p>
標準では、エラー、メッセージ及びミニバッファでのプロンプトは、英語で表示
されます。
</p>

<ul class="org-ul">
<li>Variable: <code class="symbol">skk-japanese-message-and-error</code>

<p>
この変数の値を <code>non-nil</code> に設定すると、エラー、メッセージ及びミニバッフ
ァでのプロンプトを日本語で表示します。標準では <code>nil</code> です。
</p>
</li>

<li>Variable: <code class="symbol">skk-show-japanese-menu</code>

<p>
この変数の値を <code>non-nil</code> に設定すると、メニューバーを日本語で表示します。
</p>
</li>

<li>Variable: <code class="symbol">skk-version-codename-ja</code>

<p>
この変数の値を <code>non-nil</code> に設定すると、関数 <code>skk-version</code> を評価したと
きのコードネームを日本語で表示します。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-15-2" class="outline-4">
<h4 id="sec-6-15-2"><span class="section-number-4">6.15.2</span> 冗長な案内メッセージの表示</h4>
<div class="outline-text-4" id="text-6-15-2">
<ul class="org-ul">
<li>Variable: <code class="symbol">skk-verbose</code>

<p>
この変数の値を <code>non-nil</code> に設定すると、入力中／変換中に冗長なメッセージ
を表示します。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-verbose t)
</pre>
</div>
</li>
</ul>

<ul class="org-ul">
<li>▽モード

<p>
ファンクションキー (<code>F1</code> 〜 <code>F10</code>) に割り当てられている機能を表示します。
変数 <code>skk-verbose</code> の設定と同時に変数 <code>skk-j-mode-function-key-usage</code> を
以下のように設定してみてください。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-j-mode-function-key-usage 'conversion)
</pre>
</div>

<p>
▽モードにおいてキー入力が一定時間（標準では 1.5 秒）なされなかったとき、
エコーエリアに以下のようなメッセージが表示されます。
</p>

<pre class="example">
-------------------- Echo Area --------------------
[F5]単漢字 [F6]無変換 [F7]カタカナ [F8]半角カナ [F9]全角ローマ [F10]ローマ
-------------------- Echo Area --------------------
</pre>

<p>
この案内に従ってファンクションキーを押すことで、一時的に単漢字変換やカ
タカナ変換を行うことができます。
</p>
</li>
</ul>

<ul class="org-ul">
<li>▼モード

<p>
Wikipedia アノテーション機能の使い方をメッセージで案内します。変数 <code>skk-verbose</code> の
設定と同時に変数 <code>skk-show-annotation</code> を <code>non-nil</code> に設定してみてください。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-show-annotation t)
</pre>
</div>

<p>
▼モードにおいてキー入力が一定時間 (標準では 1.5 秒) なされなかったとき、
エコーエリアに以下のようなメッセージが表示されます。
</p>

<pre class="example">
-------------------- Echo Area --------------------
どれを参照?[C-1 C-i]ja.wikipedia [C-2 C-i]en.wiktionary
[C-3 C-i]simple.wikipedia [C-4 C-i]en.wikipedia [C-5 C-i]ja.wiktionary
-------------------- Echo Area --------------------
</pre>

<p>
この案内に従って、例えば <code>C-1 C-i</code> を打鍵すると、日本語 Wikipedia の該
当記事を調べて、あればその一部をアノテーションとして表示します。
</p>

<p>
一方、現在の変換候補に対するアノテーションが既に表示されているときは、
以下のメッセージが上記のものと交互に表示されます。
</p>

<pre class="example">
-------------------- Echo Area --------------------
{アノテーション}[C-w]コピー [C-o]URLブラウズ [C-i]標準設定のソースを参照
-------------------- Echo Area --------------------
</pre>

<p>
この案内に従って <code>C-w</code> を打鍵すれば、アノテーションの全文を kill ring に
保存して利用することができます <sup><a id="fnr.136" name="fnr.136" class="footref" href="#fn.136">136</a></sup> 。また、キー <code>C-o</code> を押した場合には、もし
現在のアノテーションが Wikipedia アノテーションであればその出典となる
Wikipedia/Wiktionary のページをウェブブラウザで表示します。
</p>
</li>

<li>Variable: <code class="symbol">skk-verbose-wait</code>

<p>
冗長なメッセージを表示するまでの待ち時間（秒）。標準は 1.5 秒です。
</p>
</li>

<li>Variable: <code class="symbol">skk-verbose-message-interval</code>

<p>
冗長なメッセージが複数ある場合の１メッセージあたり表示時間を秒で指定す
る。標準は 5.0 秒です。この時間が経過したら表示を次の冗長なメッセージ
に切り替えます。
</p>
</li>

<li>Variable: <code class="symbol">skk-verbose-intention-face</code>

<p>
「どれを参照?」と「アノテーション」に適用するフェイスです。
</p>
</li>

<li>Variable: <code class="symbol">skk-verbose-kbd-face</code>

<p>
<code>[F5]</code> や <code>[C-1 C-i]</code> に適用するフェイスです。
</p>
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-6-16" class="outline-3">
<h3 id="sec-6-16"><span class="section-number-3">6.16</span> I-search 関連</h3>
<div class="outline-text-3" id="text-6-16">
</div><div id="outline-container-sec-6-16-1" class="outline-4">
<h4 id="sec-6-16-1"><span class="section-number-4">6.16.1</span> 起動時の入力モードの指定</h4>
<div class="outline-text-4" id="text-6-16-1">
<ul class="org-ul">
<li>Variable: <code class="symbol">skk-isearch-start-mode</code>

<p>
インクリメンタル・サーチを起動したときの入力モードをこの変数で指定でき
ます。以下のいずれかのシンボルを指定できますが、変数 <code>skk-isearch-use-previous-mode</code> の
設定が優先されます。
</p>

<ul class="org-ul">
<li><code>nil</code>

<p>
カレントバッファで SKK モードが起動されていれば、そのモードを。起動さ
れていなければアスキーモード。
</p>
</li>

<li>シンボル <code>hiragana</code>

<p>
かなモード
</p>
</li>

<li>シンボル <code>jisx0208-latin</code>

<p>
全英モード
</p>
</li>

<li>シンボル <code>latin</code>

<p>
アスキーモード
</p>
</li>
</ul>
</li>

<li>Variable: <code class="symbol">skk-isearch-use-previous-mode</code>

<p>
この変数の値が <code>non-nil</code> であれば、次のインクリメンタル・サーチ起動時の
入力モードは、前回のインクリメンタル・サーチでの入力モードになります。
<code>nil</code> であれば、変数 <code>skk-isearch-start-mode</code> の設定が優先されます。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-16-2" class="outline-4">
<h4 id="sec-6-16-2"><span class="section-number-4">6.16.2</span> 間に空白等を含む文字列の検索</h4>
<div class="outline-text-4" id="text-6-16-2">
<p>
「検索」という文字列をインクリメンタル・サーチにより検索する場合に、バッ
ファが以下のような状態になっていることがあります。
</p>

<pre class="example">
-------- Buffer: foo --------
この行末から始まる文字列を検
索して下さい。
-------- Buffer: foo --------
</pre>

<p>
このような場合のために、Emacs は正規表現によるインクリメンタル・サーチを
提供しています。DDSKK はこの正規表現によるインクリメンタル・サーチにも対
応しているため、空白や改行を含んだ検索も可能です。
</p>

<ul class="org-ul">
<li>Key: <code class="symbol">M-x isearch-forward-regexp</code> (isearch-forward-regexp)

<p>
前方への正規表現によるインクリメンタル・サーチ。 <code>C-u C-s</code> または <code>M-C-s</code> で
起動します。
</p>
</li>
</ul>

<ul class="org-ul">
<li>Key: <code class="symbol">M-x isearch-backward-regexp</code> (isearch-backward-regexp)

<p>
後方への正規表現によるインクリメンタル・サーチ。 <code>C-u C-r</code> または <code>M-C-r</code> で
起動します。
</p>
</li>

<li>Variable: <code class="symbol">skk-isearch-whitespace-regexp</code>

<p>
この変数の値は正規表現です。この正規表現にマッチする要素は「正規表現に
よるインクリメンタル・サーチにおいては、単語を区切る要素ではない」と判
断されます。この変数の標準設定は以下のようになっています。
</p>

<pre class="example">
"\\(\\s \\|[ \t\n\r\f]\\)*"
</pre>

<p>
この変数の値を変更することで、正規表現によるインクリメンタル・サーチを
拡張することができます。例えば、電子メールの引用部分を検索する場合を考
えます。
</p>

<pre class="example">
&gt; 引用部分も検
&gt; 索できる。
</pre>

<p>
上記のうち、「検索」という語は 2 行に渡っている上、引用マークが挿入され
ています。ここで
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-isearch-whitespace-regexp <span style="font-style: italic;">"</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">(</span><span style="font-style: italic;">\\s </span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">|</span><span style="font-style: italic;">[ \t\n\r\f&lt;&gt;|]</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-style: italic;">*"</span>)
</pre>
</div>
</li>
</ul>

<p>
と設定することにより、「検索」を検索できるようになります。
</p>
</div>
</div>
</div>

<div id="outline-container-sec-6-17" class="outline-3">
<h3 id="sec-6-17"><span class="section-number-3">6.17</span> VIP/VIPERとの併用</h3>
<div class="outline-text-3" id="text-6-17">
<p>
VIPER については Info を参照してください。
</p>

<p>
<a href="viper#Top">VIPER Manual</a>.
</p>

<p>
また、VIPER の前身である VIP にも対応します。ただし、正式に対応しているバ
ージョンは 3.5 のみです。これは Mule 2.3 に標準添付します <sup><a id="fnr.117.100" name="fnr.117.100" class="footref" href="#fn.117">117</a></sup> 。
</p>

<ul class="org-ul">
<li>Variable: <code class="symbol">skk-use-viper</code>

<p>
この変数の値を <code>non-nil</code> に設定すると、VIPER に対応します。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-18" class="outline-3">
<h3 id="sec-6-18"><span class="section-number-3">6.18</span> picture-modeとの併用</h3>
<div class="outline-text-3" id="text-6-18">
<p>
SKK モードを <code>picture-mode</code> において使用した場合は、以下のような問題点が
あります。ただし、これらは <code>picture-mode</code> の問題なので、現在のところ DDSKK 側
では対処していません。
</p>

<ul class="org-ul">
<li>SKK モードで全角文字を入力した場合に、 <code>BS</code> で全角文字を消すことができ
ません。現状では、後方にある文字を消したい場合は、その文字にポイントを
合わせ、 <code>C-c C-d</code> で一文字ずつ消す必要があります。
</li>

<li>コマンド <code>picture-movement-up</code> や <code>picture-movement-down</code> により上下に
全角文字を挿入した場合に、桁がずれる場合があります。
</li>
</ul>

<p>
関数 <code>move-to-column-force</code> の中で使用されている関数 <code>move-to-column</code> の
引数として、全角文字を無視した桁数が与えられることがあり、そのときカーソ
ル移動ができないため、これらの問題が生じます。
</p>
</div>
</div>
</div>

<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7"><span class="section-number-2">7</span> ローマ字入力以外の入力方式</h2>
<div class="outline-text-2" id="text-7">
<p>
DDSKK は、SKK 旧来のローマ字式かな入力（訓令式、ヘボン式）方式のほか、各
種キー配列と入力方式に対応しています。
</p>
</div>

<div id="outline-container-sec-7-1" class="outline-3">
<h3 id="sec-7-1"><span class="section-number-3">7.1</span> AZIK</h3>
<div class="outline-text-3" id="text-7-1">
<p>
AZIK （エイズィック）は QWERTY 配列をベースとした拡張ローマ字入力です。
一般のローマ字入力がそのまま使える上での拡張であることが特徴です。
</p>

<p>
<a href="http://hp.vector.co.jp/authors/VA002116/azik/azikindx.htm">拡張ローマ字入力『ＡＺＩＫ』・『ＡＣＴ』で快適な日本語入力を！</a>
</p>

<ul class="org-ul">
<li>Variable: <code class="symbol">skk-use-azik</code>

<p>
この値が <code>non-nil</code> であれば AZIK 拡張が有効となります。 <code>~/.skk</code> に
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-use-azik t)
</pre>
</div>

<p>
と書きます。
</p>
</li>

<li>Variable: <code class="symbol">skk-azik-keyboard-type</code>

<p>
AZIK で使うときのキーボードのタイプを、シンボルで指定する。
</p>

<ul class="org-ul">
<li>シンボル <code>jp106</code> → 日本語 106 キーボード（標準設定）
</li>

<li>シンボル <code>jp-pc98</code> → NEC PC-98 キーボード
</li>

<li>シンボル <code>us101</code> → 英語キーボード
</li>

<li><code>nil</code> → キーボード依存処理を無効にする
</li>
</ul>
</li>
</ul>

<p>
azik と skk で仕様が重なる部分があるため、 <code>skk-azik.el</code> では以下のとおり
対応しています。
</p>

<ul class="org-ul">
<li>キー <code>q</code>

<p>
AZIK では撥音「ん」を入力するには <code>q</code> を使うこととされていますが、skk で
は既に <code>q</code> に <code>skk-toggle-kana</code> を割り当てています。そのため <code>skk-azik.el</code> で
は <code>skk-toggle-kana</code> の実行を
</p>

<ul class="org-ul">
<li>日本語キーボードであれば <code>@</code> を、
</li>

<li>英語キーボードであれば <code>[</code> を
</li>
</ul>
<p>
それぞれ使用します。
</p>
</li>

<li>キー <code>@</code>

<p>
上記のとおり、 <code>skk-toggle-kana</code> の実行には <code>@</code> （日本語キーボード）
や <code>[</code> （英語キーボード）を使用しますが、skk では既に <code>@</code> には「今日の
日付の入力」（プログラム実行変換）を割り当てています。そのため、skk 本
来の動作には <code>x</code> を付けて、それぞれ <code>x@</code> と <code>x[</code> で代用できるようにして
あります。
</p>
</li>

<li>キー <code>l</code>
</li>
<li>キー <code>xx</code>

<p>
AZIK では単独の拗音「ゃゅょぁぃぅぇぉゎ」を入力するには <code>l</code> を前置する
こととされていますが、skk では既に <code>l</code> に「アスキーモードへの切り替え」
を割り当てています。そのため <code>skk-azik.el</code> では、拗音のうち「ぁぃぅぇぉ」
の入力については <code>xx</code> を前置することとしています。
</p>

<ul class="org-ul">
<li><code>xxa</code> → ぁ
</li>

<li><code>xxi</code> → ぃ
</li>

<li><code>xxu</code> → ぅ
</li>

<li><code>xxe</code> → ぇ
</li>

<li><code>xxo</code> → ぉ
</li>
</ul>
<p>
なお、拗音のうち「ゃゅょゎ」の単独入力は、AZIK 拡張 <code>skk-azik.el</code> では
なく、標準 <code>skk-vars.el</code> です。
</p>

<ul class="org-ul">
<li><code>xya</code> → ゃ
</li>

<li><code>xyu</code> → ゅ
</li>

<li><code>xyo</code> → ょ
</li>

<li><code>xwa</code> → ゎ
</li>
</ul>
</li>

<li>キー <code>X</code>

<p>
skk では、▼モードでの <code>X</code> は 関数 <code>skk-purge-from-jisyo</code> を実行します
が、AZIK では <code>X</code> は「シャ行」の入力に使われます。そのため、 <code>skk-azik.el</code> で
の「誤った登録の削除」は、▼モードで <code>M-x skk-purge-from-jisyo</code> を実行してください。
</p>

<p>
<a href="#sec-6-10-9">誤った登録の削除</a>.
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-7-2" class="outline-3">
<h3 id="sec-7-2"><span class="section-number-3">7.2</span> ACT</h3>
<div class="outline-text-3" id="text-7-2">
<p>
ACT は AZIK の考え方を Dvorak 配列に適用し、Dvorak 配列でかなを快適にタイ
プできるように考案された方式です。
</p>

<p>
<a href="http://www1.vecceed.ne.jp/~bemu/act/act_index.html">ACT (AZIK on Dvorak)</a>
</p>

<ul class="org-ul">
<li>Variable: <code class="symbol">skk-use-act</code>

<p>
この値が <code>non-nil</code> であれば ACT 拡張が有効となります。 <code>~/.skk</code> に
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-use-act t)
</pre>
</div>

<p>
と書きます。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-7-3" class="outline-3">
<h3 id="sec-7-3"><span class="section-number-3">7.3</span> TUT-code</h3>
<div class="outline-text-3" id="text-7-3">
<p>
TUT-code は、２ストローク系の日本語直接入力方式の一つです。
</p>

<p>
<a href="http://plone.crew.sfc.keio.ac.jp/groups/tut-code">TUT-code</a>
</p>

<p>
使用するには、SKK のインストール時にいくつかのファイルをインストールする
必要があります。SKK ソースの <code>tut-code</code> ディレクトリにある <code>skk-tutcdef.el</code> と <code>skk-tutcode.el</code> を
SKK ソースのトップディレクトリにコピーしてから、あらためて SKK をインスト
ールします。
</p>

<p>
<a href="#sec-3-2">DDSKK のインストール</a>.
</p>

<p>
その後、 <code>~/.skk</code> に
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">skk-tutcdef</span>)
</pre>
</div>

<p>
と書きます。
</p>
</div>
</div>

<div id="outline-container-sec-7-4" class="outline-3">
<h3 id="sec-7-4"><span class="section-number-3">7.4</span> かな入力と親指シフト</h3>
<div class="outline-text-3" id="text-7-4">
<p>
DDSKK はローマ字式ではない、いわゆるかな入力方式をサポートします。具体的
には
</p>

<ul class="org-ul">
<li>旧 JIS 配列でのかな入力
</li>
<li>親指シフト方式でのかな入力
</li>
</ul>

<p>
に対応しています。これを使うにはまず、nicola-ddskk 拡張パッケージをインス
トールする必要があります。SKK ソースの <code>nicola</code> ディレクトリに移動し、ド
キュメントに従ってインストールしてください。
</p>

<p>
<a href="https://github.com/skk-dev/ddskk/blob/master/nicola/README.ja">https://github.com/skk-dev/ddskk/blob/master/nicola/README.ja</a>
</p>

<ul class="org-ul">
<li>Variable: <code class="symbol">skk-use-kana-keyboard</code>

<p>
この変数を <code>non-nil</code> に設定すると、かな入力サポートが SKK 起動時に有効
になります。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-use-kana-keyboard t)
</pre>
</div>
</li>

<li>Variable: <code class="symbol">skk-kanagaki-keyboard-type</code>

<p>
この変数で、かな入力サポートの種類を切換えます。適切なシンボルを設定し
てください。
</p>

<ul class="org-ul">
<li>シンボル <code>106-jis</code>

<p>
日本語 106 キーボード (旧 JIS 配列) でのかな入力に対応します。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-kanagaki-keyboard-type '106-jis)
</pre>
</div>
</li>

<li>シンボル <code>nicola-jis</code>

<p>
日本語 106 キーボード (旧 JIS 配列) での親指シフトエミュレーションに
対応します。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-kanagaki-keyboard-type 'nicola-jis)
</pre>
</div>
</li>

<li>シンボル <code>nicola-us</code>
</li>

<li>シンボル <code>nicola-dvorak</code>
</li>

<li>シンボル <code>nicola-colemak</code>
</li>

<li>シンボル <code>omelet-jis</code>

<p>
<code>nicola-jis</code> と同様ですが、より入力しやすい配列が考慮されています。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-kanagaki-keyboard-type 'omelet-jis)
</pre>
</div>
</li>

<li>シンボル <code>omelet-us</code>
</li>

<li>シンボル <code>omelet-dvorak</code>
</li>

<li>シンボル <code>omelet-colemak</code>
</li>

<li>シンボル <code>oasys</code>
</li>
</ul>
</li>
</ul>

<p>
かな入力方式使用時の■モードでは、以下のコマンドなどが役に立ちます。
</p>

<ul class="org-ul">
<li>Key: <code class="symbol">F1 1</code> (skk-nicola-help?)

<p>
かな入力方式での特殊キー定義の一覧を表示します。
</p>
</li>

<li>Key: <code class="symbol">F1 2</code> (skk-nicola-2nd-help?)

<p>
かな入力方式でのかなキー配列を表示します。
</p>
</li>

<li>Key: <code class="symbol">F12</code> (skk-kanagaki-toggle-rom-kana)

<p>
かな入力方式とローマ字入力方式とを切り換えます。
</p>
</li>
</ul>

<p>
なお、親指シフト方式については次の url が参考になります。
</p>

<p>
<a href="http://nicola.sunicom.co.jp/">NICOLA 日本語入力コンソーシアム</a>
</p>
</div>
</div>
</div>

<div id="outline-container-sec-8" class="outline-2">
<h2 id="sec-8"><span class="section-number-2">8</span> そのほかの拡張機能</h2>
<div class="outline-text-2" id="text-8">
<p>
十分にテストされていない等の理由がありますが、便利・有益と思われる拡張機
能を紹介します。
</p>
</div>

<div id="outline-container-sec-8-1" class="outline-3">
<h3 id="sec-8-1"><span class="section-number-3">8.1</span> 交ぜ書き変換</h3>
<div class="outline-text-3" id="text-8-1">
<p>
<code>skk-mazegaki.el</code> をインストールすると、交ぜ書き変換が可能となります。
</p>

<ul class="org-ul">
<li>き車 → 汽車
</li>
<li>き者 → 記者
</li>
<li>き社 → 貴社
</li>
</ul>

<p>
インストール方法などは、次の投稿を参考にしてください。
</p>

<p>
<a href="http://mail.ring.gr.jp/skk/201111/msg00037.html">http://mail.ring.gr.jp/skk/201111/msg00037.html</a>
</p>
</div>
</div>
</div>

<div id="outline-container-sec-9" class="outline-2">
<h2 id="sec-9"><span class="section-number-2">9</span> SKK に関する情報</h2>
<div class="outline-text-2" id="text-9">
</div><div id="outline-container-sec-9-1" class="outline-3">
<h3 id="sec-9-1"><span class="section-number-3">9.1</span> 最新情報</h3>
<div class="outline-text-3" id="text-9-1">
<p>
DDSKK についての最新情報は <a href="http://openlab.jp/skk/">http://openlab.jp/skk/</a> から得ることができます。
</p>

<p>
SKK の開発は、 GitHub を利用して行われています。
</p>

<ul class="org-ul">
<li><a href="https://github.com/skk-dev/ddskk">https://github.com/skk-dev/ddskk</a>
</li>
</ul>

<p>
最新版 DDSKK の変更内容と更に過去の変更点については以下のリソースを参照
してください。
</p>

<ul class="org-ul">
<li><a href="https://github.com/skk-dev/ddskk/blob/master/READMEs/NEWS.ja">https://github.com/skk-dev/ddskk/blob/master/READMEs/NEWS.ja</a>
</li>
</ul>

<p>
また、将来のバージョンにおける拡張アイディアについては、TODO としてまと
められています。
</p>

<ul class="org-ul">
<li><a href="https://github.com/skk-dev/ddskk/blob/master/READMEs/TODO.ja">https://github.com/skk-dev/ddskk/blob/master/READMEs/TODO.ja</a>
</li>
</ul>

<p>
SKK Openlab では、開発者、文章の整備にご協力いただける方、テスター、よろ
ずものを言う人などなど、常に募集しています。また要望、拡張の具体的アイデ
ィアがあれば、メーリングリストに連絡いただけることを期待します。
</p>
</div>
</div>

<div id="outline-container-sec-9-2" class="outline-3">
<h3 id="sec-9-2"><span class="section-number-3">9.2</span> SKKメーリングリスト</h3>
<div class="outline-text-3" id="text-9-2">
<p>
SKK Openlab メーリングリストは、統一された一つの ML です。利用者用、開発
者用などと分かれていない他、SKK 辞書、DDSKK の開発議論が中心ですが、辞書
サーバやフロントエンド、 SKK 辞書ツールの話題なども議論の範囲に入ります。
</p>

<ul class="org-ul">
<li>メーリングリストに参加する

<p>
アドレス <code>skk-subscribe@ring.gr.jp</code> 宛てに空のメールを送って下さい。確
認の為のメッセージが指定されたアドレス宛に送信されます。その確認の為の
メッセージに対して返信することで加入手続きは終了します。
</p>
</li>

<li>メーリングリストから脱会する

<p>
アドレス <code>skk-unsubscribe@ring.gr.jp</code> 宛てに空のメールを送って下さい。
確認の為のメッセージが指定されたアドレス宛に送信されます。その確認の為
のメッセージに対して返信することで脱退手続きは終了します。
</p>
</li>

<li>登録したアドレスを変更する

<p>
古いアドレスについていったん unsubscribe して、新しいアドレスから再度
subscribe して下さい。
</p>
</li>

<li>記事の投稿

<p>
アドレス <code>skk@ring.gr.jp</code> へ送ります。メーリングリストに登録されている
人全員にメールが配信されます。
</p>
</li>

<li>過去ログの閲覧

<ul class="org-ul">
<li><a href="http://mail.ring.gr.jp/skk">http://mail.ring.gr.jp/skk</a>
</li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-9-3" class="outline-3">
<h3 id="sec-9-3"><span class="section-number-3">9.3</span> SKK 関連ソフトウェア</h3>
<div class="outline-text-3" id="text-9-3">
<p>
SKK 関連ソフトウェアに関しては、次の URL にリンクをまとめてありますの
で参照してください。
</p>

<ul class="org-ul">
<li><a href="http://openlab.jp/skk/wiki/wiki.cgi?page=%C2%A5%C3%AA%C2%A5%C3%B3%C2%A5%C2%AF%C2%BD%C2%B8">SKK 辞書 Wiki におけるリンク集</a>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-9-4" class="outline-3">
<h3 id="sec-9-4"><span class="section-number-3">9.4</span> SKK 辞書について</h3>
<div class="outline-text-3" id="text-9-4">
<p>
SKK 辞書は多くのユーザの方々から提供された辞書によりコピーフリーの辞書と
しては最大規模の辞書になっています。今後もこの方式により SKK 辞書をより
充実したものにしていきたいと思います。
</p>

<p>
<a href="http://openlab.jp/skk/registdic.cgi">http://openlab.jp/skk/registdic.cgi</a> にて Web/cgi を利用した登録・削除希望
フォームを運用しています。SKK 辞書に追加したい単語、誤登録として削除した
い単語がありましたら、是非ご利用下さい。
</p>
</div>
</div>

<div id="outline-container-sec-9-5" class="outline-3">
<h3 id="sec-9-5"><span class="section-number-3">9.5</span> 辞書ツール</h3>
<div class="outline-text-3" id="text-9-5">
<p>
SKK 辞書に関するツールには、Perl, C, Ruby の各言語により書かれたツールが
ありますが、Perl によるツールは現在十分メンテナンスされていません。
現在は C, Ruby のツールが開発・メンテナンスされています。
</p>

<ul class="org-ul">
<li><a href="http://openlab.jp/skk/wiki/wiki.cgi?page=%C2%BC%C2%AD%C2%BD%C3%B1%C2%A5%C3%A1%C2%A5%C3%B3%C2%A5%C3%86%C2%A5%C3%8A%C2%A5%C3%B3%C2%A5%C2%B9%C2%A5%C3%84%C2%A1%C2%BC%C2%A5%C3%AB">辞書メンテナンスツール</a>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-9-6" class="outline-3">
<h3 id="sec-9-6"><span class="section-number-3">9.6</span> SKK の作者</h3>
<div class="outline-text-3" id="text-9-6">
<p>
SKK の原作者は、現京都大学名誉教授の佐藤雅彦氏です。
</p>

<ul class="org-ul">
<li><a href="http://www.ist.i.kyoto-u.ac.jp/organization/ex-professor.html#Sato">http://www.ist.i.kyoto-u.ac.jp/organization/ex-professor.html#Sato</a>
</li>
</ul>

<p>
現在の DDSKK は、大勢のボランティアの貢献により成立しています。
ファイル <code>READMEs/Contributors</code> に貢献者名の一覧がありますので、ご覧ください。
</p>
</div>
</div>

<div id="outline-container-sec-9-7" class="outline-3">
<h3 id="sec-9-7"><span class="section-number-3">9.7</span> SKKの歴史</h3>
<div class="outline-text-3" id="text-9-7">
<p>
SKK の成り立ちと歴史に関しては以下の URL を参照してください。
</p>

<ul class="org-ul">
<li><a href="http://openlab.jp/skk/born-ja.html">SKK の誕生秘話</a>
</li>

<li><a href="http://openlab.jp/skk/SKK.html">SKK = I</a>
</li>

<li><a href="http://openlab.jp/skk/history-ja.html">SKK の歴史（付 Emacs の歴史の一部）</a>
</li>

<li><a href="http://mail.ring.gr.jp/skk/201212/msg00007.html">SKK の 25年</a>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-9-8" class="outline-3">
<h3 id="sec-9-8"><span class="section-number-3">9.8</span> このマニュアルについて</h3>
<div class="outline-text-3" id="text-9-8">
<p>
本マニュアルは、SKK オープンラボの有志の貢献により、従来のマニュアルに加
筆修正したものです。
</p>
</div>
</div>

<div id="outline-container-sec-9-9" class="outline-3">
<h3 id="sec-9-9"><span class="section-number-3">9.9</span> 謝辞</h3>
<div class="outline-text-3" id="text-9-9">
<p>
DDSKK の開発は、<a href="http://openlab.jp">Ring Server Open Laboratory</a> （オープンラボラトリ）に SKK Openlab と
して参加する形で行われています。SKK Openlab は Ring から共有ディスク、CVS 及
び ML の提供を受けています。オープンラボラトリの運営は、完全にボランティ
アにより行われております。Ring 並びにオープンラボラトリにかかわる皆さんに
深く感謝いたします。
</p>

<p>
以降の記載は、SKK の原作者、佐藤雅彦教授により記載された旧来のマニュア
ルのものですが、歴史的意義を踏まえて、そのまま掲載します。
</p>

<blockquote>
<p>
SKK の設計方針は TAO/ELIS 上の日本語入力システム Kanzen の影響を受けてい
ます。Kanzen のデモを行ってくださり、また Kanzen を使う機会を与えてくだ
さった NTT の竹内郁雄さんに感謝します。
</p>

<p>
第 1 版の辞書作成のための読みの入力を行ってくださった東北大学電気通信研
究所佐藤研究室の 安藤大君、猪岡美紀さん、奥川淳一君、佐々木昭彦君、佐藤
克志君、山岸信寛君に感謝します。
</p>

<p>
SKK 辞書第 2, 3, 4, 5, 6, 7, 8 版作成のためのデータを提供してくださっ
た方々に感謝します。
</p>

<p>
SKK 辞書第 6, 7 版作成にあたり協力してくださった高橋裕信氏に感謝します。
</p>
</blockquote>
</div>
</div>
</div>

<div id="outline-container-sec-10" class="outline-2">
<h2 id="sec-10"><span class="section-number-2">10</span> よくある質問とその回答 (FAQ)</h2>
<div class="outline-text-2" id="text-10">
<p>
これは SKK に対するよくある質問と、それに対する回答集です。
</p>
</div>

<div id="outline-container-sec-10-1" class="outline-3">
<h3 id="sec-10-1"><span class="section-number-3">10.1</span> Introduction</h3>
<div class="outline-text-3" id="text-10-1">
</div><div id="outline-container-sec-10-1-1" class="outline-4">
<h4 id="sec-10-1-1"><span class="section-number-4">10.1.1</span> Q1-1 Daredevil SKK って SKK とは違うのですか?</h4>
<div class="outline-text-4" id="text-10-1-1">
<p>
SKK Openlab で開発、リリースされる SKK は、京大の佐藤先生が中心になって開
発していた SKK と区別するために、 <code>Daredevil SKK</code> と呼ぶことにしました。
その略称は <code>DDSKK</code> で、SKK Openlab で最初に <code>Daredevil SKK</code> としてリリー
スされた version は 11.1 です（オリジナルの version を継承しました）。
</p>

<p>
なお、 <code>Daredevil</code> の名前の採択は、開発陣の一人が講読している某ラジオ英会
話講座の、ある日のスキット名が「Daredevil なんとか」で、その内容は「とに
かくやってみよう。うぎゃぁぁぁ、やられたぁ」というものでした。これがあま
りに自分の開発ポリシーに合致していた、ということに由来します。
</p>
</div>
</div>

<div id="outline-container-sec-10-1-2" class="outline-4">
<h4 id="sec-10-1-2"><span class="section-number-4">10.1.2</span> Q1-2 SKK はシンプルなのが長所だったのでは?</h4>
<div class="outline-text-4" id="text-10-1-2">
<p>
かような議論は 10 年来行われてきており、結論は出ていませんが、事実として
現在まで開発が続けられています。「シンプルな操作性の維持と多機能化・高機
能化は両立できる」というのが現在の開発陣の考えであるようです。
</p>

<p>
SKK が Simple Kana to Kanji conversion program の略であるとおり、かなを漢
字に変換するルーチンの簡単さが SKK を定義付けています。その周辺の拡張に関
する制約は基本的にはありません。
</p>

<p>
多機能化と言っても多くはユーザオプションによって無効にすることができます
し、 <code>skk.el</code> 本体が複雑化しないようにモジュール化されています。
</p>
</div>
</div>

<div id="outline-container-sec-10-1-3" class="outline-4">
<h4 id="sec-10-1-3"><span class="section-number-4">10.1.3</span> Q1-3 DDSKK はどの Emacs で使えますか?</h4>
<div class="outline-text-4" id="text-10-1-3">
<p>
基本的には、GNU Emacs と Mule 機能付きの XEmacs で使えます。対応する Emacs の
バージョンについては以下をご覧ください。
</p>

<p>
<a href="#sec-2-1">このバージョンの SKK について</a>.
</p>
</div>
</div>

<div id="outline-container-sec-10-1-4" class="outline-4">
<h4 id="sec-10-1-4"><span class="section-number-4">10.1.4</span> Q1-4 DDSKK はどんなオペレーティングシステムで使えますか?</h4>
<div class="outline-text-4" id="text-10-1-4">
<p>
SKK がサポートしている Emacs がその OS で動いているなら、SKK の基本的な機
能は動くはずです。 Microsoft Windows でも Apple macOS でも使えます。
</p>

<p>
拡張機能については、UNIX の各種コマンドを前提としているものがいくつかあり
ます（ <code>look</code> や <code>ispell</code> など）。これらのコマンドがお使いの OS にも存在
すれば該当の拡張機能も基本的には使えるでしょう。
</p>

<p>
Apple macOS 版 Emacs に特化した情報については、以下のファイルを参照してください。
</p>

<ul class="org-ul">
<li><a href="https://github.com/skk-dev/ddskk/blob/master/READMEs/README.MacOSX.ja">https://github.com/skk-dev/ddskk/blob/master/READMEs/README.MacOSX.ja</a>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-10-1-5" class="outline-4">
<h4 id="sec-10-1-5"><span class="section-number-4">10.1.5</span> Q1-5 APEL って何? 必要ですか?</h4>
<div class="outline-text-4" id="text-10-1-5">
<p>
APEL は A Portable Emacs Library の略です。APEL の主な機能は、異なる Emacs 間
の非互換性を吸収することです。
</p>

<ul class="org-ul">
<li>XEmacs では APEL が必要です。
</li>

<li>GNU Emacs 22 以上では APEL は不要となりました。この変更は 2010 年 9 月
に CVS に commit され、2011 年 1 月に DDSKK 14.2 としてリリースされました。
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-10-2" class="outline-3">
<h3 id="sec-10-2"><span class="section-number-3">10.2</span> Installation</h3>
<div class="outline-text-3" id="text-10-2">
</div><div id="outline-container-sec-10-2-1" class="outline-4">
<h4 id="sec-10-2-1"><span class="section-number-4">10.2.1</span> Q2-1 SKK を使うのに何が必要ですか?</h4>
<div class="outline-text-4" id="text-10-2-1">
<p>
SKK 本体と SKK 辞書が必要です。オプションで辞書サーバを用意することができ
ます。XEmacs では事前に APEL をインストールしてください。
</p>

<p>
<a href="#sec-3-2-2">XEmacs へのインストール</a>.
</p>
</div>
</div>

<div id="outline-container-sec-10-2-2" class="outline-4">
<h4 id="sec-10-2-2"><span class="section-number-4">10.2.2</span> Q2-2 SKK 辞書はどこにありますか?</h4>
<div class="outline-text-4" id="text-10-2-2">
<p>
<a href="#sec-9-4">SKK 辞書について</a>.
</p>
</div>
</div>

<div id="outline-container-sec-10-2-3" class="outline-4">
<h4 id="sec-10-2-3"><span class="section-number-4">10.2.3</span> Q2-3 SKK サーバはどこにありますか?</h4>
<div class="outline-text-4" id="text-10-2-3">
<p>
DDSKK は辞書サーバの種類、バージョンには依存していません。
<a href="http://openlab.jp/skk/skkserv-ja.html">http://openlab.jp/skk/skkserv-ja.html</a> からお好きな辞書サーバを入手して下さい。
</p>
</div>
</div>
</div>

<div id="outline-container-sec-10-3" class="outline-3">
<h3 id="sec-10-3"><span class="section-number-3">10.3</span> Customization</h3>
<div class="outline-text-3" id="text-10-3">
</div><div id="outline-container-sec-10-3-1" class="outline-4">
<h4 id="sec-10-3-1"><span class="section-number-4">10.3.1</span> Q3-1 「．」、「，」 が入力できるようにカスタマイズしたいのですが。</h4>
<div class="outline-text-4" id="text-10-3-1">
<p>
３通りの方法を紹介します。
</p>

<ul class="org-ul">
<li>通常 <code>.</code> で「．」を、 <code>,</code> で「，」を入力したい場合

<p>
<code>~/.skk</code> に以下を設定します。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-kutouten-type 'en)
</pre>
</div>
</li>

<li>一時的に <code>.</code> で「．」を、 <code>,</code> で「，」を入力したい場合

<p>
<code>M-x skk-toggle-kutouten</code> を実行すると、その場で「，」「．」に切り替え
ることができます。「、」「。」に戻すには、もう一度 <code>M-x skk-toggle-kutouten</code> を
実行します。
</p>

<p>
特定のバッファでのみ「，」「．」に切り替えたい場合は Info を参照下さい。
</p>

<p>
<a href="emacs#File Variables">Local Variables in Files in GNU Emacs Manual</a>.
</p>

<p>
例えば、 tex モードでのみ「，」「．」に切り替えたい場合は、次の設定
を tex 文書ファイルの最後に追加します。
</p>

<pre class="example">
% Local Variables:
%   skk-kutouten-type: en
% end:
</pre>
</li>

<li>常に <code>.</code> で「．」を、 <code>,</code> で「，」を入力したい場合

<p>
<code>skk-rom-kana-rule-list</code> を直接変更します。なお、この設定をすると、 <code>M-x skk-toggle-kutouten</code> で
の切り替えが効かなくなるので、注意して下さい。 <code>~/.skk</code> に以下を追加します。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-rom-kana-rule-list
      (append '((<span style="font-style: italic;">"."</span> nil <span style="font-style: italic;">"&#65294;"</span>) (<span style="font-style: italic;">","</span> nil <span style="font-style: italic;">"&#65292;"</span>))
              skk-rom-kana-rule-list))
</pre>
</div>

<p>
この設定方法は応用が効き、細かく制御することが可能です。「．」と「，」
のところをそれぞれ <code>.</code> と <code>,</code> とすることで、「かなモード」「カナモード」
でも <code>.</code> と <code>,</code> を直接入力することができます。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-10-3-2" class="outline-4">
<h4 id="sec-10-3-2"><span class="section-number-4">10.3.2</span> Q3-2 「ゐ」や「ヰ」 が入力できるようにカスタマイズしたいのですが。</h4>
<div class="outline-text-4" id="text-10-3-2">
<p>
一つ前の Q の変形問題ですね。かなモード／カナモードでそれぞれ出力する文字
を変えるやり方です。 <code>~/.skk</code> に
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-rom-kana-rule-list
      (append '((<span style="font-style: italic;">"wi"</span> nil (<span style="font-style: italic;">"&#12528;"</span> . <span style="font-style: italic;">"&#12432;"</span>)))
              skk-rom-kana-rule-list))
</pre>
</div>

<p>
と書いてみましょう。一番内側の cons cell は car がカナモード、cdr がかな
モードでの入力文字を表しています。
</p>

<p>
一つ前の Q に対する答えのように、カナモード、かなモードともに入力する文字
が変わらなければ、cons cell の代りに文字列を書くことができます。
</p>
</div>
</div>

<div id="outline-container-sec-10-3-3" class="outline-4">
<h4 id="sec-10-3-3"><span class="section-number-4">10.3.3</span> Q3-3 検索する辞書を増やしたいのですが。</h4>
<div class="outline-text-4" id="text-10-3-3">
<p>
<code>skk-search-prog-list</code> で設定をしましょう。
</p>

<p>
まず、現在の設定を確認しましょうね。*scratch*バッファに <code>skk-search-prog-list</code> と
書いてそのシンボルの末尾にポイントを置いて <code>C-j</code> してみましょう。例えば次
のように出力されます。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">((skk-search-jisyo-file skk-jisyo 0 t)
 (skk-search-server skk-aux-large-jisyo 10000))
</pre>
</div>

<p>
上記の例は２つの要素を持ったリストになっています。設定によりもっと多くの
要素があるかもしれません。
</p>

<p>
各要素は検索する関数と辞書を指定したリストです。要素の順番に検索がなされ
ます。上記の例だとまず最初に <code>skk-jisyo</code> （個人辞書）を <code>skk-search-jisyo</code> と
いう関数を使ってリニアサーチし、次に <code>skk-search-server</code> という関数を
使って <code>skk-aux-large-jisyo</code> をサーチします。
</p>

<p>
変換の際、 <code class="key">SPC</code> を押しますよね？　１回 <code class="key">SPC</code> を押すと、SKK は候補が見つ
かるまでの間、 <code>skk-search-prog-list</code> の要素を前から読んでいって検索を行
い、見つかればそこでいったん検索を止めてユーザに候補を提示します。
</p>

<p>
ユーザが <code class="key">SPC</code> を更に押してゆき最初の要素のプログラムが見つけた候補が尽き
ると、SKK は中断していた個所から再び <code>skk-search-prog-list</code> の次の要素を
見つけ、ここで指定されている関数を使って検索する、で新しい候補が見つかれ
ばまた提示する、というシステムになっています。
</p>

<p>
では、辞書サーバを使って検索した後に、JIS 第２水準の単漢字辞書 <code>SKK-JISYO.JIS2</code> を
検索したい場合はどうすれば良いでしょう？　もう分かりますよね？　辞書サーバ
を使った検索式の次に第２水準辞書の検索式を書いたリストを <code>skk-search-prog-list</code> に
指定すれば良いのです。 <code>~/.skk</code> に次のように書きましょう。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-search-prog-list
      '((skk-search-jisyo-file skk-jisyo 0 t)
        (skk-search-server skk-aux-large-jisyo 10000)
        (skk-search-jisyo-file <span style="font-style: italic;">"~/dic/SKK-JISYO.JIS2"</span> 0)))
</pre>
</div>

<p>
<code>skk-search-jisyo-file</code> の第２引数である 0 の数字でリニアサーチにて検索
するよう指定しています。第２水準辞書はあまり大きくないので、リニアサーチ
で十分でしょう。大きな辞書を検索する場合などは、
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(skk-search-jisyo-file <span style="font-style: italic;">"~/dic/SKK-JISYO.L"</span> 10000)
</pre>
</div>

<p>
のようにすると良いでしょう。SKK は Emacs のバッファに読み込まれた辞書の検
索リージョンのポイント差が 10,000 未満になるまではバイナリサーチを行い、
その後リニアサーチを行います。大きな辞書ではバイナリサーチを行う方がはる
かに効率が良いです。
</p>

<p>
ちなみに、 <code>SKK-JISYO.JIS2</code> は、最大でもリージョン間のポイント差が 8,500 程
度です。
</p>
</div>
</div>

<div id="outline-container-sec-10-3-4" class="outline-4">
<h4 id="sec-10-3-4"><span class="section-number-4">10.3.4</span> Q3-4 左手の小指を SHIFT で酷使したくありません。</h4>
<div class="outline-text-4" id="text-10-3-4">
<p>
SKK を標準の状態で使っている場合、変換のためにシフトキーを多用しますので
小指への負担が大きくなります。この苦しみを回避するためにここでは４つの方
法を紹介します。
</p>

<ul class="org-ul">
<li>親指の近くにあるキーを利用してシフトキーの代用とする。

<p>
日本語 106 キーボードのように「無変換」、「変換」などのキーがある場合は、
これらをシフトキーの代用とすることが可能です。こうすると、例えば
</p>

<pre class="example">
SHIFT を押しながら a を押す
</pre>

<p>
というキー操作は
</p>

<pre class="example">
  「無変換」を押して、その後で a を押す
</pre>

<p>
という操作で置き換えることができるようになります。
</p>

<p>
それでは具体的なやり方を説明しましょう。まず、使用中の Emacs が「無変換
キー」を何という名前で認識しているか調べます。それには
</p>

<pre class="example">
M-x describe-key
</pre>

<p>
というコマンドを実行し、続いて「無変換キー」を押してみます。X Window System 上
であれば、おそらく
</p>

<pre class="example">
muhenkan is undefined
</pre>

<p>
という答えが返ってくるでしょう。次に、この名前を使って <code>~/.emacs.d/init.el</code>
に設定を書きこみます。以下は「無変換キー」 = <code>muhenkan</code> の場合の例です。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">unless</span> (keymapp key-translation-map)
  (<span style="font-weight: bold;">setq</span> key-translation-map (make-sparse-keymap)))
(<span style="font-weight: bold;">let</span> ((i ?a))
  (<span style="font-weight: bold;">while</span> (&lt;= i ?z)
    (define-key key-translation-map
                (vector 'muhenkan i) (vector (- i 32)))
    (<span style="font-weight: bold;">setq</span> i (1+ i))))
</pre>
</div>

<p>
この設定を終えると、 <code>muhenkan-a</code> で <code>A</code> が入力できるようになります。
続いて SKK を起動してみましょう。 <code>muhenkan-a</code> で
</p>

<pre class="example">
  ▽あ*
</pre>

<p>
となります。送りの開始点も、もちろん同様の操作で指定できます。
</p>
</li>
</ul>

<ul class="org-ul">
<li>xmodmap を使う。

<p>
X Window System 上では、 <code>xmodmap</code> というプログラムを使ってキー配列を変
更できます。例えば、「無変換キー」をシフトキーとして使いたければ
</p>

<pre class="example">
% xmodmap -e 'add Shift = Muhenkan'
</pre>

<p>
とします。これで「無変換キー」は通常のシフトキーと同じような感じで使えるよ
うになります。
</p>
</li>

<li><code>skk-sticky.el</code> を使う。

<p>
<a href="#sec-6-6-10">変換位置の指定方法</a>.
</p>
</li>
</ul>

<ul class="org-ul">
<li>親指シフト入力のエミュレーション機能を利用する。

<p>
これは前述した方法とはかなり違ったアプローチです。SKK 本来のローマ字的
入力を捨てて、富士通のワープロ OASYS のような親指シフト入力 <sup><a id="fnr.137" name="fnr.137" class="footref" href="#fn.137">137</a></sup> を
修得します 。
</p>

<p>
DDSKK には NICOLA-DDSKK というプログラムが付属しており、これをインストー
ルすると親指シフト入力が可能になります。インストール自体は簡単で、
</p>

<div class="org-src-container">

<pre class="src src-shell-script">% cd nicola
% make install
</pre>
</div>

<p>
とした後に、 <code>~/.skk</code> に
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-use-kana-keyboard t)
(<span style="font-weight: bold;">setq</span> skk-kanagaki-keyboard-type 'omelet-jis)
</pre>
</div>

<p>
と書くだけです。詳しいことは、NICOLA-DDSKK 付属のドキュメントを参照して
ください。
</p>

<p>
NICOLA 配列は、特別に日本語入力のために考えられた配列なので、慣れれば非
常に効率的な日本語入力ができるようになると期待されます。一方で、ローマ
字的入力方式に慣れてしまっている人にとっては、NICOLA 配列に慣れるまでか
なり練習を要することは確かです。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-10-3-5" class="outline-4">
<h4 id="sec-10-3-5"><span class="section-number-4">10.3.5</span> Q3-5 全く漢字が出てきません。</h4>
<div class="outline-text-4" id="text-10-3-5">
<p>
恐らく辞書の設定ができていないのでしょう。
</p>

<p>
<code>SKK-JISYO.L</code> というファイルがインストールされている場所を確認してくださ
い。普通は
</p>

<pre class="example">
/usr/local/share/skk
/usr/share/skk
</pre>

<p>
といった場所にインストールされています。XEmacs のパッケージならば
</p>

<pre class="example">
/usr/local/lib/xemacs/mule-packages/etc/skk
</pre>

<p>
などを確認します。その後で <code>~/.skk</code> に
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-large-jisyo <span style="font-style: italic;">"/usr/local/share/skk/SKK-JISYO.L"</span>)
</pre>
</div>

<p>
のように設定します。
</p>

<p>
なお、辞書サーバを使っている場合はこの設定は必要ありません。その場合は、
辞書サーバの設定や、それがちゃんと起動しているかどうかを確認してくださ
い。
</p>

<p>
また、どこにも辞書がインストールされていない場合は <a href="http://openlab.jp/skk/dic/">http://openlab.jp/skk/dic/</a> か
ら取得します。
</p>
</div>
</div>

<div id="outline-container-sec-10-3-6" class="outline-4">
<h4 id="sec-10-3-6"><span class="section-number-4">10.3.6</span> Q3-6 チュートリアルが起動できません。</h4>
<div class="outline-text-4" id="text-10-3-6">
<p>
<code>SKK.tut</code> というファイルがインストールされている場所を確認してください。
普通は
</p>

<pre class="example">
/usr/local/share/skk
/usr/share/skk
</pre>

<p>
といった場所にインストールされています。XEmacs のパッケージならば
</p>

<pre class="example">
/usr/local/lib/xemacs/mule-packages/etc/skk
</pre>

<p>
などを確認します。その後で <code>~/.emacs.d/init.el</code> に
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-tut-file <span style="font-style: italic;">"/usr/local/share/skk/SKK.tut"</span>)
</pre>
</div>

<p>
のように設定します。
</p>
</div>
</div>

<div id="outline-container-sec-10-3-7" class="outline-4">
<h4 id="sec-10-3-7"><span class="section-number-4">10.3.7</span> Q3-7 C-x C-j で dired が起動してしまいます。</h4>
<div class="outline-text-4" id="text-10-3-7">
<p>
<code>dired-x</code> を読み込むと <code>C-x C-j</code> が <code>dired-jump</code> にバインドされます。この
状態でも SKK を <code>C-x C-j</code> で起動したいときは、変数 <code>dired-bind-jump</code> に <code>nil</code> を
設定します。
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> dired-bind-jump nil)
</pre>
</div>

<p>
なお、この設定は <code>dired-x</code> を読み込む前である必要があります。
</p>
</div>
</div>
</div>

<div id="outline-container-sec-10-4" class="outline-3">
<h3 id="sec-10-4"><span class="section-number-3">10.4</span> Dictionaries</h3>
<div class="outline-text-3" id="text-10-4">
</div><div id="outline-container-sec-10-4-1" class="outline-4">
<h4 id="sec-10-4-1"><span class="section-number-4">10.4.1</span> Q4-1 SKK には郵便番号辞書がありますか?</h4>
<div class="outline-text-4" id="text-10-4-1">
<p>
CVS から辞書を取得した場合は、 <code>zipcode</code> というディレクトリに入って
います。WWW では、 <a href="http://openlab.jp/skk/dic/">http://openlab.jp/skk/dic/</a> より入手できます。使用方法
は <a href="http://openlab.jp/skk/skk/dic/zipcode/README.ja">http://openlab.jp/skk/skk/dic/zipcode/README.ja</a> を御覧下さい。
</p>
</div>
</div>

<div id="outline-container-sec-10-4-2" class="outline-4">
<h4 id="sec-10-4-2"><span class="section-number-4">10.4.2</span> Q4-2 SKK の辞書には、品詞情報がないんですね。</h4>
<div class="outline-text-4" id="text-10-4-2">
<p>
SKK は漢字とかなとの区切りをユーザが指定する方式により、品詞情報を使った
解析を用いることなく効率的入力ができます。
</p>

<p>
TODO としては、辞書に品詞情報を持たせることで更なる入力の効率化ができると
いう提案がなされており、そのような辞書の作成が既に試みられています。興味
のある方は次の url をご覧ください。
</p>

<ul class="org-ul">
<li><a href="http://openlab.jp/skk/wiki/wiki.cgi?page=SKK%C2%BC%C2%AD%C2%BD%C3%B1">SKK-JISYO.notes</a>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-10-4-3" class="outline-4">
<h4 id="sec-10-4-3"><span class="section-number-4">10.4.3</span> Q4-3 複数の SKK 辞書を結合できますか?</h4>
<div class="outline-text-4" id="text-10-4-3">
<p>
SKK 本体のパッケージには同封されていませんが、 <code>skk-tools</code> という別パッケー
ジがあります。
</p>

<p>
<a href="#sec-9-5">辞書ツール</a>.
</p>
</div>
</div>

<div id="outline-container-sec-10-4-4" class="outline-4">
<h4 id="sec-10-4-4"><span class="section-number-4">10.4.4</span> Q4-4 SKK 形式の英和辞書があると聞いたのですが。</h4>
<div class="outline-text-4" id="text-10-4-4">
<p>
edict は和英辞書ですが、これを SKK 辞書形式の英和辞書に変換したものを
</p>

<p>
<a href="http://openlab.jp/skk/dic/SKK-JISYO.edict">http://openlab.jp/skk/dic/SKK-JISYO.edict</a>
</p>

<p>
として置いています。これは edict を単純に機械的に変換した後、バグの修正
や、エントリ・候補の追加が SKK Openlab で独自に行われているものです。
</p>

<p>
edict を自分で加工して上記と同等のものを作成することもできます。edict は
</p>

<p>
<a href="ftp://ftp.u-aizu.ac.jp:/pub/SciEng/nihongo/ftp.cc.monash.edu.au/">ftp://ftp.u-aizu.ac.jp:/pub/SciEng/nihongo/ftp.cc.monash.edu.au/</a>
</p>

<p>
などから入手できます。加工には日本語の通る <code>gawk</code> と <code>skk-tools</code> の中のプ
ログラムを使い、下記のように行います。
</p>

<div class="org-src-container">

<pre class="src src-shell-script">% jgawk -f edict2skk.awk edict &gt; temp
% skkdic-expr temp | skkdic-sort &gt; SKK-JISYO.E2J
% rm temp
</pre>
</div>

<p>
できた <code>SKK-JISYO.E2J</code> の利用方法は色々ありますが、
</p>

<div class="org-src-container">

<pre class="src src-shell-script">% skkdic-expr SKK-JISYO.E2J + /usr/local/share/skk/SKK-JISYO.L | <span style="font-style: italic;">\</span>
  skkdic-sort &gt; SKK-JISYO.L
</pre>
</div>

<p>
などとして、 <code>SKK-JISYO.L</code> とマージして使うのが手軽です。
</p>

<p>
なお、edict の配布条件は GNU GPL (General Public License) ではありません。
</p>

<p>
<a href="http://www.csse.monash.edu.au/groups/edrdg/newlic.html">http://www.csse.monash.edu.au/groups/edrdg/newlic.html</a>
</p>

<p>
をご覧下さい。 <code>SKK-JISYO.edict</code> のヘッダー部分にもそのダイジェスト
が記載されています。
</p>
</div>
</div>
</div>

<div id="outline-container-sec-10-5" class="outline-3">
<h3 id="sec-10-5"><span class="section-number-3">10.5</span> Miscellaneous</h3>
<div class="outline-text-3" id="text-10-5">
</div><div id="outline-container-sec-10-5-1" class="outline-4">
<h4 id="sec-10-5-1"><span class="section-number-4">10.5.1</span> Q5-1 SKK abbrev モードでもっと英単語を利用した変換ができませんか?</h4>
<div class="outline-text-4" id="text-10-5-1">
<p>
UNIX <code>look</code> コマンドと <code>skk-look.el</code> を利用すると、色々できますよ。
まず、 <code>~/.skk</code> で <code>skk-use-look</code> を <code>t</code> にセットして Emacs/SKK を立ち上
げ直して下さい。
</p>

<p>
さぁ、下記のような芸当が可能になりました。
</p>

<ul class="org-ul">
<li>英単語の補完ができます。

<pre class="example">
  ▽abstr*

<SPAN CLASS="KEY">TAB</SPAN>

  ▽abstract*
</pre>

<p>
通常の補完機能と同様に <code>.</code> で次の補完候補に、 <code>,</code> でひとつ前の補完候補
に移動できます。SKK 形式の英和辞書があれば、ここから <code class="key">SPC</code> を押して英和
変換ができますね。また、 <code>skk-look-use-ispell</code> の値が <code>non-nil</code> であれ
ば、 <code>look</code> で検索する前に <code>ispell</code> でスペルチェック・修正をします。
</p>
</li>

<li>英単語をあいまいに変換して取り出す

<p>
上記同様、 <code>skk-look-use-ispell</code> の値が <code>non-nil</code> であれば、 <code>look</code> で
検索する前に <code>ispell</code> でスペルチェック・修正をします。
</p>

<pre class="example">
  ▽abstr*

<SPAN CLASS="KEY">SPC</SPAN>

  ▼abstract*
</pre>

<p>
見出し語に <code>*</code> を入れるのをお忘れなく。
</p>
</li>

<li>あいまいに変換した後、更に再帰的な英和変換を行う

<p>
まず、 <code>skk-look-recursive-search</code> の値を <code>non-nil</code> にセットして下さい。
Emacs / SKK を再起動する必要はありません。すると、例えば、
</p>

<pre class="example">
  ▽abstr*

<SPAN CLASS="KEY">SPC</SPAN>

  ▼abstract

<SPAN CLASS="KEY">SPC</SPAN>

  ▼アブストラクト

<SPAN CLASS="KEY">SPC</SPAN>

  ▼抽象

<SPAN CLASS="KEY">SPC</SPAN>

  ▼abstraction

<SPAN CLASS="KEY">SPC</SPAN>

  ▼アブストラクション
</pre>

<p>
このように英単語＋その英単語を見出し語にした候補の「セット」を変換結果
として出力することができます。
</p>

<p>
この際、 <code>skk-look-expanded-word-only</code> の値が <code>non-nil</code> であれば、再帰
検索に成功した英単語の「セット」だけを出力することができます（再帰検索
で検出されなかった英単語は無視して出力しません）。
</p>

<p>
もちろん、SKK 辞書に
</p>

<pre class="example">
abstract /アブストラクト/抽象/
abstraction /アブストラクション/
</pre>

<p>
というエントリがあることを前提としています。edict を SKK 辞書形式に変換
すると良いですね。
</p>
</li>
</ul>

<p>
なお、 <code>skk-look.el</code> を使った補完・変換が期待するスピードよりも遅い、補完・変換
で余分な候補が出る、とお感じの貴方は、 <code>skk-look-use-ispell</code> の値を <code>nil</code> に
して <code>ispell</code> によるスペルチェック・修正をオフにしてお試し下さい。
</p>
</div>
</div>

<div id="outline-container-sec-10-5-2" class="outline-4">
<h4 id="sec-10-5-2"><span class="section-number-4">10.5.2</span> Q5-2 市販の CD-ROM 辞書やネットワークの辞書サーバが利用できますか?</h4>
<div class="outline-text-4" id="text-10-5-2">
<p>
Lookup が扱える辞書はほとんど使えます。Lookup がインストールされている状
態で SKK をインストールすると、SKK と Lookup のゲートウェイプログラム <code>skk-lookup.el</code> が
インストールされます。
</p>

<p>
インストールで注意すべきは、 <code>make</code> で呼び出される Emacs は <code>-q -no-site-file</code> フ
ラグ付きで呼ばれるので、 <code>~/.emacs.d/init.el</code> や <code>site-start.el</code> などは読
み込まれないことです。標準設定で <code>load-path</code> の通っているディレクトリに Lookup を
インストールするか、 <code>SKK-CFG</code> の中で <code>VERSION_SPECIFIC_LISPDIR</code> などにデ
ィレクトリを明示することで解決できます。
</p>

<p>
さぁ、 <code>~/.skk</code> で <code>skk-search-prog-list</code> の要素に <code>(skk-lookup-search)</code> を
追加しましょう。他の検索エンジンよりも検索は比較的遅いので、最後の方が良
いと思います。
</p>

<p>
こんな感じです。
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-search-prog-list
      '((skk-search-jisyo-file skk-jisyo 0 t)
        (skk-search-server skk-aux-large-jisyo 10000)
        (skk-lookup-search)))
</pre>
</div>

<p>
Lookup については、<a href="http://openlab.jp/edict/lookup/">http://openlab.jp/edict/lookup/</a> をご参照下さい。
</p>
</div>
</div>

<div id="outline-container-sec-10-5-3" class="outline-4">
<h4 id="sec-10-5-3"><span class="section-number-4">10.5.3</span> Q5-3 他の FEP を使用中にも SHIFT を押してしまいます。</h4>
<div class="outline-text-4" id="text-10-5-3">
<p>
治すには SKK をやめるしかありません :-)
</p>

<p>
Emacs 上以外でも SKK みたいな操作性を実現するソフトウェアがあります。
</p>

<p>
<a href="#sec-9-3">SKK 関連ソフトウェア</a>.
</p>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-11" class="outline-2">
<h2 id="sec-11"><span class="section-number-2">11</span> 事項索引</h2>
<div class="outline-text-2" id="text-11">

</div>
</div>
<div id="outline-container-sec-12" class="outline-2">
<h2 id="sec-12"><span class="section-number-2">12</span> 変数索引</h2>
<div class="outline-text-2" id="text-12">

</div>
</div>
<div id="outline-container-sec-13" class="outline-2">
<h2 id="sec-13"><span class="section-number-2">13</span> 関数索引</h2>
<div class="outline-text-2" id="text-13">

</div>
</div>
<div id="outline-container-sec-14" class="outline-2">
<h2 id="sec-14"><span class="section-number-2">14</span> キー索引</h2>
<div class="outline-text-2" id="text-14">

</div>
</div>
<div id="footnotes">
<h2 class="footnotes">&#33050;&#27880;: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" name="fn.1" class="footnum" href="#fnr.1">1</a></sup> <p class="footpara">
2013-06-11 international/mule-conf.el (file-coding-system-alist)
</p></div>

<div class="footdef"><sup><a id="fn.2" name="fn.2" class="footnum" href="#fnr.2">2</a></sup> <p class="footpara">
Emacs News: Changes in Emacs 24.4 on Non-Free Operating Systems
</p></div>

<div class="footdef"><sup><a id="fn.3" name="fn.3" class="footnum" href="#fnr.3">3</a></sup> <p class="footpara">
SKK = I について詳しくは <a href="http://openlab.jp/skk/SKK.html">http://openlab.jp/skk/SKK.html</a> をご参照下さい。
</p></div>

<div class="footdef"><sup><a id="fn.4" name="fn.4" class="footnum" href="#fnr.4">4</a></sup> <p class="footpara">
Daredevil の名の由来は <a href="#sec-10-1-1">Q1-1 Daredevil SKK って SKK とは違うのですか?</a>.
</p></div>

<div class="footdef"><sup><a id="fn.5" name="fn.5" class="footnum" href="#fnr.5">5</a></sup> <p class="footpara">
Microsoft Windows 環境では <code>makeit.bat</code> を使用することで、UNIX
と同様の操作でインストールできます。 <code>READMEs/README.w32.ja</code> を参照してく
ださい。
</p>

<p class="footpara">
cygwin 環境をインストールされている方は <code>make</code> コマンドが使用できるので、
本文の解説がそのまま当てはまります。
</p>

<p class="footpara">
Apple macOS 環境の方は <code>READMEs/README.MacOSX.ja</code> を参照してください。
</p></div>

<div class="footdef"><sup><a id="fn.6" name="fn.6" class="footnum" href="#fnr.6">6</a></sup> <p class="footpara">
<code>ChangeLog</code> や <code>Makefile</code> が置かれているディレクトリです。
</p></div>

<div class="footdef"><sup><a id="fn.7" name="fn.7" class="footnum" href="#fnr.7">7</a></sup> <p class="footpara">
<a href="http://melpa.org/">Milkypostman's Emacs Lisp Package Archive</a>
</p></div>

<div class="footdef"><sup><a id="fn.8" name="fn.8" class="footnum" href="#fnr.8">8</a></sup> <p class="footpara">
GNU Emacs 24 以降で標準で搭載されています。GNU Emacs 23 以
前では手動でインストール必要があります。 <a href="http://wikemacs.org/wiki/Package.el">http://wikemacs.org/wiki/Package.el</a>
</p></div>

<div class="footdef"><sup><a id="fn.9" name="fn.9" class="footnum" href="#fnr.9">9</a></sup> <p class="footpara">
Microsoft Windows 環境では <code>makeit.bat get</code> と実行します。
</p></div>

<div class="footdef"><sup><a id="fn.10" name="fn.10" class="footnum" href="#fnr.10">10</a></sup> <p class="footpara">
Emacs が起動する過程の関数 <code>normal-top-level</code> で <code>SKK_LISPDIR/leim-list.el</code> が
読み込まれます。 <code>leim-list.el</code> は <code>skk-autoloads.el</code> と <code>skk-setup.el</code> を <code>require</code> し
ます。 <code>skk-autoloads.el</code> は DDSKK の <code>make</code> 時に自動的に生成されるファイ
ルであり、各関数を自動ロード (autoload) するよう定義するほか <code>register-input-method</code> も
行います。 <code>skk-setup.el</code> はキーバインド（ <code>C-x C-j</code> → <code>skk-mode</code> ）の定
義、変数 <code>skk-tut-file</code> の定義及びインクリメンタル・サーチの定義を行って
います。
</p></div>

<div class="footdef"><sup><a id="fn.11" name="fn.11" class="footnum" href="#fnr.11">11</a></sup> <p class="footpara">
配布物にサンプルファイル <code>etc/dot.emacs</code> と <code>etc/dot.skk</code> が
あります。参考にして下さい。
</p></div>

<div class="footdef"><sup><a id="fn.12" name="fn.12" class="footnum" href="#fnr.12">12</a></sup> <p class="footpara">
constant database のこと。詳しくは <a href="http://cr.yp.to/cdb.html">http://cr.yp.to/cdb.html</a> 又
は <a href="http://ja.wikipedia.org/wiki/Cdb">http://ja.wikipedia.org/wiki/Cdb</a> を参照のこと。
</p></div>

<div class="footdef"><sup><a id="fn.13" name="fn.13" class="footnum" href="#fnr.13">13</a></sup> <p class="footpara">
SKK 辞書 の <code>Makefile</code> 中の <code>cdb</code> ターゲットを実行すること
で <code>SKK-JISYO.L</code> に基づく <code>SKK-JISYO.L.cdb</code> を生成することができます。
</p></div>

<div class="footdef"><sup><a id="fn.14" name="fn.14" class="footnum" href="#fnr.14">14</a></sup> <p class="footpara">
<a href="#sec-6-10-3-1">辞書検索の設定の具体例</a>.
</p></div>

<div class="footdef"><sup><a id="fn.15" name="fn.15" class="footnum" href="#fnr.15">15</a></sup> <p class="footpara">
<code>skk-setup.el</code> では、 <code>isearch-mode-hook</code> に <code>skk-isearch-setup-maybe</code> を、
<code>isearch-mode-end-hook</code> に <code>skk-isearch-cleanup-maybe</code> をそれぞれ追加して
います。 <code>skk-isearch-{setup|cleanup}-maybe</code> も <code>skk-setup.el</code> で定義され
ており、その実態は、関数 <code>skk-isearch-mode-{setup|cleanup}</code> です。
</p></div>

<div class="footdef"><sup><a id="fn.16" name="fn.16" class="footnum" href="#fnr.16">16</a></sup> <p class="footpara">
<a href="#sec-5-5">チュートリアル</a>.
</p></div>

<div class="footdef"><sup><a id="fn.17" name="fn.17" class="footnum" href="#fnr.17">17</a></sup> <p class="footpara">
<a href="#sec-6">便利な応用機能</a>.
</p></div>

<div class="footdef"><sup><a id="fn.18" name="fn.18" class="footnum" href="#fnr.18">18</a></sup> <p class="footpara">
<code>skk.el</code> の <code>skk-setup-modeline</code> にて、 <code>mode-line-format</code> に <code>skk-icon</code> と <code>skk-modeline-input-mode</code> を追加しています。
</p></div>

<div class="footdef"><sup><a id="fn.19" name="fn.19" class="footnum" href="#fnr.19">19</a></sup> <p class="footpara">
カラーディスプレイを使用し、カラー表示をサポートしている Window System 下
で対応する Emacs を使用している場合。
</p>

<p class="footpara">
<a href="#sec-6-14-3">入力モードを示すカーソル色に関する設定</a>.
</p></div>

<div class="footdef"><sup><a id="fn.20" name="fn.20" class="footnum" href="#fnr.20">20</a></sup> <p class="footpara">
ただし、「アスキーモード」を利用すれば SKK モードから抜ける必要
はほとんどありません。
</p>

<p class="footpara">
<a href="#sec-5-2">アスキーモード</a>.
</p></div>

<div class="footdef"><sup><a id="fn.21" name="fn.21" class="footnum" href="#fnr.21">21</a></sup> <p class="footpara">
<a href="#sec-6-15-1">エラーなどの日本語表示</a>.
</p></div>

<div class="footdef"><sup><a id="fn.22" name="fn.22" class="footnum" href="#fnr.22">22</a></sup> <p class="footpara">
<a href="emacs#Auto Fill">Auto Fill Mode in GNU Emacs Manual</a>.
</p></div>

<div class="footdef"><sup><a id="fn.23" name="fn.23" class="footnum" href="#fnr.23">23</a></sup> <p class="footpara">
<a href="emacs#Arguments">Arguments in GNU Emacs Manual</a>.
</p></div>

<div class="footdef"><sup><a id="fn.24" name="fn.24" class="footnum" href="#fnr.24">24</a></sup> <p class="footpara">
<a href="#sec-6-10-1">個人辞書</a>.
</p></div>

<div class="footdef"><sup><a id="fn.25" name="fn.25" class="footnum" href="#fnr.25">25</a></sup> <p class="footpara">
<a href="#sec-6-10-11">個人辞書の保存動作</a>.
</p></div>

<div class="footdef"><sup><a id="fn.26" name="fn.26" class="footnum" href="#fnr.26">26</a></sup> <p class="footpara">
<a href="#sec-6-14-3">入力モードを示すカーソル色に関する設定</a>.
</p></div>

<div class="footdef"><sup><a id="fn.27" name="fn.27" class="footnum" href="#fnr.27">27</a></sup> <p class="footpara">
JIS X 0208 英字のこと。このマニュアルでは「全角アルファベッ
ト」と表記する。
</p></div>

<div class="footdef"><sup><a id="fn.28" name="fn.28" class="footnum" href="#fnr.28">28</a></sup> <p class="footpara">
<a href="#sec-5-2">入力モード</a>.
</p></div>

<div class="footdef"><sup><a id="fn.29" name="fn.29" class="footnum" href="#fnr.29">29</a></sup> <p class="footpara">
<a href="emacs#Point">Point in GNU Emacs Manual</a>.
</p></div>

<div class="footdef"><sup><a id="fn.30" name="fn.30" class="footnum" href="#fnr.30">30</a></sup> <p class="footpara">
本マニュアルでは、見出し語と候補群を合わせた一行を「エントリ」
と呼びます。
</p>

<p class="footpara">
<a href="#sec-6-10-7-1">送りありエントリと送りなしエントリ</a>.
</p></div>

<div class="footdef"><sup><a id="fn.31" name="fn.31" class="footnum" href="#fnr.31">31</a></sup> <p class="footpara">
ハイライト表示は GNU Emacs の Overlays、XEmacs の extent
の機能を使用しています。
</p></div>

<div class="footdef"><sup><a id="fn.32" name="fn.32" class="footnum" href="#fnr.32">32</a></sup> <p class="footpara">
<a href="#sec-6-7-4">暗黙の確定のタイミング</a>.
</p></div>

<div class="footdef"><sup><a id="fn.33" name="fn.33" class="footnum" href="#fnr.33">33</a></sup> <p class="footpara">
<code>skk-henkan-number-to-display-candidates</code>
</p></div>

<div class="footdef"><sup><a id="fn.34" name="fn.34" class="footnum" href="#fnr.34">34</a></sup> <p class="footpara">
<code>skk-show-candidates-nth-henkan-char</code>
</p></div>

<div class="footdef"><sup><a id="fn.35" name="fn.35" class="footnum" href="#fnr.35">35</a></sup> <p class="footpara">
エコーエリアとミニバッファは視覚的には同一の場所にあります
が、エコーエリアが単にユーザへのメッセージを表示するのみであるのに対し、
ミニバッファは独立したバッファとして機能する点が異なります。
</p></div>

<div class="footdef"><sup><a id="fn.36" name="fn.36" class="footnum" href="#fnr.36">36</a></sup> <p class="footpara">
<a href="#sec-6-6-6">候補の選択に用いるキー</a>.
</p></div>

<div class="footdef"><sup><a id="fn.37" name="fn.37" class="footnum" href="#fnr.37">37</a></sup> <p class="footpara">
<code>x</code> は小文字で入力する必要があります。
</p></div>

<div class="footdef"><sup><a id="fn.38" name="fn.38" class="footnum" href="#fnr.38">38</a></sup> <p class="footpara">
<a href="#sec-5-3-4">辞書登録モード</a>.
</p></div>

<div class="footdef"><sup><a id="fn.39" name="fn.39" class="footnum" href="#fnr.39">39</a></sup> <p class="footpara">
<a href="#sec-6-8-3">送り仮名の自動処理</a>.
</p></div>

<div class="footdef"><sup><a id="fn.40" name="fn.40" class="footnum" href="#fnr.40">40</a></sup> <p class="footpara">
<a href="#sec-5-3-4-3">サ変動詞の入力</a>.
</p></div>

<div class="footdef"><sup><a id="fn.41" name="fn.41" class="footnum" href="#fnr.41">41</a></sup> <p class="footpara">
詳細は <a href="#sec-5-3-3-1">送り仮名が無い場合</a>.
</p></div>

<div class="footdef"><sup><a id="fn.42" name="fn.42" class="footnum" href="#fnr.42">42</a></sup> <p class="footpara">
<a href="#sec-6-10-1">辞書の種類</a>.
</p></div>

<div class="footdef"><sup><a id="fn.43" name="fn.43" class="footnum" href="#fnr.43">43</a></sup> <p class="footpara">
ここでは「暗黙の確定」が行われるので <code>C-j</code> を打鍵する必要はあり
ません。
</p>

<p class="footpara">
<a href="#sec-6-6-7">▼モードでの <SPAN CLASS="KEY">RET</SPAN></a>.
</p></div>

<div class="footdef"><sup><a id="fn.44" name="fn.44" class="footnum" href="#fnr.44">44</a></sup> <p class="footpara">
<a href="#sec-5-3-3-3">送り仮名が有る場合</a>.
</p></div>

<div class="footdef"><sup><a id="fn.45" name="fn.45" class="footnum" href="#fnr.45">45</a></sup> <p class="footpara">
<code>SKK-JISYO.L</code> など共有辞書のメンテナンス上、原則としてサ変動詞
を送りありエントリに追加していません。そのため、「する」を送り仮名とした
送りあり変換では、辞書に候補がなく辞書登録モードに入ってしまうので、名詞
として分解して入力することが一般的です。ただし、DDSKK 13 以降では暫定的に
サ変動詞の送りあり変換を可能にする機能を用意しました。
</p>

<p class="footpara">
<a href="#sec-6-5-10">サ変動詞変換</a>.
</p></div>

<div class="footdef"><sup><a id="fn.46" name="fn.46" class="footnum" href="#fnr.46">46</a></sup> <p class="footpara">
<code>M-y</code> の <code>isearch-yank-kill</code> 、 <code>M-p</code> の <code>isearch-ring-retreat</code> 、
又は <code>M-n</code> の <code>isearch-ring-advance</code> など
</p>

<p class="footpara">
<a href="emacs#Incremental Search">Incremental Search in GNU Emacs Manual</a>.
</p></div>

<div class="footdef"><sup><a id="fn.47" name="fn.47" class="footnum" href="#fnr.47">47</a></sup> <p class="footpara">
<code>search-highlight</code> など
</p></div>

<div class="footdef"><sup><a id="fn.48" name="fn.48" class="footnum" href="#fnr.48">48</a></sup> <p class="footpara">
いわゆる半角カナ。以下、このマニュアルでは「半角カナ」と記述します
</p></div>

<div class="footdef"><sup><a id="fn.49" name="fn.49" class="footnum" href="#fnr.49">49</a></sup> <p class="footpara">
<a href="#sec-6-2-1-1">skk-init-file の自動コンパイル</a>.
</p></div>

<div class="footdef"><sup><a id="fn.50" name="fn.50" class="footnum" href="#fnr.50">50</a></sup> <p class="footpara">
正確には、▽マークの次の位置にある文字列によって文字種を判別
しているので、途中で文字種類の違う文字が混在していても無視されます。
</p></div>

<div class="footdef"><sup><a id="fn.51" name="fn.51" class="footnum" href="#fnr.51">51</a></sup> <p class="footpara">
全英文字とアスキー文字のトグルでの変換を行うこともできます。
ただし、全英モードやアスキーモードでは <code>Q</code> やその他の大文字により▽モード
に入ることができないので、かな ⇔ カナ のときと同様にトグル変換できるわけ
ではありません。かなモード／カナモードにおいて、既に入力された全英文字、
アスキー文字に対してトグル変換をするような設計になっています。
</p></div>

<div class="footdef"><sup><a id="fn.52" name="fn.52" class="footnum" href="#fnr.52">52</a></sup> <p class="footpara">
SKK abbrev モードでは <code>is</code> ⇒ 「インクリメンタル・サーチ」の
ような変換を行うことができます。他の変換と同様に <code class="key">SPC</code> を押すと変換モード
に入ってしまいますので、 SKK abbrev モードからアスキー文字を入力するのは、
一語のみの場合以外は不便です。
</p>

<p class="footpara">
<a href="#sec-6-5-5">アスキー文字を見出し語とした変換</a>.
</p></div>

<div class="footdef"><sup><a id="fn.53" name="fn.53" class="footnum" href="#fnr.53">53</a></sup> <p class="footpara">
<code>C-q</code> は <code>skk-abbrev-mode-map</code> にて特別な動作をするように定義さ
れています。
</p>

<p class="footpara">
<a href="#sec-6-5-5">アスキー文字を見出し語とした変換</a>.
</p></div>

<div class="footdef"><sup><a id="fn.54" name="fn.54" class="footnum" href="#fnr.54">54</a></sup> <p class="footpara">
メニューバーが使用できる環境では、メニューバーを使ってこれら
の一括変換コマンドを呼び出すことができます。ただし <code>kakasi</code> がインストー
ルされていない場合は <code>kakasi</code> を利用する機能が灰色になり使用できません。
</p>

<p class="footpara">
<a href="emacs#Menu Bars">Menu Bars in GNU Emacs Manual</a>.
</p></div>

<div class="footdef"><sup><a id="fn.55" name="fn.55" class="footnum" href="#fnr.55">55</a></sup> <p class="footpara">
<a href="http://kakasi.namazu.org/">KAKASI - 漢字→かな（ローマ字）変換プログラム</a>
</p></div>

<div class="footdef"><sup><a id="fn.56" name="fn.56" class="footnum" href="#fnr.56">56</a></sup> <p class="footpara">
昭和29年12月9日付内閣告示第一号によれば、原則的に訓令式（日本式）
を用いるかのように記載されていますが、今日一般的な記載方法は、むしろヘボ
ン式であるようです。
</p></div>

<div class="footdef"><sup><a id="fn.57" name="fn.57" class="footnum" href="#fnr.57">57</a></sup> <p class="footpara">
細かい説明です。 <code class="key">TAB</code> を押す直前に▽モードで入力された文字列を X と
呼ぶことにします。このとき、個人辞書の送りなしエントリの中から「先頭が X と
一致し」かつ「長さが X よりも長い見出し語」を検索して、そのような語が該当
すれば X の代わりに表示します。
</p></div>

<div class="footdef"><sup><a id="fn.58" name="fn.58" class="footnum" href="#fnr.58">58</a></sup> <p class="footpara">
同じ列に既に入力している文字列があったときにそれを参照して補完
しようとする機能
</p></div>

<div class="footdef"><sup><a id="fn.59" name="fn.59" class="footnum" href="#fnr.59">59</a></sup> <p class="footpara">
現在は候補群の右側１カラムのフェイスが標準設定に戻る、という
制約があります。
</p></div>

<div class="footdef"><sup><a id="fn.60" name="fn.60" class="footnum" href="#fnr.60">60</a></sup> <p class="footpara">
<code>p125</code> という見出し語であれば、その数値部分である <code>125</code> が再変換
の見出し語となります。
</p></div>

<div class="footdef"><sup><a id="fn.61" name="fn.61" class="footnum" href="#fnr.61">61</a></sup> <p class="footpara">
SHIFT キーを伴って数字を入力し始めることはできないので <code>Q</code> ま
たは <code>/</code> で▽モードに入る必要があります。
</p></div>

<div class="footdef"><sup><a id="fn.62" name="fn.62" class="footnum" href="#fnr.62">62</a></sup> <p class="footpara">
<code>m</code> や <code>d</code> などアスキー文字を見出し語として入力する場合は <code>/</code> キー
を最初に入力して SKK abbrev モードに入ってから入力する必要があります。
</p>

<p class="footpara">
<a href="#sec-6-5-5">アスキー文字を見出し語とした変換</a>.
</p></div>

<div class="footdef"><sup><a id="fn.63" name="fn.63" class="footnum" href="#fnr.63">63</a></sup> <p class="footpara">
通常の単語では、改行を含むことが可能です。それは、評価すると
その位置に改行を挿入するような実行変換プログラムに変換して辞書に書き込ん
でいるからです。
</p>

<p class="footpara">
<a href="#sec-6-10-1">辞書の種類</a>.
</p>

<p class="footpara">
しかし、実行変換されるプログラムを辞書登録する際にはこの
機能を利用できないため、改行を含むことができません。
</p></div>

<div class="footdef"><sup><a id="fn.64" name="fn.64" class="footnum" href="#fnr.64">64</a></sup> <p class="footpara">
<a href="#sec-6-5-6">今日の日付の入力</a>.
</p></div>

<div class="footdef"><sup><a id="fn.65" name="fn.65" class="footnum" href="#fnr.65">65</a></sup> <p class="footpara">
<a href="#sec-6-5-4">数値変換</a>.
</p></div>

<div class="footdef"><sup><a id="fn.66" name="fn.66" class="footnum" href="#fnr.66">66</a></sup> <p class="footpara">
<a href="#sec-6-3-1">かなモードからカタカナを入力</a>.
</p></div>

<div class="footdef"><sup><a id="fn.67" name="fn.67" class="footnum" href="#fnr.67">67</a></sup> <p class="footpara">
<code>skk-search-prog-list</code> の設定をユーザが変更している場合は期待
どおりに動作しない場合があります。その場合は <code>skk-search-prog-list</code> の設
定に関数 <code>skk-search-katakana</code> の呼び出しがあることを確認してください。
またこの機能の設定は DDSKK 14.1 以前では異なります。詳しくはソースに付属
のドキュメント、設定例をご覧ください。
</p></div>

<div class="footdef"><sup><a id="fn.68" name="fn.68" class="footnum" href="#fnr.68">68</a></sup> <p class="footpara">
<code>skk-search-prog-list</code> の設定をユーザが変更している場合は期待ど
おりに動作しない場合があります。その場合は <code>skk-search-prog-list</code> の設定
に関数 <code>skk-search-sagyo-henkaku</code> の呼び出しがあることを確認してください。
またこの機能の設定は DDSKK 14.1 以前では異なります。詳しくはソースに付属
のドキュメント、設定例をご覧ください。
</p></div>

<div class="footdef"><sup><a id="fn.69" name="fn.69" class="footnum" href="#fnr.69">69</a></sup> <p class="footpara">
辞書が充実していればかな漢字変換で見出し語「へん」から「邊」
や「邉」を求めることができます。もちろん、文字コードを指定して「邊」や
「邉」を直接挿入することもできます。
</p></div>

<div class="footdef"><sup><a id="fn.70" name="fn.70" class="footnum" href="#fnr.70">70</a></sup> <p class="footpara">
変数 <code>skk-use-kana-keyboard</code> が <code>non-nil</code> ならば無効である。
</p></div>

<div class="footdef"><sup><a id="fn.71" name="fn.71" class="footnum" href="#fnr.71">71</a></sup> <p class="footpara">
<a href="#sec-5-3-3">▼モード</a>.
</p></div>

<div class="footdef"><sup><a id="fn.72" name="fn.72" class="footnum" href="#fnr.72">72</a></sup> <p class="footpara">
辞書登録モードの標準の確定、登録の動作は <a href="#sec-5-3-4">辞書登録モード</a>.
</p></div>

<div class="footdef"><sup><a id="fn.73" name="fn.73" class="footnum" href="#fnr.73">73</a></sup> <p class="footpara">
あくまでも「任意のキーで変換開始位置を指定する」ものであり、
sticky-shift そのものではありません。したがって、アスキーモードや SKK abbrev モード、
また SKK 以外でも sticky-shift を使いたい場合は、前述のような設定を併用す
る必要があります。
</p></div>

<div class="footdef"><sup><a id="fn.74" name="fn.74" class="footnum" href="#fnr.74">74</a></sup> <p class="footpara">
<code>skk-hint.el</code> を併用する場合は <code>skk-hint-start-char</code> の標準
設定も <code>;</code> であるため、どちらかを別のキーに割り当てる必要があります。
</p>

<p class="footpara">
<a href="#sec-6-5-2">候補の絞り込み</a>.
</p></div>

<div class="footdef"><sup><a id="fn.75" name="fn.75" class="footnum" href="#fnr.75">75</a></sup> <p class="footpara">
<a href="#sec-10-3-4">Q3-4 左手の小指を SHIFT で酷使したくありません。</a>.
</p></div>

<div class="footdef"><sup><a id="fn.76" name="fn.76" class="footnum" href="#fnr.76">76</a></sup> <p class="footpara">
<code>buffer-undo-list</code> に Emacs が挿入したアンドゥの境目の目印を取り
除く方法でエミュレートしています。
</p></div>

<div class="footdef"><sup><a id="fn.77" name="fn.77" class="footnum" href="#fnr.77">77</a></sup> <p class="footpara">
SKK abbrev モードでは、アスキー文字入力が Emacs 本来の <code>self-insert-command</code> に
より行われているので、エミュレーションのための内部変数である <code>skk-self-insert-non-undo-count</code> を
インクリメントすることができず、アンドゥをエミュレートできません。しかも、
カンマやピリオドを挿入した時点で、コマンド <code>skk-abbrev-comma</code> や <code>skk-abbrev-period</code> を
使うことになるので、本来のアンドゥの機能も損なってしまいます。ただし、現
実問題として、元来 SKK abbrev モードは省略形としての見出し語を挿入するた
めのモードですから、長い見出し語を挿入することはあまりないと考えられます。
</p></div>

<div class="footdef"><sup><a id="fn.78" name="fn.78" class="footnum" href="#fnr.78">78</a></sup> <p class="footpara">
20 は Emacs のソースファイルの一部である <code>keyboard.c</code> に定められ
たマジックナンバーと一致します。
</p></div>

<div class="footdef"><sup><a id="fn.79" name="fn.79" class="footnum" href="#fnr.79">79</a></sup> <p class="footpara">
かなモードでの入力中、アスキーモードに移行して入力した場合など
がこれにあたります。
</p></div>

<div class="footdef"><sup><a id="fn.80" name="fn.80" class="footnum" href="#fnr.80">80</a></sup> <p class="footpara">
<code>C-j</code> を打鍵して明示的に確定した場合は勿論、「暗黙の確定」を
行った場合も同様です。
</p></div>

<div class="footdef"><sup><a id="fn.81" name="fn.81" class="footnum" href="#fnr.81">81</a></sup> <p class="footpara">
▽マークからポイントの直前の文字までを見出し語とします。
打鍵に入力された文字（「を」や「。」）は見出し語には含まれません。
</p></div>

<div class="footdef"><sup><a id="fn.82" name="fn.82" class="footnum" href="#fnr.82">82</a></sup> <p class="footpara">
<a href="#sec-6-8-3">送り仮名の自動処理</a>.
</p></div>

<div class="footdef"><sup><a id="fn.83" name="fn.83" class="footnum" href="#fnr.83">83</a></sup> <p class="footpara">
正確には、印字可能な文字または <code class="key">RET</code> が入力されたときです。
</p></div>

<div class="footdef"><sup><a id="fn.84" name="fn.84" class="footnum" href="#fnr.84">84</a></sup> <p class="footpara">
<code>skk-kakutei-early</code> の機能と <code>skk-process-okuri-early</code> の
機能を同時に有効にすることはできません。 <code>skk-kakutei-early</code> の値を <code>non-nil</code> に
する場合は <code>skk-process-okuri-early</code> の値を <code>nil</code> にする必要があります。
</p></div>

<div class="footdef"><sup><a id="fn.85" name="fn.85" class="footnum" href="#fnr.85">85</a></sup> <p class="footpara">
確定変換用辞書の見出し語の配列については、サイズが大き
い場合は、共有辞書と同様、ソートして二分検索（バイナリサーチ）を行い、サ
イズが小さければ適当な配置で直線的検索（リニアサーチ）を行うことをお勧め
します。次も参照してください。
</p>

<p class="footpara">
<a href="#sec-6-10-3-2">辞書検索のための関数</a>.
</p>

<p class="footpara">
<a href="#sec-6-10-7-3">エントリの配列</a>.
</p></div>

<div class="footdef"><sup><a id="fn.86" name="fn.86" class="footnum" href="#fnr.86">86</a></sup> <p class="footpara">
この機能は、変数 <code>skk-process-okuri-early</code> の値を
<code>non-nil</code> に設定した状態と共存できません。
</p>

<p class="footpara">
<a href="#sec-6-8-4">送りあり変換の変換開始のタイミング</a>.
</p></div>

<div class="footdef"><sup><a id="fn.87" name="fn.87" class="footnum" href="#fnr.87">87</a></sup> <p class="footpara">
実は変数 <code>skk-henkan-okuri-strictly</code> の値は辞書バッフ
ァで参照されるので、ミニバッファのバッファローカル値を変更してもうまくい
きません。将来のバージョンでは、これを改良し、辞書バッファでの動作に影響
するユーザ変数をバッファローカル化できるようにする予定です。
</p></div>

<div class="footdef"><sup><a id="fn.88" name="fn.88" class="footnum" href="#fnr.88">88</a></sup> <p class="footpara">
「大く」などの候補は鬱陶しいが、すぐに単語登録に入っ
てしまうのも嫌な人におすすめです。
</p></div>

<div class="footdef"><sup><a id="fn.89" name="fn.89" class="footnum" href="#fnr.89">89</a></sup> <p class="footpara">
<a href="#sec-6-8-4">送りあり変換の変換開始のタイミング</a>.
</p></div>

<div class="footdef"><sup><a id="fn.90" name="fn.90" class="footnum" href="#fnr.90">90</a></sup> <p class="footpara">
実際には、普通の送りなし変換として最初は検索されます。個
人辞書まで調べて候補が見つからないときは、その後、送り仮名の自動処理の検
索に移ります。
</p></div>

<div class="footdef"><sup><a id="fn.91" name="fn.91" class="footnum" href="#fnr.91">91</a></sup> <p class="footpara">
<a href="#sec-6-10-7-2">送りありエントリのブロック形式</a>.
</p></div>

<div class="footdef"><sup><a id="fn.92" name="fn.92" class="footnum" href="#fnr.92">92</a></sup> <p class="footpara">
長さ順にソートするのは、変換された部分がより長い候補を先
順位として出力するためです。
</p></div>

<div class="footdef"><sup><a id="fn.93" name="fn.93" class="footnum" href="#fnr.93">93</a></sup> <p class="footpara">
「該当の見出し語から切り捨てられた文字列」を送り仮名とみ
なして処理しています。
</p></div>

<div class="footdef"><sup><a id="fn.94" name="fn.94" class="footnum" href="#fnr.94">94</a></sup> <p class="footpara">
専ら補完的に自動送り処理を利用するのであれば
 <code>(skk-okuri-search)</code> を <code>skk-search-prog-list</code> の最後に設定するという方
法もあります。
</p>

<p class="footpara">
<a href="#sec-6-10-3">辞書の検索方法の設定</a>.
</p></div>

<div class="footdef"><sup><a id="fn.95" name="fn.95" class="footnum" href="#fnr.95">95</a></sup> <p class="footpara">
変数 <code>skk-auto-okuri-process</code> の値を <code>non-nil</code> に設定している。
</p></div>

<div class="footdef"><sup><a id="fn.96" name="fn.96" class="footnum" href="#fnr.96">96</a></sup> <p class="footpara">
<a href="#sec-6-10-7">辞書の書式</a>.
</p></div>

<div class="footdef"><sup><a id="fn.97" name="fn.97" class="footnum" href="#fnr.97">97</a></sup> <p class="footpara">
「ふr」に対して「大量」（たいりょう）が関連語として保存されま
す。勿論、「ふr」に対する「雨」（あめ）の学習もまだ生きています。
</p></div>

<div class="footdef"><sup><a id="fn.98" name="fn.98" class="footnum" href="#fnr.98">98</a></sup> <p class="footpara">
<a href="http://www.ruby-lang.org">http://www.ruby-lang.org</a>
</p></div>

<div class="footdef"><sup><a id="fn.99" name="fn.99" class="footnum" href="#fnr.99">99</a></sup> <p class="footpara">
Ruby 2.4 以降を使用する場合は、DDSKK 16.2 以降に付属する <code>bayesian/bskk</code> を
使用してください。
</p></div>

<div class="footdef"><sup><a id="fn.100" name="fn.100" class="footnum" href="#fnr.100">100</a></sup> <p class="footpara">
<code>skk-search-prog-list</code> に登録されている関
数 <code>skk-search-extra-jisyo-files</code> が、 <code>skk-extra-jisyo-file-list</code> の
各要素を逐次処理します。
</p></div>

<div class="footdef"><sup><a id="fn.101" name="fn.101" class="footnum" href="#fnr.101">101</a></sup> <p class="footpara">
<a href="#sec-6-10-14">辞書バッファの文字コードの設定</a>.
</p></div>

<div class="footdef"><sup><a id="fn.102" name="fn.102" class="footnum" href="#fnr.102">102</a></sup> <p class="footpara">
検索領域の先頭ポイントと末尾ポイントの差
</p></div>

<div class="footdef"><sup><a id="fn.103" name="fn.103" class="footnum" href="#fnr.103">103</a></sup> <p class="footpara">
あるかな文字をローマ字表現したときの１文字目を <b>ローマ字プレフィックス</b> と
呼びます。
</p></div>

<div class="footdef"><sup><a id="fn.104" name="fn.104" class="footnum" href="#fnr.104">104</a></sup> <p class="footpara">
<a href="#sec-6-8-3">送り仮名の自動処理</a>.
</p>

<p class="footpara">
<a href="#sec-6-8-1">送り仮名の厳密なマッチ</a>.
</p>

<p class="footpara">
<a href="#sec-6-8-2">送り仮名の優先的なマッチ</a>.
</p></div>

<div class="footdef"><sup><a id="fn.105" name="fn.105" class="footnum" href="#fnr.105">105</a></sup> <p class="footpara">
ただし <code>skk-process-okuri-early</code> の値が <code>non-nil</code> であれば、
送り仮名を決定する前に変換を開始することになるので、送り仮名を明示的に入
力していても個人辞書にはブロック形式は作られません。
</p></div>

<div class="footdef"><sup><a id="fn.106" name="fn.106" class="footnum" href="#fnr.106">106</a></sup> <p class="footpara">
ソートする際には、見出し語を unsigned-char と見なします。この順
序は Emacs が 関数 <code>string&lt;</code> で文字列を比較するときの順序であり、UNIX の <code>sort</code> コマンド
での標準の順序とは異なります。Emacs のコマンド <code>sort-lines</code> を用いればフ
ァイルをこの順序でソートすることができます。Emacs のコマンド <code>sort-columns</code> は
内部的に UNIX コマンドの <code>sort</code> を使っているので、辞書のソートには使えません。
</p></div>

<div class="footdef"><sup><a id="fn.107" name="fn.107" class="footnum" href="#fnr.107">107</a></sup> <p class="footpara">
正確に言えば、送りあり変換では <code>skk-okuri-ari-min + 1</code> の位置、
送りなし変換では <code>skk-okuri-nasi-min + 1</code> の位置
</p></div>

<div class="footdef"><sup><a id="fn.108" name="fn.108" class="footnum" href="#fnr.108">108</a></sup> <p class="footpara">
確定する前の▼モードの状態
</p></div>

<div class="footdef"><sup><a id="fn.109" name="fn.109" class="footnum" href="#fnr.109">109</a></sup> <p class="footpara">
前置引数を伴って実行する（ <code>C-u M-x skk-edit-private-jisyo</code> ）
ことで、コーディングシステムを指定して個人辞書を開くことができます。
</p></div>

<div class="footdef"><sup><a id="fn.110" name="fn.110" class="footnum" href="#fnr.110">110</a></sup> <p class="footpara">
通常の使用の範囲では <code>M-x skk-purge-from-jisyo</code> した場合、あ
るいは個人辞書をユーザが意図的に編集した場合、複数の Emacs で DDSKK を
使用した場合などに、個人辞書が小さくなることがあります。他の場合はバグの
可能性があります。
</p></div>

<div class="footdef"><sup><a id="fn.111" name="fn.111" class="footnum" href="#fnr.111">111</a></sup> <p class="footpara">
<code>skk-jisyo</code> が既に壊れていても、変数 <code>skk-backup-jisyo</code> が指し
示すファイルにそれ以前の個人辞書が残っている可能性があります。
</p></div>

<div class="footdef"><sup><a id="fn.112" name="fn.112" class="footnum" href="#fnr.112">112</a></sup> <p class="footpara">
これは、個人辞書の最小ポイントに、常に最後に変換を行ったエン
トリを移動させるために、エントリ数、候補数が全く増えていなくとも、確定に
より個人辞書が更新されているからです。
</p></div>

<div class="footdef"><sup><a id="fn.113" name="fn.113" class="footnum" href="#fnr.113">113</a></sup> <p class="footpara">
これは、Emacs の <code>dabbrev.el</code> の機能との調和を考えての
措置です。Dabbrev においては、現在のバッファと同じモードの他のバッファを
検索して abbreviation の展開を行うように設定することができるのですが、仮
に辞書バッファにおける変数 <code>major-mode</code> の値が <code>fundamental-mode</code> のまま
だとすると、 Dabbrev が辞書バッファを検索してしまう可能性があります。この
措置によって、そのような事態を回避しています。
</p></div>

<div class="footdef"><sup><a id="fn.114" name="fn.114" class="footnum" href="#fnr.114">114</a></sup> <p class="footpara">
関数 <code>skk-find-coding-system</code> を参照のこと。
</p></div>

<div class="footdef"><sup><a id="fn.115" name="fn.115" class="footnum" href="#fnr.115">115</a></sup> <p class="footpara">
coding system は GNU Emacs の場合 <code>euc-jp</code>, <code>shift_jis</code>, <code>junet</code> な
どのシンボルで表され、 <code>M-x describe-coding-system</code> や <code>M-x list-coding-systems</code> で
調べることができます。XEmacs の場合、シンボルは coding system そのもので
はなく coding system object を指示するためのシンボルとして扱われます。
具体的には GNU Emacs では <code>(coding-system-p 'euc-jp)</code> が <code>t</code> を返すのに対
し、 XEmacs では <code>nil</code> を返しますが、代わりにシンボルが示す coding system object を
返す関数 <code>find-coding-system</code> が存在します。
</p></div>

<div class="footdef"><sup><a id="fn.116" name="fn.116" class="footnum" href="#fnr.116">116</a></sup> <p class="footpara">
<code>*</code> の文字は変換時には表示されません。
</p></div>

<div class="footdef"><sup><a id="fn.117" name="fn.117" class="footnum" href="#fnr.117">117</a></sup> <p class="footpara">
ちなみに、VIP 3.5 の作者は、SKK の原作者でもある佐藤雅彦氏（京
都大学名誉教授）です。VIP 3.5 の発展版である VIPER は現在もメンテナンスさ
れています。GNU Emacs 19, 20 には、VIP 、VIPER とも標準添付します。
</p></div>

<div class="footdef"><sup><a id="fn.118" name="fn.118" class="footnum" href="#fnr.118">118</a></sup> <p class="footpara">
<code>skk-show-candidates-always-pop-to-buffer</code>
</p></div>

<div class="footdef"><sup><a id="fn.119" name="fn.119" class="footnum" href="#fnr.119">119</a></sup> <p class="footpara">
kill ring については info を参照。
</p>

<p class="footpara">
<a href="emacs#Kill Ring">The Kill Ring in GNU Emacs Manual</a>.
</p>

<p class="footpara">
保存した内容を Emacs 以外のアプリケーションで利用したい場合は変数 <code>interprogram-cut-function</code> を
設定してください。
</p></div>

<div class="footdef"><sup><a id="fn.120" name="fn.120" class="footnum" href="#fnr.120">120</a></sup> <p class="footpara">
<code>skk-lookup-search-agents</code> にセットして検索するようにしていま
す。Lookup とは異なる設定をする場合、この変数の設定を変更すれば可能です。
</p></div>

<div class="footdef"><sup><a id="fn.121" name="fn.121" class="footnum" href="#fnr.121">121</a></sup> <p class="footpara">
この設定は変数 <code>skk-treat-candidate-appearance-function</code> の値を
上書きします。 <code>skk-treat-candidate-appearance-function</code> を自分で設定する
場合は <code>skk-annotation-lookup-lookup</code> には <code>t</code> または <code>nil</code> を必要に応じ
て設定します。
</p></div>

<div class="footdef"><sup><a id="fn.122" name="fn.122" class="footnum" href="#fnr.122">122</a></sup> <p class="footpara">
この設定は変数 <code>skk-treat-candidate-appearance-function</code> の値を
上書きします。 <code>skk-treat-candidate-appearance-function</code> を自分で設定した
い場合は <code>skk-annotation-lookup-DictionaryServices</code> には <code>t</code> または <code>nil</code> を
必要に応じて設定します。
</p></div>

<div class="footdef"><sup><a id="fn.123" name="fn.123" class="footnum" href="#fnr.123">123</a></sup> <p class="footpara">
変数 <code>skk-show-tooltip</code> が <code>non-nil</code> の場合、ツールティップ
で表示します。
</p></div>

<div class="footdef"><sup><a id="fn.124" name="fn.124" class="footnum" href="#fnr.124">124</a></sup> <p class="footpara">
<code>skk-annotation-other-sources</code> の標準の値は環境によって異なりま
す。 <code>lookup.el</code> と <code>skk-lookup.el</code> の設定が有効になっている場合は <code>en.wiktionary</code> は
４番目 (Apple macOS では５番目) になります。
</p></div>

<div class="footdef"><sup><a id="fn.125" name="fn.125" class="footnum" href="#fnr.125">125</a></sup> <p class="footpara">
大文字でも小文字でも構いません。なお、第１段階・第２段階とも
に、メニューのキーを変更することができます。
</p>

<p class="footpara">
<a href="#sec-6-6-6">候補の選択に用いるキー</a>.
</p></div>

<div class="footdef"><sup><a id="fn.126" name="fn.126" class="footnum" href="#fnr.126">126</a></sup> <p class="footpara">
リードオンリーなバッファでは <code>M-x skk-display-code-for-char-at-point</code> を
実行してください。
</p></div>

<div class="footdef"><sup><a id="fn.127" name="fn.127" class="footnum" href="#fnr.127">127</a></sup> <p class="footpara">
変数 <code>skk-show-tooltip</code> が <code>non-nil</code> であればツールティップ
で表示します。変数 <code>skk-show-candidates-always-pop-to-buffer</code> が <code>non-nil</code> で
あれば other-window に表示します。 <code>skk-show-tooltip</code> が優先します。
</p></div>

<div class="footdef"><sup><a id="fn.128" name="fn.128" class="footnum" href="#fnr.128">128</a></sup> <p class="footpara">
関数 <code>skk-lookup-search</code> が <code>skk-autoloads.el</code> に追加されます。
</p>

<p class="footpara">
<a href="#sec-6-10-3-2">辞書検索のための関数</a>.
</p></div>

<div class="footdef"><sup><a id="fn.129" name="fn.129" class="footnum" href="#fnr.129">129</a></sup> <p class="footpara">
<a href="#sec-3-4">辞書の入手</a>.
</p></div>

<div class="footdef"><sup><a id="fn.130" name="fn.130" class="footnum" href="#fnr.130">130</a></sup> <p class="footpara">
edict 辞書 <code>SKK-JISYO.edict</code> があれば、例えば、
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skk-search-prog-list
      (append skk-search-prog-list
              (list
               '(skk-search-jisyo-file <span style="font-style: italic;">"/your-path/SKK-JISYO.edict"</span> 0 t))))
</pre>
</div>
<p class="footpara">
のように設定することにより、 edict 辞書を使用できます。
</p></div>

<div class="footdef"><sup><a id="fn.131" name="fn.131" class="footnum" href="#fnr.131">131</a></sup> <p class="footpara">
ただし、 <code>frame-width</code> が不足する場合は、*候補*バッファに表示しま
す。
</p></div>

<div class="footdef"><sup><a id="fn.132" name="fn.132" class="footnum" href="#fnr.132">132</a></sup> <p class="footpara">
以前のバージョンではテキスト属性 (text property) を使用して
いました。オーバーレイ属性はテキスト属性と異なり、テキストの一部とは見な
されません。そのため、テキストのコピーの際にオーバーレイ属性は保持されま
せん。その他にも、オーバーレイの移動やその属性の変更はバッファの変更とは
見なされないこと、オーバーレイの変更はバッファのアンドゥリストに記録され
ないこと、などが特徴として挙げられます。なお、XEmacs にはオーバーレイ機能
はありません。代わりに extent というものが用意されているのでそれを利用し
ます。
</p></div>

<div class="footdef"><sup><a id="fn.133" name="fn.133" class="footnum" href="#fnr.133">133</a></sup> <p class="footpara">
Emacs 標準 では <code>default</code>, <code>modeline</code>, <code>region</code>, <code>secondary-selection</code>,
<code>highlight</code>, <code>underline</code>, <code>bold</code>, <code>italic</code>, <code>bold-italic</code> があります。
</p></div>

<div class="footdef"><sup><a id="fn.134" name="fn.134" class="footnum" href="#fnr.134">134</a></sup> <p class="footpara">
標準設定では左です。
</p>

<p class="footpara">
<a href="#sec-5-1">起動と終了</a>.
</p></div>

<div class="footdef"><sup><a id="fn.135" name="fn.135" class="footnum" href="#fnr.135">135</a></sup> <p class="footpara">
変数 <code>window-system</code> が <code>nil</code> の場合は、これらフェイスは未定義となります。
</p></div>

<div class="footdef"><sup><a id="fn.136" name="fn.136" class="footnum" href="#fnr.136">136</a></sup> <p class="footpara">
kill ring については info を参照。
</p>

<p class="footpara">
<a href="emacs#Kill Ring">The Kill Ring in GNU Emacs Manual</a>.
</p>

<p class="footpara">
保存した内容を Emacs 以外のアプリケーションで利用したい場合は変数 <code>interprogram-cut-function</code> を
設定してください。
</p></div>

<div class="footdef"><sup><a id="fn.137" name="fn.137" class="footnum" href="#fnr.137">137</a></sup> <p class="footpara">
親指シフト入力の詳細については、ここでは述べません。興味がある
場合は、Web サイトを訪れてください。
</p>

<p class="footpara">
<a href="http://nicola.sunicom.co.jp/">日本語入力コンソーシアム</a>
</p></div>


</div>
</div></div>
<div id="postamble" class="status">
<p class="date">&#26085;&#20184;: 2017</p>
<p class="date">Created: 2017-07-02 日 05:46</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 26.0.50 (<a href="http://orgmode.org">Org</a> mode 8.2.10)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
